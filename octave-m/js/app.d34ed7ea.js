(function(t){function e(e){for(var n,s,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)s=r[d],i[s]&&p.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,r=1;r<o.length;r++){var c=o[r];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"006e":function(t,e){t.exports="data:image/png;base64,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"},"034f":function(t,e,o){"use strict";var n=o("64a9"),i=o.n(n);i.a},"098e":function(t,e,o){},"0c9f":function(t,e,o){"use strict";var n=o("62a7"),i=o.n(n);i.a},"0d7f":function(t,e,o){},1038:function(t,e,o){t.exports=o.p+"img/stop.e2482c29.svg"},"11bd":function(t,e,o){},"12c2":function(t,e,o){t.exports=o.p+"img/heartstroke.e8d29654.svg"},"186c":function(t,e,o){t.exports=o.p+"img/download2.05100788.svg"},"1e52":function(t,e,o){"use strict";var n=o("3c5f"),i=o.n(n);i.a},"20c8":function(t,e,o){t.exports=o.p+"img/mb-tag.4703ae7c.svg"},2727:function(t,e,o){},"2c36":function(t,e){t.exports="data:image/png;base64,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"},"36b9":function(t,e,o){t.exports=o.p+"img/anotherhand.575534b5.svg"},"3c5f":function(t,e,o){},"3e80":function(t,e,o){},"43e5":function(t,e){t.exports="data:image/png;base64,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"},4454:function(t,e,o){t.exports=o.p+"img/heartfill.5c2b42c9.svg"},4908:function(t,e,o){"use strict";var n=o("cd7d"),i=o.n(n);i.a},4955:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAsCAYAAAAacYo8AAAABGdBTUEAALGPC/xhBQAABIRJREFUWAnVmV1oHFUUx/9ndjdqUxJaW/ygYqAtamNsfVDqg/ii0ocWwS+qtRZDa0RqE2JFFPTRl2xTSVEIRYqCID76IvhiH/ykH9nNh1pi0NSi1FJt0ibVbHaO587szM5k7s7OxFl3HNidueeeOed3zz333rkzQIMOnnhnJRcHdjbIPIxGGcbCX0/BpP5G2W8cOPFegO/h8UObGwHfEHAeHewC870WcImf/9+AwzT3VWF5F/86vKJaTuYq8YjzT8eulRR5xoPXjvNXnvSUE7lMHByXLj4Gxio/nZl4uiQPTpBBGTjuk6nxzoD0XwgSBeeJwQ3C8oCWhw1P3ms1YgkTBUdJpkBm0hOYu+3819fGlSYGzvx5FjD31ARQeT9z8Yma9TErEgNH4dR2GZQ3hvvnxNIlOXD9oPS3g3E/j+Zv9wuXV0oEnItD6yTa2yIhmMlEPRFwcOk5WXQykcAZe3hy6JpIuiFKFjgXDm2XX/dyDLI1i3B3iI+lVddjfuHRpcJ6ZTX4uZDfLevBDqVbiTj9Djbfw9zCtDTgDT6TX1PPkFtfPPyQTIEdbjnKBSPyIBXQVi7me1E4OSV+PgAyl5QLa85lHs6hcHlGuvs62y9dlZr3Qdm3aXPfmTAWHsl/LPfFm+aIGC2522hT72Qt21bwruIlqd8vwKsreou4oa2dbu6ZtyJO1FMS0G+rRqQBzC+AF7+X7vlEHlO1q6Gk1loQP1K9L+KVSq9SSRt1HjncIb1+BPM4KwxveqBVmMcVtPJSSRXL4RcBt8oB8w6Uy8e5MHBKGvC0vdBUNOcWnpXZpCVwXxSBGqSqpyuH2nDwyMCHQPlHSdv91d53NKyzG1x3eebi4DaY5U99aroC4ZzADgHZo8DiV6Jyh04tmsyQx13zgkTy1UjTKaGbtrxyTNmugk8Nt+Py7B9iwNsLIf5lHLhjIkQttCqmjRbqpM6D3ymTLiSt75kR6PFQP75KZyD7hDELcWzQLDa9/IPjwAW3BRTMc0ez2WfCCSIyHQw/uIH0grN31vOkitWSbO5Lp0WpOxvkziiKzRdx6uw9C6JfUgdtkWZqg1vAnMZ0oWnq6jvvDagv4nYFpS9dfKu6TRkEz6Uy4r40UehB8M7+MVmXZu12peSfjfrg1lxJ+DolyApjEWv49FKeYMRtjfTM50RjdEu/PF74jxrgqRqggTRRTdCDG3STv31NLU3rvOvBy2afTrlJssd1fvXghOh7Tp3VZGXOts1nVQ8OHPdpNbegZdGDZ7KvyVz+W3N5lXdhsFiCJFpw67mgBQ/KA9dE8Jb/SKJ8C8PSZxTHu7t1cwTes/Xt5sLs6/LZT14TcJu3rnHXsmobfARr295ydvQ6X6Hgzg08+u4qlOf3yQ51p+z673bkiZ6JRmTr+BEyK47SXS/+Wc92JHCvER4bWg+z9LB8WdsqqbRV6jZKY+LZUS+EgEm57xsYhvxyn1HXgSmvn3rX8RxqrFnvG+dKt8pA6pB0WgcyV4paK5jsT4TE6gXOHNi4IjrnROdntOamaeOBv0W+7OMfnuVy0lDJjogAAAAASUVORK5CYII="},"4b8b":function(t,e,o){},"4bc7":function(t,e,o){"use strict";var n=o("bda5"),i=o.n(n);i.a},"4cef":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAqCAYAAACk2+sZAAAABGdBTUEAALGPC/xhBQAAAb1JREFUWAnd2D1KA0EYxvGsH6hg5UehncHGAyjaeAHBC2gjegQt9QYewVY7G0lpr95BWwu1Vgi4/h9hYMImu5OZd1bwhTeZDMP8ZpeHZbXTocqynKYnNW6rCsAdsEO6T9/TvaIovvnOWoIvEeY95YXxFfi7N2c+nGBHHxXQpc850LZ+5CrBw2qWySPwY3pu2ILUuVGw23eLga5+3U1YfTfBchbpU/B9OmR90NlCNyrYbY8+A18K2rlhUSjstukyuABPDt64sA4wQyt4J3R08GJg4apNWlcfFbwUWPgC7YI31iM3FRbugqcDLGsipCxg53QZBD/xLGEdIDh41rC7+sbg5YJ1gNrg5YSFu+DpiTcQvNywcNUaPRC8tmDhLngH+tEmLE+1y21f/QtYeH9Kny1WiXXL+9xbm/AHqF4in3WhbcFPWNegn0JVueEvjBvAh1/N+8gJ176f54AVoJ6aKx35F4k1PBAg785WhpZwJUAVzZuwgBUgJfbR27dxmArXBqhOj4WDAmQNBwfIEh4rQBZwVIBS4egAxcLJAYqBTQLUBL+yYMVbZBYgb8/KUP/12WBWL2C6tXc8gQT/3/oBHj+gWM3YV28AAAAASUVORK5CYII="},"4fa5":function(t,e,o){t.exports=o.p+"img/download1.a199aa69.svg"},"56d7":function(t,e,o){"use strict";o.r(e);var n={};o.r(n),o.d(n,"works",function(){return wn});o("cadf"),o("551c"),o("f751"),o("097d");var i=o("a026"),a=o("31bd"),s=(o("cc20"),o("7869")),r=o.n(s),c=o("2f62"),l=(o("6762"),o("795b")),u=o.n(l),d=(o("96cf"),o("3b8d")),p=o("f499"),h=o.n(p),f=o("cebc"),v=(o("34ef"),o("a78e")),g=o("bc3a");g.interceptors.response.use(function(t){return t.data.errcode&&"0"!==t.data.errcode?(alert(t.data.resmsg),u.a.reject(t)):t});var m={headers:{Accept:"application/json","Content-Type":"application/json"}};function w(t){var e=v["get"]("serviceToken");return e?(m.headers.Authorization="".concat(e),g.get("//api.octave-love.com/api/v1/user/getInfo",m)):!(e||!t)&&new u.a(function(e,o){g.post("//api.octave-love.com/api/v1/user/oauth/wechat/callback?code=".concat(t),"",m).then(function(t){20001===t.data.errcode&&o(20001);var e=t.data.data.id_token;return m.headers.Authorization="".concat(e),v["set"]("serviceToken",e,{expires:30}),g.get("//api.octave-love.com/api/v1/user/getInfo",m)},function(){o()}).then(function(t){e(t)}).catch(function(t){o(t)})})}function A(t,e){return new u.a(function(o,n){var i=MidiConvert.create();console.log("record",t),t.reduce(function(t,e){return t.note(Tone.Frequency(e.note).toMidi(),e.time,1)},i.track(0).patch(32));for(var a={headers:{"Content-Type":"multipart/form-data",processData:!1,Authorization:m.headers.Authorization}},s=i.encode(),r=new Uint8Array(s.length),c=0;c<s.length;c++)r[c]=s.charCodeAt(c);var l=new Blob([r],{type:"audio/midi;charset=binary"}),u=new FileReader;u.onload=function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(i){var s,r,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=new FormData,s.append("fname","output.mid"),s.append("data",i.target.result),r="",t.prev=4,t.next=7,g.post("//api.octave-love.com/api/v1/uploadAudio",s,a);case 7:r=t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](4),console.log(t.t0),n(t.t0);case 14:return c="".concat(r.data.data),l=Object(f["a"])({},e,{url:c}),console.log(c),t.abrupt("return",g.post("//api.octave-love.com/api/v1/work/create",h()(l),m).then(function(t){o(t.data.data)}).catch(function(t){n(t)}));case 18:case"end":return t.stop()}},t,null,[[4,10]])}));return function(e){return t.apply(this,arguments)}}(),u.readAsDataURL(l)})}function k(t){m.headers.Authorization;return new u.a(function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(o,n){var i,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=new FormData,e.prev=1,a="".concat(Math.floor(1e7*Math.random()),".wav"),e.next=5,g.post("//api.octave-love.com/api/v1/getToken?fname=".concat(a),h()({fname:a}),m);case 5:return s=e.sent,i.append("file",t),i.append("token",s.data.data.token),e.next=10,g.post("//upload.qiniup.com/",i,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}});case 10:o(s.data.data.url),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log(e.t0),n(e.t0);case 17:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t,o){return e.apply(this,arguments)}}())}function b(t){return g.get("//api.octave-love.com/api/v1/work/detail/".concat(t),m)}function y(t){return g.get("//api.octave-love.com/api/v1/user/detail/".concat(t),m)}function C(t,e){return g.get("//api.octave-love.com/api/v1/work/getListByUid/".concat(t,"?page=").concat(e,"&size=14"),m)}function T(t,e){return g.get("//api.octave-love.com/api/v1/favorite/getWorkList/".concat(t,"?page=").concat(e,"&size=14"),m)}function x(t){var e=t.workId,o=t.status;return g.post("//api.octave-love.com/api/v1/favorite/create",h()({workId:e,status:o}),m)}function O(t){var e=t.id,o=t.title,n=t.cover,i=t.content,a=t.status;return g.put("//api.octave-love.com/api/v1/work/updateWork/".concat(e),h()({title:o,cover:n,content:i,status:a}),m)}function E(t){var e=t.pid,o=t.wid,n=t.amount,i=t.addressId,a=t.message;return g.post("//api.octave-love.com/api/v1/shop/orders/create",h()({pid:e,wid:o,amount:n,addressId:i,message:a}),m)}function S(t){var e=t.orderId;return g.post("//api.octave-love.com/api/v1/shop/pay/unifiedorder?orderId=".concat(e),"",m)}function P(t){return g.get("//api.octave-love.com/api/v1/shop/orders/myOrderList?page=".concat(t,"&size=14"),m)}function I(t){return g.post("//api.octave-love.com/api/v1/shop/address/create",h()(t),m)}function R(t){var e=t.media_id;return g.post("//api.octave-love.com/api/v1/wechat/saveMedia?media_id=".concat(e),"",m)}function W(){return g.get("//api.octave-love.com/api/v1/admin/shop/products",m)}function N(t){var e=t.wid;return g.get("//api.octave-love.com/api/v1/shop/orders/purchaseCheck?pid=1&wid=".concat(e),m)}function B(t){var e=t.page,o=t.size,n=t.category,i=t.orderStrategy,a=(t.id,"//api.octave-love.com/api/v1/home?page=".concat(e,"&size=").concat(o));return n&&(a+="&category=".concat(n)),i&&(a+="&orderStrategy=".concat(i)),g.get(a,m)}var M={BOUNCE_PROJECT:function(t,e){t.commit,t.state;var o=e.record,n=e.info;return A(o,n)},FETCH_MBOX:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e,o){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=o.id,t.abrupt("return",new u.a(function(t,e){b(i).then(function(e){console.log("xxi",e.data.data.url),console.log("xxi",e.data.data.userId),y(e.data.data.userId).then(function(o){console.log("work musixiser info: ",o.data.data),e.data.data.userVO=o.data.data,MidiConvert.load(e.data.data.url,function(o){console.log("midi",o);var i=o.tracks.reduce(function(t,e){return t.concat(e.notes)},[]);n("SET_ID_PROJECT",{record:i,info:e.data.data}),t()})})})}));case 3:case"end":return t.stop()}},t)}));function e(e,o){return t.apply(this,arguments)}return e}(),FETCH_MUSIXISER:function(t,e){var o=t.commit,n=(t.state,e.id);return new u.a(function(t,e){y(n).then(function(e){console.log("musixiser info: ",e.data.data),o("SET_MUSIXISER",{musixiserInfo:e.data.data}),t()})})},FETCH_SQUARE_WORKS:function(t,e){var o=t.commit,n=(t.state,e.page),i=e.size,a=e.orderStrategy;return new u.a(function(t,e){B({page:n,size:i,orderStrategy:a}).then(function(e){console.log("works list: ",e.data.data),o("PUSH_SQUARE_WORKS",{squareWorksObj:e.data.data}),t()})})},FETCH_BOARD_WORKS:function(t,e){var o=t.commit,n=(t.state,e.page),i=e.size,a=e.category,s=e.orderStrategy;return new u.a(function(t,e){B({page:n,size:i,category:a,orderStrategy:s}).then(function(e){if(console.log("works list: ",e.data.data),1==n){var i=[],a=[],s=0;while(i.length<3&&s<e.data.data.list.length)!a.includes(e.data.data.list[s].userId)&&e.data.data.list[s].machineNum&&e.data.data.list[s].machineNum<=18&&(console.log(e.data.data.list[s].userId),a.push(e.data.data.list[s].userId),i.push(e.data.data.list.splice(s,1)[0]),s-=1),s+=1;while(i.length<3)i.push({});console.log("--------"),console.log(i),e.data.data.list=i.concat(e.data.data.list),console.log(e.data.data.list)}o("PUSH_BOARD_WORKS",{boardWorksObj:e.data.data}),t()})})},FETCH_WORKS_FROM_MUSIXISER:function(t,e){var o=t.commit,n=(t.state,e.id),i=e.page;return new u.a(function(t,e){C(n,i).then(function(e){console.log("works list: ",e.data.data),o("PUSH_MUSIXISER_WORKS",{musixiserWorksObj:e.data.data}),t()})})},FETCH_FAV_WORKS:function(t,e){var o=t.commit,n=(t.state,e.id),i=e.page;return new u.a(function(t,e){T(n,i).then(function(e){console.log("works list: ",e.data.data),o("PUSH_FAV_WORKS",{favWorksObj:e.data.data}),t()})})},FETCH_PRODUCTLIST:function(t,e){var o=t.commit;t.state,e.id,e.page;return new u.a(function(t,e){W().then(function(e){console.log("product list: ",e.data.data.list),o("PUSH_PRODUCTLIST",{productList:e.data.data.list.filter(function(t){return 1==t.category})}),t()})})},FETCH_ORDERS:function(t,e){var o=t.commit,n=(t.state,e.page);return new u.a(function(t,e){P(n).then(function(e){o("PUSH_ORDERS",{orders:e.data.data}),t()})})}},_=(o("20d6"),o("ac6a"),{SET_USER_INFO:function(t,e){var o=e.type;t.activeType=o},SET_WORK_INFO:function(t,e){var o=e.type,n=e.ids;t.lists[o]=n},SET_MUSIXISER_INFO:function(t,e){var o=e.items;o.forEach(function(e){e&&i["default"].set(t.items,e.id,e)})},SET_BOUNCE_PROJECT:function(t,e){var o=e.record;t.recordProject=o},SET_ID_PROJECT:function(t,e){var o=e.record,n=e.info;t.recordProject=o,t.recordProjectInfo=n},SET_MUSIXISER:function(t,e){var o=e.musixiserInfo;t.musixiserInfo=o},PUSH_SQUARE_WORKS:function(t,e){var o=e.squareWorksObj;console.log("ccccc",o.current),1===+o.current?t.squareWorksObj.content=o.list:t.squareWorksObj.content=t.squareWorksObj.content.concat(o.list),t.squareWorksObj.total=o.total,t.squareWorksObj.size=o.size,t.squareWorksObj.current=o.current},PUSH_MUSIXISER_WORKS:function(t,e){var o=e.musixiserWorksObj;console.log("ccccc",o.current),1===+o.current?t.musixiserWorksObj.content=o.list:t.musixiserWorksObj.content=t.musixiserWorksObj.content.concat(o.list),t.musixiserWorksObj.total=o.total,t.musixiserWorksObj.size=o.size,t.musixiserWorksObj.current=o.current},PUSH_FAV_WORKS:function(t,e){var o=e.favWorksObj;console.log("xxxxxxx",o),1===+o.current?t.favWorksObj.content=o.list:t.favWorksObj.content=t.favWorksObj.content.concat(o.list),t.favWorksObj.total=o.total,t.favWorksObj.size=o.size,t.favWorksObj.current=o.current},PUSH_BOARD_WORKS:function(t,e){var o=e.boardWorksObj;console.log("xxxxxxx",o),1===+o.current?t.boardWorksObj.content=o.list:t.boardWorksObj.content=t.boardWorksObj.content.concat(o.list),t.boardWorksObj.total=o.total,t.boardWorksObj.size=o.size,t.boardWorksObj.current=o.current},RESET_WORK_LIST:function(t,e){var o=e.type;t[o]={content:[]}},SAVE_ORDER_INFO:function(t,e){var o=e.work,n=e.product,i=e.address;t.orderToCreate.wid=o?o.id:t.orderToCreate.wid,t.orderToCreate.pid=n?n.id:t.orderToCreate.pid,t.orderToCreate.address=i||t.orderToCreate.address,t.targetProduct=n||t.targetProduct,t.targetWork=o||t.targetWork},PUSH_PRODUCTLIST:function(t,e){var o=e.productList;t.productList=o,t.targetProduct=o[0]},PUSH_ORDERS:function(t,e){var o=e.orders;console.log("xxxxxxx",o),1===+o.current?t.orders.content=o.list:t.orders.content=t.orders.content.concat(o.list),t.orders.total=o.total,t.orders.size=o.size,t.orders.current=o.current},OPERATE_WORK:function(t,e){var o=e.work;t.operatingWorkId=o.id},PLAY_WORK:function(t,e){var o=e.work;t.playingWorkId=o.id},LOCAL_UPDATE_LIST_FAV:function(t,e){var o=e.type,n=e.item;console.log(n),t[o].content.forEach(function(t){t.id==n.id&&(t.favStatus=n.favStatus,t.collectNum=t.favStatus?t.collectNum+1:t.collectNum-1)})},LOCAL_UPDATE_LIST:function(t,e){var o=e.type,n=e.item;if(console.log(n),2!=n.status)t[o].content.forEach(function(t){t.id==n.id&&(t.status=n.status)});else{var i=t[o].content.findIndex(function(t){return t.id==n.id});t[o].content.splice(i,1)}},LOCAL_UPDATE_ORDER_STATUS:function(t,e){var o=e.orderId,n=e.status;t.orders.content.forEach(function(t){t.orderId==o&&(t.status=n)})},PUSH_STACKS:function(t,e){var o=e.stacks;console.log("来自mutation",o)}}),D=(o("c5f6"),{activeIds:function(t){var e=t.activeType,o=t.itemsPerPage,n=t.lists,i=Number(t.route.params.page)||1;if(e){var a=(i-1)*o,s=i*o;return n[e].slice(a,s)}return[]},activeItems:function(t,e){return e.activeIds.map(function(e){return t.items[e]}).filter(function(t){return t})}});function j(){return new c["a"].Store({state:{myInfo:{},recordParts:[],recordProject:[],recordProjectInfo:{},musixiserInfo:{},squareWorksObj:{content:[]},musixiserWorksObj:{content:[]},favWorksObj:{content:[]},boardWorksObj:{content:[]},targetProduct:{},targetWork:{},orders:{content:[]},productList:[],orderToCreate:{wid:"",pid:"",address:{}},operatingWorkId:-1,playingWorkId:-1},actions:M,mutations:_,getters:D})}i["default"].use(c["a"]);var U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("transition",{attrs:{name:t.transitionName}},[o("router-view",{attrs:{screenOrientation:t.screenOrientation}})],1)],1)},L=[],F={name:"app",data:function(){return{transitionName:"fade",screenOrientation:""}},created:function(){var t,e=this,o=window,n=document.documentElement,i="addEventListener";function a(){clearTimeout(t),t=setTimeout(s,300)}function s(){o.rem=n.getBoundingClientRect().width/10,n.style.fontSize=o.rem+"px"}s(),n.setAttribute("data-dpr",o.devicePixelRatio),o[i]("resize",a),o[i]("pageshow",function(t){t.persisted&&a()}),180!==window.orientation&&0!==window.orientation||(this.screenOrientation="portrait"),90!==window.orientation&&-90!==window.orientation||(this.screenOrientation="landscape"),o[i]("orientationchange",function(){console.log(screen.orientation),console.log(window.orientation),180!==window.orientation&&0!==window.orientation||(e.screenOrientation="portrait"),90!==window.orientation&&-90!==window.orientation||(e.screenOrientation="landscape")}),this.$store.dispatch("FETCH_PRODUCTLIST",{})},beforeRouteUpdate:function(t,e,o){}},H=F,G=(o("034f"),o("2877")),q=Object(G["a"])(H,U,L,!1,null,null,null),K=q.exports,z=o("8c4f"),Y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{attrs:{id:"swiper-container"}},[o("swiper",{ref:"bigCardList",attrs:{options:t.bigCardListOption}},t._l(t.squareWorksObj.content,function(e){return o("swiper-slide",{key:e.id},[o("card",{attrs:{workInfo:e,onPlayWork:function(){return t.playWork(e)},playingStatus:e.id==t.playingWorkId,onDownloadWork:t.downloadWork,onPurchaseWork:function(){return t.purchaseWork(e)},onToggleLike:function(){return t.toggleLike(e,"squareWorksObj")}}})],1)}),1)],1),o("div",{staticClass:"button_group"},[o("button",{on:{click:t.redirectToMaker}},[t._v("我来试试")]),o("button",{on:{click:function(e){return t.purchaseWork(t.squareWorksObj.content[t.activeIndex])}}},[t._v("制成礼物")])])])},J=[],Q=(o("a481"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"preview-bg"},[t.workInfo.cover&&t.workInfo.cover.indexOf("//")>=0?n("img",{staticClass:"cover",attrs:{src:t.workInfo.cover,alt:""}}):t._e(),!t.workInfo.cover||t.workInfo.cover.indexOf("//")<0?n("div",{staticClass:"dark-mask"}):t._e(),n("p",{staticClass:"work-content"},[t._v(t._s(t.workInfo.content))]),t.playingStatus?t._e():n("img",{staticClass:"playBtn",attrs:{src:o("4cef"),alt:""},on:{touchend:t.onPlayWork}}),t.playingStatus?n("img",{staticClass:"playBtn",attrs:{src:o("1038"),alt:""},on:{touchend:t.onPlayWork}}):t._e()]),n("div",{staticClass:"detail"},[n("div",{staticClass:"basic-info"},[n("p",{staticClass:"title",on:{click:function(e){return t.gotoWork(t.workInfo.id)}}},[t._v(t._s(t.workInfo.title))]),n("div",{staticStyle:{display:"flex","align-items":"center"},on:{click:function(e){return t.gotoMusixiser(t.workInfo.userId)}}},[n("img",{staticClass:"avatar",attrs:{src:t.workInfo.userVO.smallAvatar,alt:""}}),n("p",{staticClass:"song-title"},[t._v(t._s(t.workInfo.userVO.realname))]),n("p",{staticClass:"update-info"},[t._v(" · 更新于"+t._s(t._f("getDateDiff")(t.workInfo.lastModifiedDate)))])])]),n("div",{staticClass:"download-info"},[n("div",{staticClass:"likes",on:{click:function(e){return t.onDownloadWork(t.workInfo)}}},[t.workInfo.wavAccess?t._e():n("img",{attrs:{src:o("4fa5"),alt:""}}),t.workInfo.wavAccess?n("img",{attrs:{src:o("186c"),alt:""}}):t._e(),n("p",[t._v(".wav")])])]),n("div",{staticClass:"like-info"},[n("div",{staticClass:"likes",on:{click:function(e){return t.onToggleLike(t.workInfo)}}},[t.workInfo.favStatus?t._e():n("img",{attrs:{src:o("12c2"),alt:""}}),t.workInfo.favStatus?n("img",{attrs:{src:o("4454"),alt:""}}):t._e(),n("p",[t._v(t._s(t.workInfo.collectNum))])])])])])}),X=[],V={props:{workInfo:{type:Object},playingStatus:{type:Boolean,default:!1},showAuthor:{type:Boolean,default:!0},maskOn:{type:Boolean,default:!1},onPlayWork:Function,onPurchaseWork:Function,onShareWork:Function,onHideWork:Function,onDeleteWork:Function,onToggleLike:Function,onDownloadWork:Function,onLongPress:{type:Function,default:function(){console.log("longpress")}},onTapMask:Function},computed:{},data:function(){return{}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{gotoWork:function(t){this.$router.push({path:"/new-music-box-viewer",query:{id:t}})},gotoMusixiser:function(t){this.$router.push({path:"/musixiser",query:{id:t}})}}},Z=V,$=(o("bad2"),Object(G["a"])(Z,Q,X,!1,null,"a0304d22",null)),tt=$.exports,et=o("7212");o("386d"),o("4917"),o("3b2b");function ot(t){var e=new RegExp("[?|&]".concat(t,"=([^&]+)")),o=location.search.match(e);return o&&o[1]}var nt=o("b6d0"),it=o.n(nt),at=o("75fc"),st=(o("55dd"),o("db0c")),rt=o.n(st),ct=o("a4bb"),lt=o.n(ct),ut=o("e814"),dt=o.n(ut),pt=o("8cc4"),ht=o("fea2");pt.Transport.cancel();var ft,vt=1,gt=!1;var mt=new pt.Sampler({B3:"B3.[mp3|ogg]",E4:"E4.[mp3|ogg]",G4:"G4.[mp3|ogg]",B4:"B4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",E5:"E5.[mp3|ogg]",G5:"G5.[mp3|ogg]",B5:"B5.[mp3|ogg]","C#6":"Cs6.[mp3|ogg]"},{release:1,baseUrl:"//cnbj1.fds.api.xiaomi.com/mbox/audio/mbox/"}).toMaster();function wt(t){console.log("== Enter RealMagic =="),console.log(h()(t));var e={};t.forEach(function(t){var o=dt()(2*pt.Frequency(t.note).toFrequency(),10);e[o]||(e[o]=[]),e[o].push(t.time)});var o=lt()(e),n=rt()(e),i=n.map(function(t){return t.map(function(t){return[t,t+20]}).reduce(function(t,e){return t.concat(e)},[]).sort(function(t,e){return t-e})}),a=[],s=[];if(o.length>18&&console.log("音种类超过18个，这个做不了"),i.forEach(function(t){var e=[];t.forEach(function(o,n){var i=[],a=!1,s=!1;if(0===n)e.push(1);else{var r=n;while(r>=1&&!a){if(r-=1,o-t[r]>=vt&&-1===i.indexOf(e[r])){e.push(e[r]),s=!0;break}if(-1===i.indexOf(e[r])&&(i.push(e[r]),Object(at["a"])(new it.a(e)).length===Object(at["a"])(new it.a(i)).length)){a=!0;break}}(0===r&&!s||a)&&e.push(Math.max.apply(Math,e)+1)}}),s.push(e)}),s.forEach(function(t,e){var n=0;while(n<=Math.max.apply(Math,Object(at["a"])(t))-1)a.push(o[e]),n+=1}),a.length<18){var r=a[a.length-1];while(a.length<18)a.push(r)}else a.length>18&&console.log("所需音片儿超过18个");return a.length}function At(t){var e=[151,255,241],o=[137,228,217],n=[143,123,242],i=20,a=[0,0,0];return t<0||t>i||t<=10&&(a=[e[0]+t*(o[0]-e[0])/(i/2),e[1]+t*(o[1]-e[1])/(i/2),e[2]+t*(o[2]-e[2])/(i/2)]),a=[o[0]+t*(n[0]-o[0])/(i/2),o[1]+t*(n[1]-o[1])/(i/2),o[2]+t*(n[2]-o[2])/(i/2)],"rgb(".concat(Math.floor(a[0]),",").concat(Math.floor(a[1]),",").concat(Math.floor(a[2]),")")}function kt(t){return"".concat((pt.Frequency(t).toMidi()-50)/70*60+.2)}function bt(t){if(t&&t.length&&t.forEach(function(t){try{t.dispose()}catch(e){}}),ft)try{ft.dispose()}catch(e){}}function yt(t,e){if(bt(),console.log("current state",pt.Transport.state),e){if(gt||(console.log("pp"),mt.triggerAttack("E6",0,0),gt=!0),ft)try{ft.dispose()}catch(n){}ft=new pt.Part(function(t,e){mt.triggerAttackRelease(pt.Frequency(e.midi,"midi"),"2n",t)},t).start(0,0),ft.loop=!0;var o=t[t.length-1];o&&o.time>20?ft.loopEnd=o.time+o.duration+2:ft.loopEnd=20,pt.Transport.position=0,pt.Transport.start("+0.01",0)}else pt.Transport.stop(0)}function Ct(t,e){return new u.a(function(o,n){e&&!/.mid/.test(t)?n():e?(gt||(console.log("ppp"),mt.triggerAttack("E6",0,0),gt=!0),console.log("midi---url",t),MidiConvert.load(t,function(t){console.log("dasdsad",t);var o=t.tracks.reduce(function(t,e){return t.concat(e.notes)},[]);yt(o,e)}),o()):(pt.Transport.stop(0),o())})}function Tt(t){return new u.a(function(e,o){/.mid/.test(t)||o(),MidiConvert.load(t,function(t){function o(t,e){var o=pt.context.sampleRate,n=pt.context;n.Transport||(n.Transport=pt.Transport);var i=new pt.OfflineContext(2,e,o);function a(){var t=i.render();return pt.context=n,t.then(function(t){return new pt.Buffer(t)})}pt.context=i,t(pt.Transport,a)}o(function(o,n){var i=new pt.Sampler({B3:"B3.[mp3]",E4:"E4.[mp3]",G4:"G4.[mp3]",B4:"B4.[mp3]","C#5":"Cs5.[mp3]",E5:"E5.[mp3]",G5:"G5.[mp3]",B5:"B5.[mp3]","C#6":"Cs6.[mp3]"},a,"//cnbj1.fds.api.xiaomi.com/mbox/audio/mbox/").toMaster();function a(){var o=t.tracks.reduce(function(t,e){return t.concat(e.notes)},[]);o.forEach(function(t){i.triggerAttackRelease(pt.Frequency(t.midi,"midi"),"2n",t.time)}),n().then(function(t){t.sampleRate=44100;var o=ht(t),n=new window.Blob([new DataView(o)],{type:"audio/wav"});console.log("blob generated successfully"),e(n)})}},20)})})}o("28a5");var xt,Ot=o("bc3a"),Et=o.n(Ot),St=o("18a0"),Pt=o.n(St),It=(o("f654"),{headers:{Accept:"application/json","Content-Type":"application/json"}}),Rt=function(){return new u.a(function(t,e){Et.a.post("//api.octave-love.com/api/v1/wechat/getTicket?url=".concat(encodeURIComponent(window.location.href.split("#")[0])),"",It).then(function(e){Pt.a.config({debug:!1,appId:e.data.data.appId,timestamp:e.data.data.timestamp,nonceStr:e.data.data.nonceStr,signature:e.data.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","chooseWXPay","openAddress","chooseImage","uploadImage"]}),Pt.a.ready(function(){t(Pt.a)})},function(){e("配置wx.config失败")})})},Wt=function(t){var e=t.title,o=t.desc,n=t.fullPath,i=t.imgUrl,a=n;Pt.a.onMenuShareTimeline({title:e,link:a,imgUrl:i.replace(/^(http:)?\/\//i,"https://"),success:function(){},cancel:function(){}}),Pt.a.onMenuShareAppMessage({title:e,desc:o,link:a,imgUrl:i.replace(/^(http:)?\/\//i,"https://"),success:function(){},cancel:function(){}})},Nt=function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e,o,n){var i,a,s,r,c,l,u,d;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.pid,a=e.wid,s=e.amount,r=e.address,c=e.message,console.log("------------"),t.next=4,I(r);case 4:return l=t.sent,console.log("==========="),console.log(l),t.next=9,E({pid:i,wid:a,amount:s,addressId:l.data.data,message:c});case 9:u=t.sent,d=u.data.data,Mt({orderId:d},o,n);case 12:case"end":return t.stop()}},t)}));return function(e,o,n){return t.apply(this,arguments)}}(),Bt=function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e,o,n){var i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.wid,t.next=3,E({pid:1,wid:i,message:""});case 3:a=t.sent,s=a.data.data,Mt({orderId:s},o,n);case 6:case"end":return t.stop()}},t)}));return function(e,o,n){return t.apply(this,arguments)}}(),Mt=function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e,o,n){var i,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.orderId,t.next=3,S({orderId:i});case 3:a=t.sent,s=a.data.data,Pt.a.chooseWXPay({appId:s.appId,timestamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign,success:function(t){console.log(t),o(t)},fail:function(){n()},cancel:function(){n()}});case 6:case"end":return t.stop()}},t)}));return function(e,o,n){return t.apply(this,arguments)}}(),_t=function(t,e){Pt.a.openAddress({success:function(e){t(e)},cancel:function(){e()}})},Dt=function(t,e,o){Pt.a.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(n){var i=n.localIds[0];o(),Pt.a.uploadImage({localId:i,isShowProgressTips:1,success:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(o){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=o.serverId,e.next=3,R({media_id:n});case 3:i=e.sent,console.log("file derived",i),t(i.data.data);case 6:case"end":return e.stop()}},e)}));function o(t){return e.apply(this,arguments)}return o}(),fail:function(t){e()}})}})},jt={data:function(){return{autoplayFlag:!1,playing:!1}},methods:{genWav:function(t){var e=this;this.$loading("正在生成..请耐心等待,下单后可重复下载"),Tone.Transport.stop(0),Tt(t.url).then(function(t){return k(t)}).then(function(o){e.$ga.event("Download","success","".concat(t.id)),e.$loading.close(),location.href=o}).catch(function(){e.$loading.close(),e.$toast("下载失败请稍后再试")})},downloadWork:function(t){var e=this;t.id||(t.id=t.wid),t&&t.url?(this.$ga.event("Download","tap","".concat(t.id)),this.$loading("请稍后"),N({wid:t.id}).then(function(o){o.data.data?(e.$loading.close(),e.genWav(t)):Bt({wid:t.id},function(){e.$loading.close(),e.$toast("下单成功"),e.genWav(t)},function(){e.$loading.close(),e.$toast("停止生成")})}).catch(function(){e.$loading.close()})):this.$toast("作品文件缺失")},purchaseWork:function(t){this.$ga.event("MakeMB","tap","".concat(t.id)),this.$toast("该功能近期开放,敬请期待~")},toggleLike:function(t,e){var o=this;t.favStatus?this.$ga.event("Song","unfav","".concat(t.id)):this.$ga.event("Song","fav","".concat(t.id)),x({workId:t.id,status:+!t.favStatus}).then(function(){o.$store.commit("LOCAL_UPDATE_LIST_FAV",{type:e,item:{id:t.id,favStatus:+!t.favStatus}})})},playWork:function(t){var e=this;t&&(console.log("work going to play: ",t),t.id!=this.playingWorkId?(this.autoplayFlag=!0,this.$ga.event("Song","play_20s","".concat(t.id)),this.playing=!0,Ct(t.url,this.playing).then(function(){return e.$store.commit("PLAY_WORK",{work:t})}).catch(function(){e.$toast("作品损坏，无法播放")})):this.playing?(this.$ga.event("Song","stop_20s","".concat(t.id)),this.autoplayFlag=!1,this.playing=!1,Ct(t.url,this.playing).then(function(){return e.$store.commit("PLAY_WORK",{work:{id:-1}})}).catch(function(){e.$toast("作品损坏，无法播放")})):(this.$ga.event("Song","play_20s","".concat(t.id)),this.autoplayFlag=!0,this.playing=!0,Ct(t.url,this.playing).then(function(){return e.$store.commit("PLAY_WORK",{work:t})}).catch(function(){e.$toast("作品损坏，无法播放")})))}}},Ut={name:"Square",mixins:[jt],components:{Card:tt,swiper:et["swiper"],swiperSlide:et["swiperSlide"]},data:function(){return{cards:[],userId:0,bigCardListOption:[],activeIndex:0,autoplayFlag:!1}},computed:{squareWorksObj:function(){return this.$store.state.squareWorksObj},playingWorkId:function(){return this.$store.state.playingWorkId},bigSwiper:function(){return this.$refs.bigCardList.swiper}},methods:{redirectToMaker:function(){this.$router.push({path:"/newbie-maker",query:{}})},loadWorks:function(){var t=this;this.$store.dispatch("FETCH_SQUARE_WORKS",{page:this.squareWorksObj.current?this.squareWorksObj.current+1:1,size:10,orderStrategy:2}).then(function(){+t.squareWorksObj.content.length<+t.squareWorksObj.total&&(t.busy=!1)})}},beforeRouteLeave:function(t,e,o){bt(),o()},created:function(){var t=this;this.bigCardListOption={loop:!1,centeredSlides:!0,slidesPerView:1,watchSlidesProgress:!0,on:{transitionEnd:function(e){var o=t.squareWorksObj,n=o.size,i=o.current;t.targetProduct=t.squareWorksObj.content[this.realIndex],t.activeIndex=this.realIndex,t.autoplayFlag&&t.playWork(t.squareWorksObj.content[this.realIndex]),t.activeIndex>=(n*i-1)/2&&t.loadWorks()},progress:function(t){}}};var e=document.documentElement;window.rem=e.getBoundingClientRect().width/10,e.style.fontSize=window.rem+"px";var o=/micromessenger/.test(navigator.userAgent.toLowerCase());if(this.userId=239,this.$toast("向右滑动浏览"),o){var n="".concat(location.origin).concat(location.pathname,"#/new-music-box-viewer?id=").concat(t.$store.state.route.query.id);Rt().then(function(){Wt({title:"哎八音推荐广场",desc:"｡:.ﾟヽ(*´∀`)ﾉﾟ.:｡",fullPath:n,imgUrl:"http://cdn.cnbj1.fds.api.mi-img.com/mbox/aby.jpg"})}),ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(e){e.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(n),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),t.loadWorks(),console.log("get user info success",e.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(n),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(n),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}else t.loadWorks()}},Lt=Ut,Ft=(o("99dc"),Object(G["a"])(Lt,Y,J,!1,null,"3fe62458",null)),Ht=Ft.exports,Gt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"container"}},[o("div",{class:["keys",8===t.tutorSession?"tutorial-highlight":""],on:{touchmove:t.keng,touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.touchNoteStartHandler(e)},touchend:function(e){return e.stopPropagation(),t.touchNoteEndHandler(e)},touchcancel:function(e){return e.stopPropagation(),t.touchNoteEndHandler(e)}}},[o("div",{class:["white","c",t.activeNote.C4?"active-note":""],attrs:{id:"C4"}}),o("div",{class:["black","d-minor",t.activeNote.Db4?"active-note":""],attrs:{id:"Db4"}}),o("div",{class:["white","d",t.activeNote.D4?"active-note":""],attrs:{id:"D4"}}),o("div",{class:["black","e-minor",t.activeNote.Eb4?"active-note":""],attrs:{id:"Eb4"}}),o("div",{class:["white","e",t.activeNote.E4?"active-note":""],attrs:{id:"E4"}}),o("div",{class:["white","f",t.activeNote.F4?"active-note":""],attrs:{id:"F4"}}),o("div",{class:["black","f-sharp",t.activeNote.Gb4?"active-note":""],attrs:{id:"Gb4"}}),o("div",{class:["white","g",t.activeNote.G4?"active-note":""],attrs:{id:"G4"}}),o("div",{class:["black","a-minor",t.activeNote.Ab4?"active-note":""],attrs:{id:"Ab4"}}),o("div",{class:["white","a",t.activeNote.A4?"active-note":""],attrs:{id:"A4"}}),o("div",{class:["black","b-minor",t.activeNote.Bb4?"active-note":""],attrs:{id:"Bb4"}}),o("div",{class:["white","b",t.activeNote.B4?"active-note":""],attrs:{id:"B4"}}),o("div",{class:["white","c",t.activeNote.C5?"active-note":""],attrs:{id:"C5"}}),o("div",{class:["black","d-minor",t.activeNote.Db5?"active-note":""],attrs:{id:"Db5"}}),o("div",{class:["white","d",t.activeNote.D5?"active-note":""],attrs:{id:"D5"}}),o("div",{class:["black","e-minor",t.activeNote.Eb5?"active-note":""],attrs:{id:"Eb5"}}),o("div",{class:["white","e",t.activeNote.E5?"active-note":""],attrs:{id:"E5"}}),o("div",{class:["white","f",t.activeNote.F5?"active-note":""],attrs:{id:"F5"}}),o("div",{class:["black","f-sharp",t.activeNote.Gb5?"active-note":""],attrs:{id:"Gb5"}}),o("div",{class:["white","g",t.activeNote.G5?"active-note":""],attrs:{id:"G5"}}),o("div",{class:["black","a-minor",t.activeNote.Ab5?"active-note":""],attrs:{id:"Ab5"}}),o("div",{class:["white","a",t.activeNote.A5?"active-note":""],attrs:{id:"A5"}}),o("div",{class:["black","b-minor",t.activeNote.Bb5?"active-note":""],attrs:{id:"Bb5"}}),o("div",{class:["white","b",t.activeNote.B5?"active-note":""],attrs:{id:"B5"}}),o("div",{class:["white","c",t.activeNote.C6?"active-note":""],attrs:{id:"C6"}}),o("div",{class:["black","d-minor",t.activeNote.Db6?"active-note":""],attrs:{id:"Db6"}}),o("div",{class:["white","d",t.activeNote.D6?"active-note":""],attrs:{id:"D6"}}),o("div",{class:["black","e-minor",t.activeNote.Eb6?"active-note":""],attrs:{id:"Eb6"}}),o("div",{class:["white","e",t.activeNote.E6?"active-note":""],attrs:{id:"E6"}}),o("div",{class:["white","f",t.activeNote.F6?"active-note":""],attrs:{id:"F6"}})]),o("div",{class:["keyshadow",8===t.tutorSession?"tutorial-highlight":""]}),o("div",{staticClass:"scroll-container"}),o("div",{staticClass:"semi-piano-roll",class:[5===t.tutorSession||6===t.tutorSession?"tutorial-highlight":""],on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[o("swiper",{ref:"pianoRoll",attrs:{options:t.pianoRollSwiperOption}},[t._l(t.PARTNUM,function(e){return o("swiper-slide",[o("div",{staticClass:"current-piano-roll"},[o("svg",{style:{height:"90%",padding:t.timelineConfig.dotSize/2+"px 0"}},[o("defs",[o("filter",{attrs:{id:"glowing",height:"400%",width:"130%",x:"-10%",y:"-130%"}},[o("feMorphology",{attrs:{operator:"dilate",radius:"1",in:"SourceAlpha",result:"thicken"}}),o("feGaussianBlur",{attrs:{in:"thicken",stdDeviation:"2",result:"blurred"}}),o("feFlood",{attrs:{"flood-color":"rgb(200,200,255)",result:"glowColor"}}),o("feComposite",{attrs:{in:"glowColor",in2:"blurred",operator:"in",result:"softGlow_colored"}}),o("feMerge",[o("feMergeNode",{attrs:{in:"softGlow_colored"}}),o("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)]),t._l(t.recordPart,function(n,i){return t.activePartIndex===t.PARTNUM-e?o("rect",{attrs:{x:2,y:100*n.time/20-.2+"%",width:t.mapNoteMidiToLength(n.note),height:"3",rx:"2",ry:"2",fill:t.mapNoteTimeToColor(n.time),filter:"url(#glowing)"},on:{click:function(e){return t.removeNoteInRecordPart(i)}}}):t._e()}),t._l(t.recordParts[t.PARTNUM-e],function(n,i){return o("rect",{attrs:{x:2,y:100*n.time/20-.2+"%",width:t.mapNoteMidiToLength(n.note),height:"3",rx:"2",ry:"2",fill:t.activePartIndex===t.PARTNUM-e?t.mapNoteTimeToColor(n.time):"rgb(120,120,120)",filter:t.activePartIndex===t.PARTNUM-e?"url(#glowing)":""},on:{click:function(o){return t.removeNoteInRecordPart(i,t.PARTNUM-e)}}})})],2),o("div",{staticClass:"temp",on:{click:function(o){return t.clearRecordPart(t.PARTNUM-e)}}})])])}),o("swiper-slide"),o("swiper-slide")],2)],1),o("div",{staticClass:"g-controller"},[o("div",{staticClass:"rotate",class:[4===t.tutorSession?"tutorial-highlight":""],attrs:{id:"menuicon"},on:{touchstart:function(e){t.menuAppear=!0}}}),t.fuckReady?o("vue-slider",t._b({ref:"timeline",class:[2===t.tutorSession?"tutorial-highlight":""],attrs:{show:"portrait"===t.screenOrientation},on:{callback:t.adjustTimeline},model:{value:t.vuetimeline,callback:function(e){t.vuetimeline=e},expression:"vuetimeline"}},"vue-slider",t.timelineConfig,!1)):t._e(),o("div",{staticClass:"btnContainer",class:[3===t.tutorSession?"tutorial-highlight":""]},[o("div",{class:[t.playing?"pauseBtn":"playBtn","rotate"],on:{click:t.toggleReplay}})])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.bouncing,expression:"bouncing"}],staticClass:"mask"},[o("p",[t._v("存储中...")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.tutorSession>0,expression:"tutorSession>0"}],staticClass:"hint-mask",attrs:{id:"tutorial-mask"},on:{touchend:t.tutorProgress}},[o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tutorSession,expression:"tutorSession===2"}],staticClass:"hint-text",attrs:{id:"timeline-hint"}},[o("h3",[t._v("进度条")]),o("p",[t._v("拖动原点改变时间")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:3===t.tutorSession,expression:"tutorSession===3"}],staticClass:"hint-text",attrs:{id:"play-hint"}},[o("h3",[t._v("功能按钮")]),o("p",[t._v("点击播放/暂停")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:4===t.tutorSession,expression:"tutorSession===4"}],staticClass:"hint-text",attrs:{id:"longpress-hint"}},[o("h3",[t._v("功能按钮")]),o("p",[t._v("点击后点击：保存/取消")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:5===t.tutorSession,expression:"tutorSession===5"}],staticClass:"hint-text",attrs:{id:"swipe-hint"}},[o("h3",[t._v("多轨编曲")]),o("p",[t._v("上下滑动切换轨道编曲")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:6===t.tutorSession,expression:"tutorSession===6"}],staticClass:"hint-text",attrs:{id:"clear-hint"}},[o("h3",[t._v("多轨编曲")]),o("p",[t._v("清空轨道")])])]),t.handClass&&"hidehand"!=t.handClass?o("div",{class:[t.tutorClass],attrs:{id:"tutorhand"}},[o("div",{class:[t.handClass]})]):t._e(),o("transition",{attrs:{name:"slide"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.menuAppear,expression:"menuAppear"}],staticClass:"alert-mask",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.menuAppear=!1}}},[o("div",{staticClass:"menu"},[o("div",{on:{touchstart:t.finishProject}},[t._v("完成作品")]),o("div",{on:{touchstart:function(e){t.menuAppear=!1}}},[t._v("退出")])])])]),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.alertAppear,expression:"alertAppear"}],staticClass:"alert-mask"},[o("div",{staticClass:"mb-dialog"},[o("div",{staticClass:"title"},[t._v("超了"+t._s(t.teethNum-18)+"个音符，目前无法做成实体八音盒，是否继续上传")]),o("div",{staticClass:"btns"},[o("span",{staticClass:"btn cancel",on:{click:t.adjustWork}},[t._v("再调整")]),o("span",{staticClass:"btn confirm",on:{click:t.bounceAnyway}},[t._v("任性上传")])])])])])],1)},qt=[],Kt=(o("dfa4"),o("6f79")),zt=o.n(Kt),Yt=o("8cc4"),Jt={},Qt=new Yt.Sampler({C4:"C4.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",A4:"A4.[mp3|ogg]",C5:"C5.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A5:"A5.[mp3|ogg]",C6:"C6.[mp3|ogg]"},{release:1,baseUrl:"//cnbj1.fds.api.xiaomi.com/mbox/audio/"}).toMaster(),Xt=(document.documentElement.getBoundingClientRect().width,Math.max(document.documentElement.clientHeight,window.innerHeight||0),[]),Vt=[],Zt=0,$t=!0,te=0,ee=0,oe=.1,ne=!1,ie=[],ae={components:{swiper:et["swiper"],swiperSlide:et["swiperSlide"],vueSlider:zt.a},props:["screenOrientation"],data:function(){return{portraitMode:!0,activeNote:{},recordPart:[],recordParts:[],playing:!1,generalControllerShow:!1,activeSwiperIndex:3,lastActiveSwiperIndex:2,vuetimeline:0,showExtendBtns:!1,alertAppear:!1,bouncing:!1,tutorSession:0,handClass:"",tutorClass:"",menuAppear:!1,fuckReady:!1,teethNum:18,timelineConfig:{value:0,width:8,padding:"0",dotSize:20,eventType:"auto",min:0,max:2e3,interval:1,disabled:!1,show:!0,tooltip:"always",piecewise:!1,reverse:!0,style:{display:"inline-block"},class:"star-slider",direction:"vertical",speed:oe,bgStyle:{backgroundColor:"rgb(110,113,158)",boxShadow:"inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)"},tooltipDir:"left",tooltipStyle:{backgroundColor:"rgb(69, 106, 255)",borderColor:"rgb(69, 106, 255)",transform:"rotate(90deg)",transformOrigin:"right",position:"relative",left:"-.2rem",top:"0.9rem"},formatter:function(t){return t?"".concat((t/100).toFixed(2),"s/20s"):"0.0s/20s"},processStyle:{backgroundColor:"rgb(69,106,255)"}}}},watch:{playing:function(t){var e=this;console.log("playing status",t),t?xt=setInterval(function(){e.vuetimeline+=10,e.vuetimeline>=2e3&&(e.toggleReplay(),e.vuetimeline=0)},1e3*oe):clearInterval(xt)},screenOrientation:function(){var t=this;console.log("update"),this.$nextTick(function(){return t.$refs.timeline.refresh()})}},computed:{swiper:function(){return this.$refs.pianoRoll.swiper},activePartIndex:function(){return this.PARTNUM-this.activeSwiperIndex-1},lastActivePartIndex:function(){return this.PARTNUM-this.lastActiveSwiperIndex-1}},methods:{load:function(){},toggleReplay:function(){console.log(1),this.playing=!this.playing,this.playing?(this.$ga.event("KeyMaker","Play","start"),this.vuetimeline>=2e3&&(this.vuetimeline=0),te=performance.now()-10*this.vuetimeline,console.log("播放开始"),this.confirmRecordPart(0),console.log("kokokoko"),Zt=performance.now(),console.log("activeOffsetTime".concat(10*this.vuetimeline)),Yt.Transport.start("+0.01",10*this.vuetimeline/1e3)):(this.$ga.event("KeyMaker","Play","stop"),console.log("播放停了"),Yt.Transport.stop(0))},handleNoteStart:function(t){var e=0;Qt.triggerAttack(t),this.$set(this.activeNote,t,1),this.playing?e=performance.now()-te:($t&&(Zt=performance.now(),ee=10*this.vuetimeline,$t=!1),e=performance.now()-Zt+ee,this.toggleReplay()),e<2e4?(this.vuetimeline=10*e/100,this.recordPart.push({note:t,time:+(e/1e3).toFixed(4)})):(this.vuetimeline=2e3,console.log("cannot record more than 20 seconds")),console.log(e)},handleNoteEnd:function(t){Qt.triggerRelease(t),this.$set(this.activeNote,t,0)},touchNoteStartHandler:function(t){console.log(t.target.id),Jt[t.changedTouches[0].identifier]=t.target.id,this.handleNoteStart(t.target.id)},touchNoteEndHandler:function(t){console.log(t.target.id),this.handleNoteEnd(t.target.id),this.handleNoteEnd(Jt[t.changedTouches[0].identifier])},confirmRecordPart:function(t){if(this.recordPart.length){if(console.log("processing track: ",this.lastActivePartIndex),this.recordParts[this.lastActivePartIndex]&&this.recordParts[this.lastActivePartIndex].length&&(this.recordPart=this.recordPart.concat(this.recordParts[this.lastActivePartIndex])),Xt[this.lastActivePartIndex])try{Xt[this.lastActivePartIndex].dispose()}catch(e){}Xt[this.lastActivePartIndex]=new Yt.Part(function(t,e){Qt.triggerAttackRelease(e.note,"4n",t)},this.recordPart).start(0),this.recordParts[this.lastActivePartIndex]=this.recordPart,this.recordPart=[]}else console.log("啥也没录");this.lastActiveSwiperIndex=this.activeSwiperIndex,t&&(this.vuetimeline=0,Zt=0),$t=!0},clearRecordPart:function(t){if(this.$ga.event("KeyMaker","Track","clearAll",t),console.log("cleaning track ".concat(t)),this.activePartIndex===t&&(this.recordPart=[],this.vuetimeline=0,$t=!0,this.playing=!1,Yt.Transport.stop(0)),this.recordParts[t]&&this.recordParts[t].length){if(this.$set(this.recordParts,t,[]),Xt[t]){try{Xt[t].dispose()}catch(e){}Xt[t]=void 0}}else console.log("track ".concat(t," has no content"))},checkBouncibility:function(){return this.confirmRecordPart(0),Vt=[],Xt.length?(Xt.forEach(function(t){t&&t._events.length&&t._events[0].value&&t._events.forEach(function(t){Vt.push(t.value)})}),Vt.sort(function(t,e){return 0+t.time-e.time}),wt(Vt)):0},finishProject:function(){this.tutorSession>0||(this.$ga.event("KeyMaker","Finish","tap"),this.teethNum=this.checkBouncibility(),this.teethNum<=18?this.bounceProject():(this.$ga.event("KeyMaker","Finish","overLimit"),this.alertAppear=!0))},bounceProject:function(){var t=this;this.confirmRecordPart(0),console.log(this),console.log(Xt),Vt=[],Xt.length?(Xt.forEach(function(t){t&&t._events.length&&t._events[0].value&&t._events.forEach(function(t){Vt.push(t.value)})}),Vt.sort(function(t,e){return 0+t.time-e.time}),this.bouncing=!0,this.$store.dispatch("BOUNCE_PROJECT",{record:Vt,info:{title:"尚未起名",content:"",cover:""}}).then(function(e){console.log("successfully bounced"),t.bouncing=!1,t.$toast("作品已为您存储"),t.$router.push({path:"/new-music-box-viewer",query:{id:e}})}).catch(function(e){t.bouncing=!1,t.$toast("非常抱歉，上传作品失败了")})):this.$toast("什么都没录呢")},mapNoteTimeToColor:function(t){return At(t)},mapNoteMidiToLength:function(t){return kt(t)},adjustTimeline:function(t){this.playing?(console.log("ccccccccc"),this.toggleReplay()):$t=!0},onMiniKeyboardScroll:function(t){console.log(t.touches[0].clientY)},onMiniKeyboardStart:function(t){console.log(t)},removeNoteInRecordPart:function(t,e){this.$ga.event("KeyMaker","Track","clearNote",e||0),void 0===e?this.recordPart.splice(t,1):(this.recordParts[e].splice(t,1),Xt[e].dispose(),Xt[e]=new Yt.Part(function(t,e){Qt.triggerAttackRelease(e.note,"4n",t)},this.recordParts[e]).start(0))},keng:function(t){console.log(t);for(var e=0;e<=t.changedTouches.length-1;e++){var o=document.elementFromPoint(t.changedTouches[e].clientX,t.changedTouches[e].clientY);o&&o.classList&&(o.classList.contains("white")||o.classList.contains("black"))?Jt[t.changedTouches[e].identifier]&&Jt[t.changedTouches[e].identifier]!=o.getAttribute("id")?(console.log(Jt),this.handleNoteStart(o.getAttribute("id")),this.handleNoteEnd(Jt[t.changedTouches[e].identifier]),Jt[t.changedTouches[e].identifier]=o.getAttribute("id")):Jt[t.changedTouches[e].identifier]?console.log(3):(console.log(2),this.handleNoteStart(o.getAttribute("id")),Jt[t.changedTouches[e].identifier]=o.getAttribute("id")):(console.log("外边"),Jt[t.changedTouches[e].identifier]&&this.handleNoteEnd(Jt[t.changedTouches[e].identifier]),Jt[t.changedTouches[e].identifier]=void 0)}},adjustWork:function(){this.$ga.event("KeyMaker","OverLimit","adjust"),this.alertAppear=!1},bounceAnyway:function(){this.$ga.event("KeyMaker","OverLimit","bounce"),this.bounceProject()},tutorStart:function(){this.tutorSession=1,this.$toast("请锁住竖屏使用"),ne=setTimeout(this.tutorProgress,3e3)},tutorProgress:function(){var t=this;switch(clearTimeout(ne),console.log("??????????"),this.tutorSession+=1,console.log(this.tutorSession),this.tutorSession){case 1:this.clearTutorTimeout(),this.$toast("请锁住竖屏使用,长按播放按钮保存作品");break;case 2:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor2start",ie.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor2end"},500)),ie.push(setTimeout(function(){t.vuetimeline=700,t.handClass="hand"},1500)),ie.push(setTimeout(function(){t.vuetimeline=0,t.handClass="hidehand"},2500));break;case 3:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor3start",ie.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor3end"},500)),ie.push(setTimeout(function(){t.handClass="hand",t.tutorClass="tutor3end"},800)),ie.push(setTimeout(function(){t.handClass="hidehand"},1e3));break;case 4:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor4start",ie.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor4end"},500)),ie.push(setTimeout(function(){t.handClass="hand",t.tutorClass="tutor4start",t.menuAppear=!0},1500)),ie.push(setTimeout(function(){t.handClass="hidehand"},2500)),ie.push(setTimeout(function(){t.menuAppear=!1},3e3));break;case 5:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor5start",ie.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor5end"},1200)),ie.push(setTimeout(function(){t.swiper.slidePrev()},1500)),ie.push(setTimeout(function(){t.swiper.slideNext(),t.handClass="hidehand"},2500));break;case 6:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor6start",ie.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor6end"},500)),ie.push(setTimeout(function(){t.handClass="hand",t.tutorClass="tutor6end"},800)),ie.push(setTimeout(function(){t.handClass="hidehand"},1500));break;default:this.tutorSession=0;break}},clearTutorTimeout:function(){this.showExtendBtns=!1,ie.forEach(function(t){return clearTimeout(t)}),ie=[]}},created:function(){var t=this;setTimeout(function(){t.timelineConfig.height="".concat(.9*(window.innerHeight-50),"px"),t.fuckReady=!0},100),Yt.Transport.cancel(),Xt=[],Vt=[];var e=document.documentElement;window.rem=e.getBoundingClientRect().width/10,e.style.fontSize="".concat(window.rem,"px"),this.PARTNUM=3,this.pianoRollSwiperOption={initialSlide:this.PARTNUM,slidesPerView:3,on:{transitionEnd:function(e){console.log("3",this.activeIndex),t.activeSwiperIndex=this.activeIndex,t.$ga.event("KeyMaker","Track","change",this.activeIndex),t.confirmRecordPart(!$t)}}};var o=/micromessenger/.test(navigator.userAgent.toLowerCase());o&&(Rt().then(function(){Wt({title:"哎八音-键盘编辑器",desc:"寻找你自己的八音盒",fullPath:"".concat(location.origin).concat(location.pathname,"#/new-music-box-maker"),imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(t){t.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/new-music-box-maker")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),console.log("get user info success",t.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/new-music-box-maker")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/new-music-box-maker")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")))},beforeRouteLeave:function(t,e,o){bt(Xt),o()},mounted:function(){v["get"]("serviceToken")||this.tutorStart()},updated:function(){}},se=ae,re=(o("1e52"),Object(G["a"])(se,Gt,qt,!1,null,"84d37c82",null)),ce=re.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["container",t.loading?"loading":""]},[n("div",{attrs:{id:"broadcast"},on:{click:t.redirectToAccount}},[n("p",[t._v("母亲节活动进行中! 创作作品收藏数前三名可免费赢得该曲定制八音盒，更多信息请关注公众号「哎八音」")])]),n("div",{attrs:{id:"ground"}}),t._m(0),n("div",{attrs:{id:"mb"},on:{click:t.togglePlay}},[n("div",{class:["mb-part",t.playing?"playing":""],attrs:{id:"mb-lid"}}),n("div",{staticClass:"mb-part",attrs:{id:"mb-body"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],attrs:{id:"play-btn"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],attrs:{id:"pause-btn"}})]),n("div",{class:[t.playing?"":"not-playing"],attrs:{id:"mb-shiner"}})]),t.handAppear?n("img",{attrs:{id:"hand",src:o("36b9")}}):t._e(),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],attrs:{id:"music-aurora"}})]),n("div",{attrs:{id:"low-leaf1"}}),n("div",{attrs:{id:"low-leaf2"}}),n("div",{attrs:{id:"low-leaf3"}}),n("div",{attrs:{id:"low-leaf4"}}),n("div",{attrs:{id:"mid-leaf1"}}),n("div",{attrs:{id:"mid-leaf2"}}),n("div",{attrs:{id:"mid-leaf3"}}),n("div",{attrs:{id:"mid-leaf4"}}),n("div",{attrs:{id:"top-leaf1"}}),n("div",{attrs:{id:"top-leaf2"}}),n("div",{attrs:{id:"top-leaf3"}}),n("div",{attrs:{id:"top-leaf4"}}),n("div",{attrs:{id:"top-leaf5"}}),n("div",{attrs:{id:"top-leaf6"}}),n("transition",{attrs:{name:"bounce"}},[t.workIntroAppear?n("div",{attrs:{id:"work-intro"}},[n("div",{staticClass:"title",on:{click:function(e){t.userId===t.projectInfo.userId?t.workUpdateAppear=!0:t.workUpdateAppear=!1}}},[t._v(t._s(t.finalNewWorkTitle||t.projectInfo.title))]),n("div",{staticClass:"subtitle"},[n("span",[t._v("by")]),n("span",{on:{click:function(e){return t.redirectToMusixiser(t.projectInfo.userVO.userId)}}},[n("img",{attrs:{src:t.projectInfo.userVO&&t.projectInfo.userVO.smallAvatar,alt:""}})]),n("span",[t._v(t._s(t.projectInfo.userVO&&t.projectInfo.userVO.realname))])]),n("div",{ref:"outsider",staticClass:"work-body-desc"},[n("p",{ref:"insider",style:t.marqueeStyle},[t._v(t._s(t.finalNewMessage||t.projectInfo.content))])]),t.userId===t.projectInfo.userId?n("div",{attrs:{id:"edit-work"},on:{click:t.editWork}}):t._e()]):t._e()]),n("transition",{attrs:{name:"bounce"}},[t.controlPanalAppear?n("div",{attrs:{id:"control-panal"}},[n("count-button",{staticStyle:{top:".05rem"},attrs:{initCount:t.projectInfo.collectNum?t.projectInfo.collectNum:0,initActive:!!t.projectInfo.favStatus,iconImg:"",onClickCall:t.toggleFav}}),n("div",{staticClass:"download-info"},[n("div",{staticClass:"likes",on:{click:function(e){return t.downloadWork(t.projectInfo)}}},[t.projectInfo.wavAccess?t._e():n("img",{attrs:{src:o("4fa5"),alt:""}}),t.projectInfo.wavAccess?n("img",{attrs:{src:o("186c"),alt:""}}):t._e()])]),n("div",{staticClass:"button_group"},[t.userId!==t.projectInfo.userId?n("button",{on:{click:t.redirectToMaker}},[t._v("我来试试")]):t._e(),t.userId===t.projectInfo.userId?n("button",{on:{click:t.guideShare}},[t._v("分享")]):t._e(),n("button",{class:[(t.projectInfo.machineNum,"")],on:{click:t.purchaseItem}},[t._v("制成礼物")])])],1):t._e()]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.workUpdateAppear,expression:"workUpdateAppear"}],attrs:{id:"work-update-mask"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.workUpdateAppear=!1}}},[n("div",{staticClass:"mb-dialog"},[n("div",{staticClass:"dialog-sector"},[n("div",{staticClass:"title"},[t._v("配图")]),n("img",{staticClass:"work-cover",attrs:{src:t.newCover||"https://cdn.cnbj1.fds.api.mi-img.com/mbox/img/default-s-bg.jpg",alt:""},on:{click:t.uploadPic}})]),n("div",{staticClass:"splitter"}),n("div",{staticClass:"dialog-sector"},[n("div",{staticClass:"title"},[t._v("曲名")]),n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkTitle,expression:"newWorkTitle"}],attrs:{type:"text",placeholder:"曲名"},domProps:{value:t.newWorkTitle},on:{blur:t.positionWindow,input:function(e){e.target.composing||(t.newWorkTitle=e.target.value)}}})])]),n("div",{staticClass:"splitter"}),n("div",{staticClass:"dialog-sector"},[n("div",{staticClass:"title"},[t._v("留言")]),n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage,expression:"newMessage"}],attrs:{type:"text",placeholder:"参加活动请以「#母亲节」开头"},domProps:{value:t.newMessage},on:{blur:t.positionWindow,input:function(e){e.target.composing||(t.newMessage=e.target.value)}}})])]),n("div",{staticClass:"splitter"})]),n("div",{staticClass:"confirm-btn",on:{click:t.updateWork}},[t._v("保存")])])]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.composeAppear,expression:"composeAppear"}],attrs:{id:"compose-mask"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.composeAppear=!1}}},[n("div",{attrs:{id:"compose-pick-container"}},[n("p",[t._v("编曲模式")]),n("div",{staticClass:"main"},[n("img",{attrs:{src:o("bd1e")},on:{click:t.toKeyMaker}}),n("img",{attrs:{src:o("43e5")},on:{click:t.toSeqMaker}})])])])])],1)},ue=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"spirit"}},[o("div",{staticClass:"spirit-part",attrs:{id:"spirit-body"}}),o("div",{staticClass:"spirit-part",attrs:{id:"spirit-front-leaf"}}),o("div",{staticClass:"spirit-part",attrs:{id:"spirit-back-leaf"}}),o("div",{staticClass:"spirit-part",attrs:{id:"spirit-back1"}}),o("div",{staticClass:"spirit-part",attrs:{id:"spirit-back2"}})])}],de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btnContainer",on:{click:t.updateButton}},[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.currentActive,expression:"currentActive"}],staticClass:"active-btn-background"})]),n("transition",{attrs:{name:"slideDown"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.currentActive,expression:"currentActive"}],staticClass:"btn active"},[n("img",{staticClass:"heart",attrs:{src:o("4454")}}),n("p",[t._v(t._s(t.currentActiveCount))])])]),n("transition",{attrs:{name:"slideUp"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.currentActive,expression:"!currentActive"}],staticClass:"btn inactive"},[n("img",{staticClass:"heart",attrs:{src:o("12c2")}}),n("p",[t._v(t._s(t.currentActiveCount-1))])])])],1)},pe=[],he={props:{initCount:Number,initActive:Boolean,iconImg:String,onClickCall:{type:Function,default:function(){return function(){console.log("tap tap in count Button")}}}},computed:{style:function(){}},data:function(){return{currentActiveCount:0,currentActive:!1}},watch:{},created:function(){this.currentActive=this.initActive,this.currentActiveCount=this.currentActive?this.initCount:this.initCount+1},mounted:function(){},updated:function(){},methods:{updateButton:function(){this.currentActive=!this.currentActive,this.onClickCall()}}},fe=he,ve=(o("d2b4"),Object(G["a"])(fe,de,pe,!1,null,"0974668e",null)),ge=ve.exports,me=40,we={mixins:[jt],components:{CountButton:ge},data:function(){return{loading:!0,workIntroAppear:!1,controlPanalAppear:!1,workUpdateAppear:!1,handAppear:!1,composeAppear:!1,playing:!1,userId:0,favStatus:!1,newWorkTitle:"",newMessage:"",newCover:"",finalNewWorkTitle:"",finalNewMessage:"",marqueeStyle:""}},computed:{project:function(){return this.$store.state.recordProject},projectInfo:function(){return this.$store.state.recordProjectInfo}},methods:{load:function(){},loadMusicById:function(){var t=this;console.log("hehe",this.$store.state);var e=this.$store.state.route.query.id;e&&(console.log("mmm",e),this.$store.dispatch("FETCH_MBOX",{id:e}).then(function(){console.log("workPart",t.project),console.log("work info",t.projectInfo),t.userId===t.projectInfo.userId&&(t.workUpdateAppear=!0),t.favStatus=t.projectInfo.favStatus,t.newWorkTitle="尚未起名"===t.projectInfo.title?"":t.projectInfo.title,t.newMessage=t.projectInfo.content,t.newCover=t.projectInfo.cover,document.title=t.projectInfo.title;var e="".concat(location.origin).concat(location.pathname,"#/new-music-box-viewer?id=").concat(t.$store.state.route.query.id);Rt().then(function(){Wt({title:"".concat(t.projectInfo.userVO.realname,"给妈妈做了个八音盒-").concat(t.projectInfo.title),desc:"3分钟会创作,你也可以喔～",fullPath:e,imgUrl:t.projectInfo.cover||"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})})}))},togglePlay:function(){this.handAppear=!1,this.playing?this.$ga.event("Song","stop_20s","".concat(this.projectInfo.id)):this.$ga.event("Song","play_20s","".concat(this.projectInfo.id)),yt(this.project,!this.playing),this.playing=!this.playing},toggleFav:function(){this.favStatus||this.$ga.event("Song","fav","".concat(this.projectInfo.id)),this.favStatus=+!this.favStatus,x({workId:this.$store.state.route.query.id,status:this.favStatus}).then(function(){}).catch(function(t){})},uploadPic:function(){var t=this;Dt(function(e){t.$loading.close(),t.newCover=e},function(){t.$loading.close(),t.$toast("上传失败")},function(){t.$loading("正在上传图片")})},updateWork:function(){var t=this;this.newWorkTitle?this.newWorkTitle.length>30?this.$toast("作品名称过长"):this.newMessage&&this.newMessage.length>30?this.$toast("作品留言过长"):O({id:this.$store.state.route.query.id,title:this.newWorkTitle,cover:this.newCover,content:this.newMessage||"#母亲节"}).then(function(){t.$toast("作品更新成功"),t.workUpdateAppear=!1,t.finalNewWorkTitle=t.newWorkTitle,t.finalNewMessage=t.newMessage,t.$nextTick(function(){if(this.marqueeStyle="",this.$refs.insider&&this.$refs.outsider&&this.$refs.insider.offsetWidth>this.$refs.outsider.offsetWidth){var t=this.$refs.insider.offsetWidth/me+"s;";this.marqueeStyle+="-webkit-animation:marquee linear infinite;-o-animation:marquee linear infinite;animation:  marquee linear infinite;-webkit-animation-duration:"+t+"-o-animation-duration:"+t+"animation-duration:"+t+";"}else this.marqueeStyle+=""}),document.title=t.finalNewWorkTitle;var e="".concat(location.origin).concat(location.pathname,"#/new-music-box-viewer?id=").concat(t.$store.state.route.query.id);Wt({title:"".concat(t.projectInfo.userVO.realname,"给妈妈做了个八音盒-").concat(t.newWorkTitle),desc:"3分钟会创作,你也可以喔～",fullPath:e,imgUrl:t.newCover||"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})},function(){t.$toast("作品更新失败")}).catch(function(){t.$toast("作品更新失败")}):this.$toast("作品名称不能为空")},redirectToAccount:function(){},redirectToMaker:function(){this.toKeyMaker()},toKeyMaker:function(){this.$ga.event("Work","create","byKeyboard"),this.$router.push({path:"/newbie-maker"})},toSeqMaker:function(){this.$ga.event("Work","create","bySeq"),this.$router.push({path:"/new-music-box-roll"})},guideShare:function(){this.$ga.event("MyWork","DetailShare"),this.$toast("作品取名后，点击右上角分享哦～")},redirectToMusixiser:function(t){t&&this.$router.push({path:"/musixiser",query:{id:t}})},editWork:function(){this.$ga.event("MyWork","DetailEdit"),this.workUpdateAppear=!0},positionWindow:function(){window.scroll(0,0)},purchaseItem:function(){this.$ga.event("MakeMB","tap","".concat(this.projectInfo.id)),this.$toast("该功能近期开放,敬请期待~")}},beforeRouteLeave:function(t,e,o){bt(),o()},created:function(){var t=this,e=document.documentElement;window.rem=e.getBoundingClientRect().width/10,e.style.fontSize="".concat(window.rem,"px");var o=/micromessenger/.test(navigator.userAgent.toLowerCase());if(o){var n="".concat(location.origin).concat(location.pathname,"#/new-music-box-viewer?id=").concat(t.$store.state.route.query.id);ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(e){e.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(n),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),t.userId=e.data.data.userId,t.uesrId==t.projectInfo.userId&&t.$ga.event("MyWork","DetailCheck"),t.loadMusicById(),console.log("get user info success",e.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(n),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(n),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}else t.loadMusicById()},mounted:function(){var t=this;setTimeout(function(){t.loading=!1},2e3),setTimeout(function(){t.workIntroAppear=!0,t.$nextTick(function(){if(this.marqueeStyle="",this.$refs.insider&&this.$refs.outsider&&this.$refs.insider.offsetWidth>this.$refs.outsider.offsetWidth){var t=this.$refs.insider.offsetWidth/me+"s;";this.marqueeStyle+="-webkit-animation:marquee linear infinite;-o-animation:marquee linear infinite;animation:  marquee linear infinite;-webkit-animation-duration:"+t+"-o-animation-duration:"+t+"animation-duration:"+t+";"}else this.marqueeStyle+=""})},4500),setTimeout(function(){t.controlPanalAppear=!0,t.handAppear=!0},5500)},updated:function(){}},Ae=we,ke=(o("cbba"),Object(G["a"])(Ae,le,ue,!1,null,"dafe9a76",null)),be=ke.exports,ye=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"roll",style:{width:t.controlWidth+"px"}},[o("div",{staticStyle:{position:"absolute",height:"20px","background-color":"rgba(0,0,0,.5)",color:"white","z-index":"10",display:"flex","justify-content":"space-around","font-size":"10px"},style:{width:t.configKonva.width+"px"}},t._l(t.NOTE_CATEGORY,function(e){return o("span",{key:e,staticClass:"rotate",staticStyle:{position:"relative",width:"10px","transform-origin":"0% 0%",left:"10px"}},[t._v(t._s(t._f("toNote")(t.scales[t.keyboardMode].initKey+t.scales[t.keyboardMode].musicScale[e-1])))])}),0),o("v-stage",{attrs:{config:t.configKonva}},[o("v-layer",[t._l(t.NOTE_CATEGORY,function(e){return[t._l(t.ONE_PAGE_NOTE_NUM,function(n){return[o("v-rect",{key:"i"+e+"j"+n,attrs:{config:t.rectConfigArray[e-1][n-1]},on:{touchstart:function(o){return t.handleTouchRect(e-1,n-1,t.sector)},touchmove:function(o){return t.handleMoveRect(e-1,n-1,t.sector)}}}),(n+(t.sector-2)*t.CONST_NOTE_NUM_PER_SECTOR+1*t.NOTE_NUM_PER_SECTOR)%t.beat===1?o("v-rect",{key:"borderi"+e+"j"+n,attrs:{config:t.setupBeat(e-1,n-1,t.sector)},on:{touchstart:function(o){return t.handleTouchRect(e-1,n-1,t.sector)},touchmove:function(o){return t.handleMoveRect(e-1,n-1,t.sector)}}}):t._e()]})]})],2)],1)],1),o("div",{staticClass:"control-panal"},[o("div",{staticStyle:{height:"6rem",display:"flex","flex-direction":"column"}},[o("div",{staticClass:"rotate",attrs:{id:"menuicon"},on:{touchstart:function(e){t.menuAppear=!0}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticClass:"rotate",attrs:{id:"scrolltop"},on:{touchstart:t.scrollToBegin}}),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticClass:"rotate",attrs:{id:"scrollup"},on:{touchstart:t.scrollup}}),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticClass:"rotate",attrs:{id:"scrolldown"},on:{touchstart:t.scrolldown}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],staticClass:"rotate",attrs:{id:t.fullloop?"fullloop":"partloop"},on:{touchstart:t.updateLoop}})]),o("div",[o("div",{staticClass:"rotate",attrs:{id:"minustempo"},on:{touchstart:t.minusTempo}}),o("div",{attrs:{id:"tempo-indicator"}},[o("div",{style:t.tempoLength,attrs:{id:"tempo-progress"}}),o("p",{attrs:{id:"tempo-num"}},[t._v(t._s(this.tempo)+" bpm")])]),o("div",{staticClass:"rotate",attrs:{id:"addtempo"},on:{touchstart:t.addTempo}})]),o("div",{staticClass:"btnContainer",on:{touchend:function(e){return e.stopPropagation(),e.preventDefault(),t.btnEnd(e)}}},[o("another-pie-progress",{attrs:{radius:30,progress:100*t.currentTime/t.MB_DUR,stroke:4}}),o("div",{class:[t.playing?"pauseBtn":"playBtn","rotate"],on:{click:t.toggleReplay}})],1)]),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.alertAppear,expression:"alertAppear"}],staticClass:"alert-mask"},[o("div",{staticClass:"mb-dialog"},[o("div",{staticClass:"title"},[t._v("超了"+t._s(t.teethNum-18)+"个音符，目前无法做成实体八音盒，是否继续上传")]),o("div",{staticClass:"btns"},[o("span",{staticClass:"btn cancel",on:{click:t.adjustWork}},[t._v("再调整")]),o("span",{staticClass:"btn confirm",on:{click:t.bounceAnyway}},[t._v("任性上传")])])])])]),o("transition",{attrs:{name:"slide"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.menuAppear,expression:"menuAppear"}],staticClass:"alert-mask",on:{touchstart:function(e){if(e.target!==e.currentTarget)return null;t.menuAppear=!1}}},[o("div",{staticClass:"menu"},[o("div",{class:["menu-op",8===t.beat?"":"inactive"],on:{touchstart:function(e){return t.updateBeat(8)}}},[t._v("4拍")]),o("div",{class:["menu-op",6===t.beat?"":"inactive"],on:{touchstart:function(e){return t.updateBeat(6)}}},[t._v("3拍")]),o("div",{class:["menu-op","whitekey"==t.keyboardMode?"":"inactive"],on:{touchstart:function(e){return t.chooseKeyboard("whitekey")}}},[o("div",{staticClass:"rotate",attrs:{id:"whitekey"}}),t._v("简单音符\n        ")]),o("div",{class:["menu-op","fullkey"==t.keyboardMode?"":"inactive"],on:{touchstart:function(e){return t.chooseKeyboard("fullkey")}}},[o("div",{staticClass:"rotate",attrs:{id:"fullkey"}}),t._v("复杂音符\n        ")]),o("div",{on:{touchstart:t.clearNotes}},[t._v("清空作品")]),o("div",{on:{touchstart:t.submitProject}},[t._v("完成作品")]),o("div",{on:{touchstart:function(e){t.menuAppear=!1}}},[t._v("退出")])])])]),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.alertAppear2,expression:"alertAppear2"}],staticClass:"alert-mask"},[o("div",{staticClass:"mb-dialog"},[o("div",{staticClass:"title"},[t._v("转换键盘将清空现有作品")]),o("div",{staticClass:"btns"},[o("span",{staticClass:"btn cancel",on:{click:function(e){t.alertAppear2=!1}}},[t._v("取消")]),o("span",{staticClass:"btn confirm",on:{click:t.updateKeyboard}},[t._v("转换键盘")])])])])])],1)},Ce=[],Te=o("7618"),xe=(o("6c7b"),{tempo:160,rectArray:[[0,0,1],[1,0,0],[0,0,0],[0,0,0],[1,1,1],[1,1,0],[0,1],[1],[1],[1],[0],[0],[0],[0],[1],[0],[0,0,0],[0,0,0]],keyboardMode:"whitekey"}),Oe={whitekey:{musicScale:[0,2,4,5,7,9,11,12,14,16,17,19,21,23,24,26,28,29],initKey:60,img:""},fullkey:{musicScale:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],initKey:60,img:""}},Ee=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"pie-wrapper pie-wrapper--solid"},[o("div",{staticClass:"before",style:{background:t.progress<=50?"#25252b":"#979797",transform:t.progress<=50?"rotate("+(100-t.progress)/100*-360+"deg)":"rotate("+(t.progress-50)/100*360+"deg)"}})])])},Se=[],Pe={props:{progress:Number},computed:{style:function(){}},data:function(){return{}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{updateButton:function(){}}},Ie=Pe,Re=(o("d216"),Object(G["a"])(Ie,Ee,Se,!1,null,"f49f988e",null)),We=Re.exports,Ne=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("svg",{attrs:{height:2*t.radius,width:2*t.radius}},[o("circle",{style:{strokeDashoffset:t.strokeDashoffset},attrs:{stroke:"#456aff","stroke-dasharray":t.circumference+" "+t.circumference,"stroke-width":t.stroke,fill:"transparent",r:t.normalizedRadius,cx:t.radius,cy:t.radius}})])},Be=[],Me={props:{radius:Number,progress:Number,stroke:Number},data:function(){var t=this.radius-2*this.stroke,e=2*t*Math.PI;return{normalizedRadius:t,circumference:e}},computed:{strokeDashoffset:function(){return this.circumference-this.progress/100*this.circumference}}},_e=Me,De=Object(G["a"])(_e,Ne,Be,!1,null,null,null),je=De.exports,Ue=o("7591"),Le=o.n(Ue);i["default"].use(Le.a),window.Tone=o("8cc4");var Fe=-1,He=-1;window.cursorSchedules=[];var Ge,qe=void 0,Ke=.25,ze=120,Ye=10,Je=20,Qe=60,Xe=180,Ve=12,Ze="whitekey",$e=new Tone.Sampler({C4:"C4.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",A4:"A4.[mp3|ogg]",C5:"C5.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A5:"A5.[mp3|ogg]",C6:"C6.[mp3|ogg]"},{release:1,baseUrl:"//cnbj1.fds.api.xiaomi.com/mbox/audio/"}).toMaster(),to={components:{pieProgress:We,anotherPieProgress:je},data:function(){return{scales:Oe,NOTE_CATEGORY:Oe[Ze].musicScale.length,ONE_PAGE_NOTE_NUM:20,NOTE_NUM_PER_SECTOR:Ye,CONST_NOTE_NUM_PER_SECTOR:Ye,MB_DUR:Je,tempo:120,controlWidth:0,configKonva:{width:0,height:0},borderConfig:{},halfConfig:{},noteRectConfig:{},activeJ:-1,sector:1,rectArray:Array(Oe[Ze].musicScale.length).fill(1).map(function(t){return[]}),alertAppear:!1,alertAppear2:!1,menuAppear:!1,showExtendBtns:!1,playing:!1,fullloop:!0,beat:8,keyboardMode:Ze,currentTime:0,teethNum:18}},filters:{intTime:function(t){return Math.floor(t)%20},toNote:function(t){return Tone.Frequency(t,"midi").toNote()}},computed:{tempoLength:function(){var t=100/(Xe-Qe),e=-Qe*t;return{height:"".concat(t*this.tempo+e,"%")}},rectConfigArray:function(){for(var t=[],e=Oe[this.keyboardMode].musicScale.length,o="",n=0,i=!0,a=0;a<=e-1;a++){t[a]=[];for(var s=0;s<=this.ONE_PAGE_NOTE_NUM-1;s++)n=s+(this.sector-2)*Ye+1*this.NOTE_NUM_PER_SECTOR,i=n*Ke*120/this.tempo<Je,o=n==this.activeJ&&this.rectArray[a][n]?i?"#6477b1":"#A9B9FF":n!=this.activeJ||this.rectArray[a][n]?this.rectArray[a][n]?i?"#9FB2CF":"#333740":i?"rgba(0,0,0,".concat(.9-.22*a/this.NOTE_CATEGORY,")"):"#131315":i?"#292B3A":"#2B2E3D",t[a][s]=Object(f["a"])({},this.noteRectConfig,{x:a*this.configKonva.width/this.NOTE_CATEGORY,y:s*this.configKonva.height/this.ONE_PAGE_NOTE_NUM,fill:o})}return t}},methods:{setupCanvas:function(){var t=document.documentElement;this.controlWidth=t.getBoundingClientRect().width-50,this.configKonva={width:this.NOTE_CATEGORY<=Ve?this.controlWidth:36*this.NOTE_CATEGORY,height:window.innerHeight},this.RECTWIDTH=this.NOTE_CATEGORY<=Ve?this.controlWidth/this.NOTE_CATEGORY:36,this.RECTHEIGHT=window.innerHeight/this.ONE_PAGE_NOTE_NUM,this.noteRectConfig={perfectDrawEnabled:!1,transformsEnabled:"position",width:this.RECTWIDTH,height:this.RECTHEIGHT,fill:"#fff",stroke:"#000",strokeWidth:.5,dash:[this.RECTWIDTH+this.RECTHEIGHT,this.RECTWIDTH,this.RECTHEIGHT,0]},this.borderConfig={perfectDrawEnabled:!1,transformsEnabled:"position",width:this.RECTWIDTH,height:this.RECTHEIGHT,stroke:"#000",strokeWidth:2,dash:[this.RECTWIDTH,this.RECTWIDTH+2*this.RECTHEIGHT]},this.halfConfig={perfectDrawEnabled:!1,transformsEnabled:"position",width:this.RECTWIDTH,height:this.RECTHEIGHT,stroke:"#333",strokeWidth:2,dash:[this.RECTWIDTH,this.RECTWIDTH+2*this.RECTHEIGHT]},this.scheduleCursor()},scheduleCursor:function(){var t=this,e=Math.ceil(Je/(120*Ke/this.tempo)),o=this.sector;console.log("sdfsdfsdf",o);var n=(this.sector-1)*this.NOTE_NUM_PER_SECTOR,i=n+this.ONE_PAGE_NOTE_NUM<=e?n+this.ONE_PAGE_NOTE_NUM:e;console.log(e),console.log(n,i);for(var a=function(a){t.fullloop&&a<=e-1||!t.fullloop&&a>=n&&a<=i-1?(Tone.Transport.clear(cursorSchedules[a]),cursorSchedules[a]=Tone.Transport.scheduleRepeat(function(n){t.activeJ=a,o%2===1?(console.log("normal"),t.sector=2*Math.floor(t.activeJ/t.ONE_PAGE_NOTE_NUM)+1):(console.log("abnormal"),t.sector=2*Math.floor((t.activeJ-Ye)/t.ONE_PAGE_NOTE_NUM)+2,t.activeJ==e-1&&(o=1)),console.log(t.sector),t.currentTime=a*Ke*120/t.tempo,t.rectArray.forEach(function(e,o){e[a]&&$e.triggerAttackRelease(Tone.Frequency(Oe[t.keyboardMode].initKey+Oe[t.keyboardMode].musicScale[o],"midi"),.25)})},t.fullloop?e*Ke*120/t.tempo:(i-n)*Ke*120/t.tempo,a*Ke*120/t.tempo)):cursorSchedules[a]&&(t.fullloop&&a>e-1||!t.fullloop&&(a<n||a>i-1))&&(Tone.Transport.clear(cursorSchedules[a]),cursorSchedules[a]="")},s=0;s<=ze-1;s++)a(s);console.log(cursorSchedules),console.log(Tone.Transport._scheduledEvents)},setupBeat:function(t,e,o){this.NOTE_NUM_PER_SECTOR;return Object(f["a"])({},this.borderConfig,{x:t*this.configKonva.width/this.NOTE_CATEGORY,y:e*this.configKonva.height/this.ONE_PAGE_NOTE_NUM})},setupHalf:function(t,e,o){return Object(f["a"])({},this.halfConfig,{x:t*this.configKonva.width/this.NOTE_CATEGORY,y:e*this.configKonva.height/this.ONE_PAGE_NOTE_NUM})},setupRect:function(t,e,o){var n="",i=e+(o-2)*Ye+1*this.NOTE_NUM_PER_SECTOR,a=i*Ke*120/this.tempo<Je;return n=i==this.activeJ&&this.rectArray[t][i]?a?"#6477b1":"#A9B9FF":i!=this.activeJ||this.rectArray[t][i]?this.rectArray[t][i]?a?"#9FB2CF":"#333740":a?"rgba(0,0,0,".concat(.9-.22*t/this.NOTE_CATEGORY,")"):"#131315":a?"#292B3A":"#2B2E3D",Object(f["a"])({},this.noteRectConfig,{x:t*this.configKonva.width/this.NOTE_CATEGORY,y:e*this.configKonva.height/this.ONE_PAGE_NOTE_NUM,fill:n})},handleTouchRect:function(t,e,o){$e.triggerAttackRelease(Tone.Frequency(Oe[this.keyboardMode].initKey+Oe[this.keyboardMode].musicScale[t],"midi"),.25);var n=this.rectArray[t].slice(0);n[e+(o-1)*this.NOTE_NUM_PER_SECTOR]=!n[e+(o-1)*this.NOTE_NUM_PER_SECTOR],this.$set(this.rectArray,t,n),Fe=t,He=e,this.saveProjectToLocalStorage()},handleMoveRect:function(t,e,o){var n=e+(o-1)*this.NOTE_NUM_PER_SECTOR,i=He+(o-1)*this.NOTE_NUM_PER_SECTOR;if(e!=He)this.handleTouchRect(t,e,o);else if(t!=Fe&&e==He){$e.triggerAttackRelease(Tone.Frequency(Oe[this.keyboardMode].initKey+Oe[this.keyboardMode].musicScale[t],"midi"),.25);var a=this.rectArray[t].slice(0);a[n]=!a[n],this.$set(this.rectArray,t,a);var s=this.rectArray[Fe].slice(0);s[i]=!s[i],this.$set(this.rectArray,Fe,s),Fe=t,He=e}},startloop:function(){this.$ga.event("RollMaker","Play","start"),this.scheduleCursor(),console.log(this.rectArray),"running"!==Tone.context.state&&Tone.context.resume(),Tone.Transport.start("+0.1",(this.sector-1)*this.NOTE_NUM_PER_SECTOR*Ke*120/this.tempo),this.playing=!0},stoploop:function(){this.$ga.event("RollMaker","Play","stop"),Tone.Transport.stop(),this.playing=!1},toggleReplay:function(){this.playing?this.stoploop():this.startloop()},minusTempo:function(){var t=this;this.$ga.event("RollMaker","Control","minusTempo"),this.tempo>Qe&&(this.tempo-=5,Tone.Transport.seconds=this.activeJ*Ke*120/this.tempo,Tone.Transport.bpm.rampTo(this.tempo,.01),setTimeout(function(){t.scheduleCursor()},200))},addTempo:function(){var t=this;this.$ga.event("RollMaker","Control","addTempo"),this.tempo<Xe&&(this.tempo+=5,Tone.Transport.seconds=this.activeJ*Ke*120/this.tempo,Tone.Transport.bpm.rampTo(this.tempo,.01),setTimeout(function(){t.scheduleCursor()},200))},scrolldown:function(){this.$ga.event("RollMaker","Control","nextPage"),this.sector<=ze/Ye-2&&(this.sector+=1)},scrollup:function(){this.$ga.event("RollMaker","Control","lastPage"),this.sector>=2&&(this.sector-=1)},scrollToBegin:function(){this.$ga.event("RollMaker","Control","rewind"),clearInterval(qe),this.sector=1},updateLoop:function(){this.fullloop=!this.fullloop,this.$ga.event("RollMaker","Control","fullloop",this.fullloop?1:0),this.scheduleCursor(),this.playing&&(this.stoploop(),this.startloop())},clearNotes:function(){this.$ga.event("RollMaker","Control","clear"),this.rectArray=Array(Oe[this.keyboardMode].musicScale.length).fill(1).map(function(t){return[]})},chooseKeyboard:function(t){this.keyboardMode!=t&&(this.$ga.event("RollMaker","UpdateKeyboard","tap"),this.alertAppear2=!0,this.saveProjectToLocalStorage())},updateBeat:function(t){this.beat=t,this.$ga.event("RollMaker","UpdateBeat","".concat(t)),this.saveProjectToLocalStorage()},updateKeyboard:function(){this.keyboardMode="whitekey"==this.keyboardMode?"fullkey":"whitekey",this.$ga.event("RollMaker","UpdateKeyboard",this.keyboardMode),this.rectArray=Array(Oe[this.keyboardMode].musicScale.length).fill(1).map(function(t){return[]}),this.NOTE_CATEGORY=Oe[this.keyboardMode].musicScale.length,this.setupCanvas(),this.alertAppear2=!1,this.menuAppear=!1,this.saveProjectToLocalStorage()},checkBouncibility:function(){for(var t=[],e=0;e<=this.NOTE_CATEGORY-1;e++)for(var o=0;o<=ze-1;o++)this.rectArray[e][o]&&t.push({note:Tone.Frequency(Oe[this.keyboardMode].initKey+Oe[this.keyboardMode].musicScale[e],"midi").toNote(),time:o*Ke*120/this.tempo});return t.sort(function(t,e){return 0+t.time-e.time}),wt(t)},bounceProject:function(){for(var t=this,e=[],o=0;o<=this.NOTE_CATEGORY-1;o++)for(var n=0;n<=ze-1;n++)this.rectArray[o][n]&&e.push({note:Tone.Frequency(Oe[this.keyboardMode].initKey+Oe[this.keyboardMode].musicScale[o],"midi").toNote(),time:n*Ke*120/this.tempo});this.$store.dispatch("BOUNCE_PROJECT",{record:e,info:{title:"尚未起名",content:"",cover:""}}).then(function(e){console.log("successfully bounced"),t.bouncing=!1,t.$toast("作品已为您存储"),cursorSchedules.forEach(function(t){return Tone.Transport.clear(t)}),t.$router.push({path:"/new-music-box-viewer",query:{id:e}})}).catch(function(e){t.bouncing=!1,t.$toast("非常抱歉，上传作品失败了")})},adjustWork:function(){this.$ga.event("RollMaker","Overlimit","adjust"),this.alertAppear=!1},bounceAnyway:function(){this.$ga.event("RollMaker","Overlimit","bounce"),this.bounceProject()},submitProject:function(){this.menuAppear=!1,this.$ga.event("RollMaker","Finish","tap"),0!==this.rectArray.reduce(function(t,e){return t.concat(e)},[]).length?(this.teethNum=this.checkBouncibility(),this.teethNum<=18?this.bounceProject():(this.$ga.event("RollMaker","Finish","overLimit"),this.alertAppear=!0)):this.$toast("作品不能为空")},btnEnd:function(t){this.toggleReplay()},saveProjectToLocalStorage:function(){var t={keyboardMode:this.keyboardMode,rectArray:this.rectArray,beat:this.beat};window.localStorage.setItem("rollwork",h()(t))}},beforeRouteLeave:function(t,e,o){bt(),o()},created:function(){this.scales=Oe,this.setupCanvas(),console.log(xe);var t=window.localStorage.getItem("rollwork");if(this.$store.state.route.query.id)this.keyboardMode=xe.keyboardMode,this.tempo=xe.tempo,this.rectArray=xe.rectArray,this.beat=xe.beat,this.scheduleCursor();else if(t){console.log("kiokiokio"),console.log(t),console.log(Object(Te["a"])(t));var e=JSON.parse(t);this.keyboardMode=e.keyboardMode||"whitekey",this.tempo=e.tempo||120,this.rectArray=e.rectArray||Array(Oe[this.keyboardMode].musicScale.length).fill(1).map(function(t){return[]}),this.beat=e.beat||8,this.scheduleCursor()}Tone.Transport.cancel();var o=document.documentElement;window.rem=o.getBoundingClientRect().width/10,o.style.fontSize=window.rem+"px";var n=/micromessenger/.test(navigator.userAgent.toLowerCase());n&&(Rt().then(function(){Wt({title:"哎八音-序列编辑器",desc:"像DJ一样，编辑自己的八音盒",fullPath:"".concat(location.origin).concat(location.pathname,"#/new-music-box-roll"),imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(t){t.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(location.origin+location.pathname+"#/new-music-box-roll"),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),console.log("get user info success",t.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(location.origin+location.pathname+"#/new-music-box-roll"),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(location.origin+location.pathname+"#/new-music-box-roll"),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")))},mounted:function(){},updated:function(){}},eo=to,oo=(o("95f2"),Object(G["a"])(eo,ye,Ce,!1,null,"8e544c62",null)),no=oo.exports,io=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"worklist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},t._l(t.musixiserWorksObj.content,function(e){return o("work-card",{key:e.id,attrs:{workInfo:e,playingStatus:e.id==t.playingWorkId,maskOn:e.id==t.operatingWorkId,onLongPress:function(){return t.operateWork(e)},onPlayWork:function(){return t.playWork(e)},onPurchaseWork:function(){return t.purchaseWork(e)},onDownloadWork:function(){return t.downloadWork(e)},onClickTag:function(){t.tagAppear=!0},onShareWork:t.shareWork,onChangeWorkStatus:t.changeWorkStatus,onTapMask:t.cancelOperate,onToggleLike:function(){return t.toggleLike(e,"musixiserWorksObj")},isMine:t.isMe}})}),1),o("tag-dialog",{attrs:{appear:t.tagAppear,handleClose:function(){t.tagAppear=!1}}})],1)},ao=[],so=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"longpress",rawName:"v-longpress",value:t.onLongPress,expression:"onLongPress"}],staticClass:"work-container"},[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.maskOn,expression:"maskOn"}],staticClass:"mask",on:{touchstart:function(e){return e.target!==e.currentTarget?null:t.onTapMask(e)}}},[n("div",{class:["circle-btn",t.workInfo.machineNum>18?"gray":"pink"],on:{touchstart:t.onPurchaseWork}},[t._v("购买")]),n("div",{class:["circle-btn","purple"],on:{touchstart:t.onDownloadWork}},[t._v("下载")]),t.isMine?n("div",{staticClass:"circle-btn blue",on:{click:function(e){return t.onChangeWorkStatus(t.workInfo,0==t.workInfo.status?1:0)}}},[t._v(t._s(0==t.workInfo.status?t.workStatusMap[1]:t.workStatusMap[0]))]):t._e(),t.isMine?n("div",{staticClass:"circle-btn gray",on:{touchstart:function(e){return t.onChangeWorkStatus(t.workInfo,2)}}},[t._v("删除")]):t._e()])]),t.workInfo.machineNum<=18?n("img",{staticClass:"mb-tag",attrs:{src:o("20c8")},on:{click:t.onClickTag}}):t._e(),n("div",{staticClass:"preview-bg",on:{click:t.onPlayWork}},[t.workInfo.cover&&t.workInfo.cover.indexOf("//")>=0?n("img",{staticClass:"cover",attrs:{src:t.workInfo.cover,alt:""}}):t._e(),!t.workInfo.cover||t.workInfo.cover.indexOf("//")<0?n("div",{staticClass:"dark-mask"}):t._e(),t.playingStatus?t._e():n("img",{staticClass:"playBtn",attrs:{src:o("4cef"),alt:""}}),t.playingStatus?n("img",{staticClass:"playBtn",attrs:{src:o("1038"),alt:""}}):t._e()]),n("div",{staticClass:"detail"},[n("div",{staticClass:"title-section",on:{click:function(e){return t.gotoWork(t.workInfo.id)}}},[n("p",{staticClass:"title"},[t._v(t._s(t.workInfo.title))]),n("span",{staticClass:"check"},[t._v("查看")])]),n("div",{staticClass:"user",on:{click:function(e){return t.gotoMusixiser(t.workInfo.userId)}}},[n("img",{staticClass:"avatar",attrs:{src:t.workInfo.userVO.smallAvatar,alt:""}}),n("p",{staticClass:"song-title"},[t._v(t._s(t.workInfo.userVO.realname))])]),n("div",{staticClass:"detail-other"},[n("div",[t._v(t._s(t._f("getDateDiff")(t.workInfo.lastModifiedDate))+"更新")]),n("div",{staticClass:"likes",on:{click:function(e){return t.onToggleLike(t.workInfo)}}},[t.workInfo.favStatus?t._e():n("img",{attrs:{src:o("12c2"),alt:""}}),t.workInfo.favStatus?n("img",{attrs:{src:o("4454"),alt:""}}):t._e(),t._v("\n        "+t._s(t.workInfo.collectNum)+"\n      ")])])])],1)},ro=[],co={props:{isMine:{type:Boolean,default:!1},workInfo:{type:Object},playingStatus:{type:Boolean,default:!1},showAuthor:{type:Boolean,default:!0},maskOn:{type:Boolean,default:!1},onPlayWork:Function,onPurchaseWork:Function,onDownloadWork:Function,onShareWork:Function,onChangeWorkStatus:Function,onToggleLike:Function,onClickTag:Function,onLongPress:{type:Function,default:function(){console.log("longpress")}},onTapMask:Function},computed:{},data:function(){var t={id:148,title:"castle",cover:"",content:"default",url:"//img.musixise.com/LIjPhuhF_castle.mid",favStatus:0,createdDate:"2019-01-10 23:38:18",userId:239,collectNum:0,lastModifiedDate:"2019-01-17 11:51:03",machineNum:19,fileHash:"f0af50f723c10857ad5348fe52ee8f1c",userVO:{id:108,username:"wechat_oazyg56Zj4X6HViD9h0jB2BTOHJQ",realname:"花子文",tel:"",email:"wechat_oazyg56Zj4X6HViD9h0jB2BTOHJQ@musixise.com",birth:"2000-01-01",gender:"",smallAvatar:"//thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM5OUNntatJGnibRkygaFhMZickUgUMDulSibFI0yQhNqYSZFYqK6BtdDItuC9uDALXwibxcvlibBvR1cknqfYVyf1KND/132",largeAvatar:"//thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM5OUNntatJGnibRkygaFhMZickUgUMDulSibFI0yQhNqYSZFYqK6BtdDItuC9uDALXwibxcvlibBvR1cknqfYVyf1KND/132",nation:"",isMaster:0,brief:null,favStatus:0,followNum:0,fansNum:0,songNum:43,userId:239,createdDate:"2019-01-02 12:41:55"}};return{info:t,workStatusMap:{0:"公开",1:"私密",2:"删除"}}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{gotoWork:function(t){this.$router.push({path:"/new-music-box-viewer",query:{id:t}})},gotoMusixiser:function(t){this.$router.push({path:"/musixiser",query:{id:t}})}}},lo=co,uo=(o("dd12"),Object(G["a"])(lo,so,ro,!1,null,"18b3b216",null)),po=uo.exports,ho=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",[o("div",{directives:[{name:"show",rawName:"v-show",value:t.appear,expression:"appear"}],staticStyle:{display:"flex","align-items":"center","justify-content":"center",position:"fixed",top:"0",width:"100%",height:"100%","background-color":"rgba(0,0,0,.6)","z-index":"3"}},[o("div",{attrs:{id:"tag-spec"}},[o("div",{staticClass:"header"},[t._v("标记说明")]),o("div",{staticClass:"body"},[t._v("\n        表示本作品当前可制作成实体八音盒。\n        "),o("br"),t._v("能制作成八音盒的乐曲通常具备以下条件:\n        "),o("ul",[o("li",[t._v("· 作品音符数量适中")]),o("li",[t._v("· 作品音符音高比较分散")])])]),o("div",{staticClass:"footer",on:{click:t.handleClose}},[t._v("关闭")])])])])},fo=[],vo={props:{appear:Boolean,handleClose:Function},computed:{style:function(){}},data:function(){return{}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{updateButton:function(){}}},go=vo,mo=(o("4908"),Object(G["a"])(go,ho,fo,!1,null,"d8f41852",null)),wo=mo.exports,Ao=o("487a"),ko=o.n(Ao),bo={0:"公开",1:"私密",2:"删除"},yo={mixins:[jt],directives:{infiniteScroll:ko.a},components:{workCard:po,tagDialog:wo},data:function(){return{loading:!0,playing:!1,userId:0,isMe:!1,favStatus:!1,newWorkTitle:"",finalNewWorkTitle:"",busy:!0,tagAppear:!1}},computed:{musixiserInfo:function(){return this.$store.state.musixiserInfo},musixiserWorksObj:function(){return console.log(h()(this.$store.state.musixiserWorksObj)),this.$store.state.musixiserWorksObj},operatingWorkId:function(){return this.$store.state.operatingWorkId},playingWorkId:function(){return this.$store.state.playingWorkId}},methods:{loadMusixiserById:function(){var t=this;console.log("my id: ",this.userId);var e=this.userId;this.$store.dispatch("FETCH_MUSIXISER",{id:e}).then(function(){var e="".concat(location.origin).concat(location.pathname,"#/musixiser?id=").concat(t.userId);document.title="".concat(t.$store.state.musixiserInfo.realname,"的作品"),Rt().then(function(){Wt({title:"".concat(t.$store.state.musixiserInfo.realname,"的作品"),desc:"很好听哦～",fullPath:e,imgUrl:"http:".concat(t.$store.state.musixiserInfo.smallAvatar)||!1})})}),this.busy=!1},loadMore:function(){var t=this,e=this.userId;this.busy=!0,console.log("1111111",this.musixiserWorksObj.current),this.$store.dispatch("FETCH_WORKS_FROM_MUSIXISER",{id:e,page:this.musixiserWorksObj.current?this.musixiserWorksObj.current+1:1}).then(function(){console.log("2222222",t.musixiserWorksObj),+t.musixiserWorksObj.content.length<+t.musixiserWorksObj.total&&(t.busy=!1)})},operateWork:function(t){console.log("operate in"),this.$store.commit("OPERATE_WORK",{work:t})},cancelOperate:function(){this.$store.commit("OPERATE_WORK",{work:{id:-1}})},shareWork:function(){console.log("share in")},changeWorkStatus:function(t,e){var o=this;O({id:t.id,status:e}).then(function(){o.$toast("已将作品".concat(bo[e])),o.cancelOperate(),o.$store.commit("LOCAL_UPDATE_LIST",{type:"musixiserWorksObj",item:{id:t.id,status:e}})})}},beforeRouteLeave:function(t,e,o){bt(),this.$store.commit("RESET_WORK_LIST",{type:"musixiserWorksObj"}),o()},created:function(){var t=this,e=this,o=document.documentElement;window.rem=o.getBoundingClientRect().width/10,o.style.fontSize=window.rem+"px";var n=/micromessenger/.test(navigator.userAgent.toLowerCase());if(document.title="作品集",!n)return this.userId=this.$store.state.route.query.id||239,void e.loadMusixiserById();var i="".concat(location.origin).concat(location.pathname,"#/musixiser?id=").concat(e.$store.state.route.query.id);ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(o){o.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),e.userId=t.$store.state.route.query.id||o.data.data.userId,e.isMe=e.userId==o.data.data.userId,e.loadMusixiserById(),console.log("get user info success",o.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))},mounted:function(){var t=this;setTimeout(function(){t.loading=!1},2e3)},updated:function(){}},Co=yo,To=(o("0c9f"),Object(G["a"])(Co,io,ao,!1,null,"17546920",null)),xo=To.exports,Oo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"worklist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},t._l(t.favWorksObj.content,function(e){return o("work-card",{key:e.id,attrs:{workInfo:e,playingStatus:e.id==t.playingWorkId,maskOn:e.id==t.operatingWorkId,onLongPress:function(){return t.operateWork(e)},onPlayWork:function(){return t.playWork(e)},onDownloadWork:function(){return t.downloadWork(e)},onPurchaseWork:function(){return t.purchaseWork(e)},onClickTag:function(){t.tagAppear=!0},onShareWork:t.shareWork,onChangeWorkStatus:t.changeWorkStatus,onTapMask:t.cancelOperate,onToggleLike:function(){return t.toggleLike(e,"favWorksObj")}}})}),1),o("tag-dialog",{attrs:{appear:t.tagAppear,handleClose:function(){t.tagAppear=!1}}})],1)},Eo=[],So={mixins:[jt],directives:{infiniteScroll:ko.a},components:{workCard:po,tagDialog:wo},data:function(){return{loading:!0,playing:!1,userId:0,isMe:!1,favStatus:!1,newWorkTitle:"",finalNewWorkTitle:"",busy:!0,tagAppear:!1}},computed:{musixiserInfo:function(){return this.$store.state.musixiserInfo},favWorksObj:function(){return this.$store.state.favWorksObj},operatingWorkId:function(){return this.$store.state.operatingWorkId},playingWorkId:function(){return this.$store.state.playingWorkId}},methods:{loadMusixiserById:function(){var t=this;console.log("my id: ",this.userId);var e=this.userId;this.$store.dispatch("FETCH_MUSIXISER",{id:e}).then(function(){var e="".concat(location.origin).concat(location.pathname,"#/my-fav?id=").concat(t.userId);document.title="".concat(t.$store.state.musixiserInfo.realname,"的收藏"),Rt().then(function(){Wt({title:"".concat(t.$store.state.musixiserInfo.realname,"的收藏"),desc:"口味不太一样哦～",fullPath:e,imgUrl:"http:".concat(t.$store.state.musixiserInfo.smallAvatar)||!1})})}),this.busy=!1},loadMore:function(){var t=this,e=this.userId;this.busy=!0,console.log("1111111",this.favWorksObj.current),this.$store.dispatch("FETCH_FAV_WORKS",{id:e,page:this.favWorksObj.current?this.favWorksObj.current+1:1}).then(function(){console.log("2222222",t.favWorksObj),+t.favWorksObj.content.length<+t.favWorksObj.total&&(t.busy=!1)})},operateWork:function(t){console.log("operate in"),this.$store.commit("OPERATE_WORK",{work:t})},cancelOperate:function(){this.$store.commit("OPERATE_WORK",{work:{id:-1}})},shareWork:function(){console.log("share in")},changeWorkStatus:function(t,e){var o=this;O({id:t.id,status:e}).then(function(){o.$toast("已将作品".concat(workStatusMap[e])),o.cancelOperate(),o.$store.commit("LOCAL_UPDATE_LIST",{type:"favWorksObj",item:{id:t.id,status:e}})})}},beforeRouteLeave:function(t,e,o){bt(),this.$store.commit("RESET_WORK_LIST",{type:"favWorksObj"}),o()},created:function(){var t=this,e=this,o=document.documentElement;window.rem=o.getBoundingClientRect().width/10,o.style.fontSize=window.rem+"px",document.title="收藏集";var n=/micromessenger/.test(navigator.userAgent.toLowerCase());if(!n)return this.userId=this.$store.state.route.query.id||239,void e.loadMusixiserById();var i="".concat(location.origin).concat(location.pathname,"#/my-fav?id=").concat(e.$store.state.route.query.id);ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(o){o.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),e.userId=t.$store.state.route.query.id||o.data.data.userId,e.isMe=e.userId==o.data.data.userId,e.loadMusixiserById(),console.log("get user info success",o.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))},mounted:function(){var t=this;setTimeout(function(){t.loading=!1},2e3)},updated:function(){}},Po=So,Io=(o("745c"),Object(G["a"])(Po,Oo,Eo,!1,null,"2a4822a1",null)),Ro=Io.exports,Wo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("swiper",{ref:"bigProductList",attrs:{options:t.bigProductListOption}},t._l(t.productList,function(e){return o("swiper-slide",{key:e.id},[o("div",{key:t.activeIndex,staticClass:"productPage",on:{click:t.viewProductDetail}},[o("div",{staticClass:"preview",style:{background:"url()"}},[o("img",{staticStyle:{width:"100%",height:"100%",position:"relative","object-fit":"cover",display:"block","border-radius":"20px 20px 0 0",background:"black"},attrs:{src:e.previewPic||"https://cdn4.buysellads.net/uu/1/3386/1525189887-61450.png",alt:""}})]),o("div",{staticClass:"desc"},[o("div",{staticClass:"desc-title"},[t._v(t._s(e.name))]),o("div",{staticStyle:{display:"flex"}},[o("div",{staticStyle:{flex:"1",color:"#6d6e75","font-size":"12px"}},[o("p",[t._v(t._s(e.intro))])]),o("div",{staticClass:"price"},[t._v("¥"+t._s(e.price))])])])])])}),1),o("swiper",{ref:"productList",attrs:{options:t.productListOption}},t._l(t.productList,function(e,n){return o("swiper-slide",{key:e.id},[o("img",{class:{invalid:n!==t.activeIndex},staticStyle:{width:"1rem",height:"1rem",background:"black","object-fit":"cover"},attrs:{src:e.previewPic||"https://cdn4.buysellads.net/uu/1/3386/1525189887-61450.png",alt:""}})])}),1),o("div",{attrs:{id:"purchase-area"}},[o("div",{staticClass:"purchaseBtn",on:{click:t.toConfirmOrder}},[t._v("购买")])])],1)},No=[],Bo={props:{initCount:Number,initActive:Boolean,iconImg:String,onClickCall:{type:Function,default:function(){return function(){console.log("tap tap in count Button")}}}},components:{swiper:et["swiper"],swiperSlide:et["swiperSlide"]},computed:{style:function(){},swiper:function(){return this.$refs.productList.swiper},bigSwiper:function(){return this.$refs.bigProductList.swiper},productList:function(){return this.$store.state.productList}},data:function(){return{activeIndex:0}},watch:{},created:function(){var t=this;document.title="选择商品",this.bigProductListOption={loop:!1,centeredSlides:!0,slidesPerView:1,watchSlidesProgress:!0,effect:"fade",on:{transitionEnd:function(e){console.log(this.realIndex),t.targetProduct=t.productList[this.realIndex],t.activeIndex=this.realIndex,t.swiper.slideTo(t.activeIndex)},progress:function(t){}}},this.productListOption={loop:!1,centeredSlides:!0,slidesPerView:8,watchSlidesProgress:!0,slideToClickedSlide:!0,on:{transitionEnd:function(e){console.log(this.realIndex),t.targetProduct=t.productList[this.realIndex],t.activeIndex=this.realIndex,t.bigSwiper.slideTo(t.activeIndex)},progress:function(t){}}}},mounted:function(){},updated:function(){},methods:{viewProductDetail:function(){},toConfirmOrder:function(){console.log(123321),this.$store.commit("SAVE_ORDER_INFO",{product:this.targetProduct}),this.$router.push({path:"/order-confirm",query:{}})},to:function(t){if("number"!==typeof t)return!1;this.swiper.slideTo(t,300,!1),console.log("跳转到第",t,"页面")}}},Mo=Bo,_o=(o("ce5f"),Object(G["a"])(Mo,Wo,No,!1,null,"12dc8390",null)),Do=_o.exports,jo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"order-confirm"},[o("div",{staticClass:"address",on:{click:t.editAddress}},[o("div",{attrs:{id:"basic-info"}},[t._v("收件人：")]),t._m(0),o("div",{attrs:{id:"wx-info"}},[o("span",[t._v(t._s(t.userName))]),o("span",[t._v(" "+t._s(t.telNum))])]),o("div",{attrs:{id:"wx-address"}},[t._v(t._s(t.address))])])]),o("div",{staticClass:"item"},[o("img",{staticClass:"product-img",attrs:{src:t.targetProduct.previewPic||"https://cdn4.buysellads.net/uu/1/3386/1525189887-61450.png",alt:""}}),o("div",{staticClass:"goods"},[o("p",{staticClass:"sub-title"},[t._v(t._s(t.targetProduct.name))]),o("p",{staticClass:"work-title"},[t._v(t._s(t.targetWork.title))])]),o("div",{staticClass:"amount"},[o("span",{on:{click:t.reduceAmount}},[t._v("-")]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.amount},on:{blur:[t.positionWindow,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.amount=t._n(e.target.value))}}}),o("span",{on:{click:t.addAmount}},[t._v("+")])])]),t._m(1),t._m(2),o("div",{staticClass:"msg"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.giftMsg,expression:"giftMsg"}],attrs:{type:"text",placeholder:"默认祝福语：「在乐音相伴的梦里，世界一片白银」"},domProps:{value:t.giftMsg},on:{blur:t.positionWindow,input:function(e){e.target.composing||(t.giftMsg=e.target.value)}}})]),t._m(3),o("div",{staticClass:"purchase-area"},[o("div",{staticClass:"purchaseBtn",on:{click:t.toConfirmOrder}},[t._v("付款 ¥"+t._s(t.amount*t.targetProduct.price))])])])},Uo=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"address-info"}},[t._v("\n        收件地址：\n        "),o("div",{staticClass:"address-underline",attrs:{id:"underline1"}}),o("div",{staticClass:"address-underline",attrs:{id:"underline2"}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{margin:"0 0.64rem"}},[o("div",{staticClass:"thinline"})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"item-list"},[o("p",{staticClass:"sub-title"},[t._v("商品清单")]),o("div",{staticClass:"sub-detail"},[o("p",[t._v("八音盒 x 1")]),o("p",[t._v("包装盒 x 1")]),o("p",[t._v("礼品卡 x 1")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"readme"},[t._v("\n    购买说明\n    "),o("ul",[o("li",[t._v("· 此商品的制作周期约为2周，您可以在【我的-八音盒】页面查看进度")]),o("li",[t._v("· 定制商品在某些特定条件下无法制作，我们将在第一时间联系您并进行退款")]),o("li",[t._v("· 定制商品非质量问题不得退换货，如需退货请在公众号页面提交申请")]),o("li",[t._v("· 如有其他疑问可在公众号的【留言】版块留言，我们将尽快为您解答")])])])}],Lo={props:{initCount:Number,initActive:Boolean,iconImg:String},computed:{style:function(){},orderToCreate:function(){return this.$store.state.orderToCreate},targetProduct:function(){return this.$store.state.targetProduct},targetWork:function(){return this.$store.state.targetWork}},data:function(){return{amount:1,giftMsg:"",currentActiveCount:0,currentActive:!1,userName:"",telNum:"",address:""}},watch:{},created:function(){document.title="确认订单",this.currentActive=this.initActive,this.currentActiveCount=this.currentActive?this.initCount:this.initCount+1},mounted:function(){},updated:function(){},beforeRouteEnter:function(t,e,o){o()},methods:{toConfirmOrder:function(){var t=this;this.address?(console.log(this.orderToCreate),Nt(Object(f["a"])({},this.orderToCreate,{amount:this.amount,message:this.giftMsg}),function(){t.$toast("下单成功"),t.$router.push({path:"/my-orders"})},function(){t.$toast("未下单"),t.$router.push({path:"/my-orders"})})):alert("请先填入地址")},positionWindow:function(){window.scroll(0,0)},editAddress:function(){var t=this;_t(function(e){t.address=e.detailInfo,t.userName=e.userName,t.telNum=e.telNumber,t.$store.commit("SAVE_ORDER_INFO",{address:e})},function(){})},addAmount:function(){this.amount<9&&(this.amount+=1)},reduceAmount:function(){this.amount>1&&(this.amount-=1)}}},Fo=Lo,Ho=(o("b168"),Object(G["a"])(Fo,jo,Uo,!1,null,"7e2635b7",null)),Go=Ho.exports,qo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"orderlist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},t._l(t.orders.content,function(e,n){return o("order",{key:e.id,attrs:{info:e,playingStatus:!!e.content&&e.content.wid==t.playingWorkId,onPlayWork:function(){return t.playWork(e.content)},onPayOrder:function(){return t.payOrder(e.orderId)},onDownloadWork:function(){return t.downloadWork(e.content)}}})}),1)])},Ko=[],zo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.info.content&&t.info.content.product?n("div",{staticClass:"order-container"},[n("div",{staticClass:"preview-bg"},[n("img",{staticClass:"cover",attrs:{src:t.info.content.product.previewPic,alt:""}}),100!==t.info.content.product.category?n("div",{staticClass:"shipment"},[1===t.info.status?n("img",{staticClass:"statusProcess",attrs:{src:o("6368"),alt:""}}):t._e(),1===t.info.status?n("p",{staticClass:"statusText",on:{click:t.onPayOrder}},[t._v("去支付")]):t._e(),2===t.info.status?n("img",{staticClass:"statusProcess",attrs:{src:o("d9a3"),alt:""}}):t._e(),2===t.info.status?n("p",{staticClass:"statusText"},[t._v("制作中👷")]):t._e(),3===t.info.status?n("img",{staticClass:"statusProcess",attrs:{src:o("006e"),alt:""}}):t._e(),3===t.info.status?n("p",{staticClass:"statusText"},[t._v("派送中🏍️")]):t._e(),4===t.info.status?n("img",{staticClass:"statusProcess",attrs:{src:o("c820"),alt:""}}):t._e(),4===t.info.status?n("p",{staticClass:"statusText"},[t._v("已收件🎁")]):t._e()]):t._e(),100===t.info.content.product.category?n("div",{staticClass:"shipment"},[1===t.info.status?n("p",{staticClass:"statusText",on:{click:t.onPayOrder}},[t._v("去支付")]):t._e(),2===t.info.status?n("p",{staticClass:"statusText",on:{click:t.onDownloadWork}},[t._v("可下载🎁")]):t._e(),3===t.info.status?n("p",{staticClass:"statusText",on:{click:t.onDownloadWork}},[t._v("可下载🎁")]):t._e(),4===t.info.status?n("p",{staticClass:"statusText",on:{click:t.onDownloadWork}},[t._v("可下载🎁")]):t._e()]):t._e()]),n("div",{staticClass:"detail"},[n("div",{staticClass:"detail-basic"},[n("div",{staticClass:"title"},[n("p",{staticClass:"product-name"},[t._v(t._s(t.info.content.product.name))]),n("p",{staticClass:"song-title"},[t._v(t._s(t.info.content.title))])]),n("div",{class:t.playingStatus?"stopBtn":"playBtn",on:{touchend:t.onPlayWork}})]),n("div",{staticClass:"detail-other"},[n("p",[t._v(t._s(t._f("getDateDiff")(t.info.orderTime))+"下单")]),n("p",[t._v("¥"+t._s(t.info.price))])])])]):t._e()},Yo=[],Jo={props:{info:Object,playingStatus:{type:Boolean,default:!1},onPlayWork:Function,onPayOrder:Function,onDownloadWork:Function},computed:{},data:function(){return{}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{updateButton:function(){}}},Qo=Jo,Xo=(o("a431"),Object(G["a"])(Qo,zo,Yo,!1,null,"1e8ea0fa",null)),Vo=Xo.exports,Zo={name:"myorders",mixins:[jt],directives:{infiniteScroll:ko.a},components:{order:Vo},data:function(){return{busy:!1}},computed:{orders:function(){return this.$store.state.orders},playingWorkId:function(){return this.$store.state.playingWorkId}},methods:{redirectTo:function(t){this.$router.push(t)},loadMore:function(){var t=this;this.busy=!0,console.log("1111111"),this.$store.dispatch("FETCH_ORDERS",{page:this.orders.current?this.orders.current+1:1}).then(function(){console.log("2222222",t.orders),+t.orders.content.length<+t.orders.total&&(t.busy=!1)})},payOrder:function(t){var e=this;Mt({orderId:t},function(){e.$toast("下单成功"),e.$store.commit("LOCAL_UPDATE_ORDER_STATUS",{orderId:t,status:2})},function(){})},playWork:function(t){var e=this;t.url?(console.log("work going to play: ",t),t.id=t.wid,t.id!=this.playingWorkId?(this.$ga.event("Song","play_20s","".concat(t.id)),this.playing=!0,Ct(t.url,this.playing).then(function(){return e.$store.commit("PLAY_WORK",{work:t})}).catch(function(){e.$toast("作品损坏，无法播放")})):this.playing?(this.$ga.event("Song","stop_20s","".concat(t.id)),this.playing=!1,Ct(t.url,this.playing).then(function(){return e.$store.commit("PLAY_WORK",{work:{id:-1}})}).catch(function(){e.$toast("作品损坏，无法播放")})):(this.$ga.event("Song","play_20s","".concat(t.id)),this.playing=!0,Ct(t.url,this.playing).then(function(){return e.$store.commit("PLAY_WORK",{work:t})}).catch(function(){e.$toast("作品损坏，无法播放")}))):this.$toast("作品损坏，无法播放")}},created:function(){var t=this,e=document.documentElement;window.rem=e.getBoundingClientRect().width/10,e.style.fontSize=window.rem+"px",this.busy=!0;var o=/micromessenger/.test(navigator.userAgent.toLowerCase());o?(Rt(),document.title="我的订单",ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(e){e.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/my-orders")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),t.loadMore(),console.log("get user info success",e.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/my-orders")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/my-orders")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))):this.busy=!1}},$o=Zo,tn=(o("4bc7"),Object(G["a"])($o,qo,Ko,!1,null,"c3669ec2",null)),en=tn.exports,on=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticStyle:{position:"fixed",left:"0",top:"0",width:"100%",height:"100%",background:"linear-gradient(125deg, #464c8b, #39375e)"}}),n("div",{staticStyle:{position:"absolute",left:"-1rem",top:"-2.5rem",width:"7rem",height:"7rem","border-radius":"3.5rem",background:"linear-gradient(125deg, #7995EE, rgba(69,100,215,0))"}}),n("div",{staticStyle:{position:"absolute",right:"-.4rem",top:"4.5rem",width:"4rem",height:"4rem","border-radius":"2rem",background:"linear-gradient(-45deg, #7996EE, rgba(69,100,215,.7))"}}),n("div",{attrs:{id:"winner-sector"}},[n("div",{staticClass:"winner-avatar",attrs:{id:"gold"}},[n("img",{staticClass:"avatar",attrs:{src:t.playerGold.smallAvatar,alt:""},on:{error:function(e){t.playerGold.smallAvatar="//pic.xiami.net/images/default/xiami_7/avatar_new.png@!c-100-100"}}}),n("p",{staticClass:"name"},[t._v(t._s(t.playerGold.realname))]),n("img",{staticClass:"crown",attrs:{src:o("4955"),alt:""}})]),n("div",{staticClass:"winner-avatar",attrs:{id:"silver"}},[n("img",{staticClass:"avatar",attrs:{src:t.playerSilver.smallAvatar,alt:""},on:{error:function(e){t.playerSilver.smallAvatar="//pic.xiami.net/images/default/xiami_7/avatar_new.png@!c-100-100"}}}),n("p",{staticClass:"name"},[t._v(t._s(t.playerSilver.realname))]),n("img",{staticClass:"crown",attrs:{src:o("bdac"),alt:""}})]),n("div",{staticClass:"winner-avatar",attrs:{id:"bronze"}},[n("img",{staticClass:"avatar",attrs:{src:t.playerBronze.smallAvatar,alt:""},on:{error:function(e){t.playerBronze.smallAvatar="//pic.xiami.net/images/default/xiami_7/avatar_new.png@!c-100-100"}}}),n("p",{staticClass:"name"},[t._v(t._s(t.playerBronze.realname))]),n("img",{staticClass:"crown",attrs:{src:o("d462"),alt:""}})])]),t._m(0),n("div",{staticClass:"worklist"},t._l(t.boardWorksObj.content,function(e,o){return n("work-card",{key:e.id,attrs:{workInfo:e,rank:o+1,playingStatus:e.id==t.playingWorkId,maskOn:e.id==t.operatingWorkId,onPlayWork:function(){return t.playWork(e)},onDownloadWork:function(){return t.downloadWork(e)},onToggleLike:function(){return t.toggleLike(e,"boardWorksObj")},onClickTag:function(){t.tagAppear=!0}}})}),1),n("tag-dialog",{attrs:{appear:t.tagAppear,handleClose:function(){t.tagAppear=!1}}})],1)},nn=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("p",{attrs:{id:"specs"}},[t._v("\n    母亲节活动说明：\n    "),o("br"),t._v("在5月13日12:00前，作品获赞排名前三且符合制作标准，即可获赠对应音乐的定制音乐盒\n    "),o("br"),t._v("同一用户最多只有一件作品进入前三名，提交作品通过系统判断可制成实体八音盒才能进入前三名\n  ")])}],an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.workInfo.id?n("div",{staticClass:"info"},[n("div",{staticClass:"rank",attrs:{id:"rank"+t.rank}},[t._v(t._s(t.rank))]),n("div",{staticClass:"preview-bg",on:{touchend:t.onPlayWork}},[t.workInfo.cover&&t.workInfo.cover.indexOf("//")>=0?n("img",{staticClass:"cover",attrs:{src:t.workInfo.cover,alt:""}}):t._e(),!t.workInfo.cover||t.workInfo.cover.indexOf("//")<0?n("div",{staticClass:"dark-mask"}):t._e(),t.playingStatus?t._e():n("img",{staticClass:"playBtn",attrs:{src:o("4cef"),alt:""}}),t.playingStatus?n("img",{staticClass:"playBtn",attrs:{src:o("1038"),alt:""}}):t._e()]),n("div",{staticClass:"detail"},[t.workInfo.machineNum<=18?n("img",{staticClass:"mb-tag",attrs:{src:o("20c8")},on:{click:t.onClickTag}}):t._e(),n("p",{staticClass:"title",on:{click:function(e){return t.gotoWork(t.workInfo.id)}}},[t._v(t._s(t.workInfo.title))]),n("div",{ref:"outsider",staticClass:"work-body-desc"},[n("div",{staticStyle:{position:"absolute",right:"-2rem",width:"4rem",background:"linear-gradient(45deg, rgba(55, 60, 102, 0), rgba(55,60,102,60))",height:"100%","z-index":"2"}}),n("p",{ref:"insider",style:t.marqueeStyle},[t._v(t._s(t.workInfo.content))])]),n("div",{staticClass:"detail-other"},[n("p",{staticClass:"user-detail"},[t._v("\n        by \n        "),n("span",[n("img",{staticClass:"avatar",attrs:{src:t.workInfo.userVO.smallAvatar,alt:""}})]),n("span",{staticClass:"name"},[t._v(" "+t._s(t.workInfo.userVO.realname))]),n("span",[t._v(" ·"+t._s(t._f("getDateDiff")(t.workInfo.lastModifiedDate)))])]),n("div",{staticClass:"likes",on:{click:function(e){return t.onDownloadWork(t.workInfo)}}},[t.workInfo.wavAccess?t._e():n("img",{attrs:{src:o("4fa5"),alt:""}}),t.workInfo.wavAccess?n("img",{attrs:{src:o("186c"),alt:""}}):t._e()]),n("div",{staticClass:"likes",on:{click:function(e){return t.onToggleLike(t.workInfo)}}},[t.workInfo.favStatus?t._e():n("img",{attrs:{src:o("12c2"),alt:""}}),t.workInfo.favStatus?n("img",{attrs:{src:o("4454"),alt:""}}):t._e(),t._v("\n        "+t._s(t.workInfo.collectNum)+"\n      ")])])])]):t._e()},sn=[],rn=40,cn={props:{workInfo:{type:Object},playingStatus:{type:Boolean,default:!1},rank:{type:Number},onPlayWork:Function,onToggleLike:Function,onDownloadWork:Function,onClickTag:Function},data:function(){return{marqueeStyle:""}},methods:{gotoWork:function(t){this.$router.push({path:"/new-music-box-viewer",query:{id:t}})}},created:function(){},mounted:function(){if(this.marqueeStyle="",this.$refs.insider&&this.$refs.outsider&&this.$refs.insider.offsetWidth>this.$refs.outsider.offsetWidth){var t=this.$refs.insider.offsetWidth/rn+"s;";this.marqueeStyle+="-webkit-animation:marquee linear infinite;-o-animation:marquee linear infinite;animation:  marquee linear infinite;-webkit-animation-duration:"+t+"-o-animation-duration:"+t+"animation-duration:"+t+";"}else this.marqueeStyle+=""}},ln=cn,un=(o("c7f0"),Object(G["a"])(ln,an,sn,!1,null,"a2af9d5e",null)),dn=un.exports,pn={mixins:[jt],directives:{infiniteScroll:ko.a},components:{workCard:dn,tagDialog:wo},data:function(){return{loading:!0,playing:!1,userId:0,isMe:!1,favStatus:!1,newWorkTitle:"",finalNewWorkTitle:"",busy:!0,tagAppear:!1,playerGold:{},playerSilver:{},playerBronze:{}}},computed:{musixiserInfo:function(){return this.$store.state.musixiserInfo},boardWorksObj:function(){var t=this.$store.state.boardWorksObj;return this.playerGold=t.content[0]&&t.content[0].userVO?t.content[0].userVO:{smallAvatar:"//cdn.cnbj1.fds.api.mi-img.com/mbox/avatar.jpeg",realname:"虚位以待"},this.playerSilver=t.content[1]&&t.content[1].userVO?t.content[1].userVO:{smallAvatar:"//cdn.cnbj1.fds.api.mi-img.com/mbox/avatar.jpeg",realname:"虚位以待"},this.playerBronze=t.content[2]&&t.content[2].userVO?t.content[2].userVO:{smallAvatar:"//cdn.cnbj1.fds.api.mi-img.com/mbox/avatar.jpeg",realname:"虚位以待"},t},operatingWorkId:function(){return this.$store.state.operatingWorkId},playingWorkId:function(){return this.$store.state.playingWorkId}},methods:{loadMore:function(){var t=this;this.userId;this.busy=!0,console.log("1111111",this.boardWorksObj.current),this.$loading("加载排行中"),this.$store.dispatch("FETCH_BOARD_WORKS",{page:1,size:30,category:1,orderStrategy:2}).then(function(){t.$loading.close(),console.log("2222222",t.boardWorksObj),+t.boardWorksObj.content.length<+t.boardWorksObj.total&&(t.busy=!1)}).catch(function(){t.$loading.close(),t.$toast("加载失败,请稍后再试")})},operateWork:function(t){console.log("operate in"),this.$store.commit("OPERATE_WORK",{work:t})},cancelOperate:function(){this.$store.commit("OPERATE_WORK",{work:{id:-1}})},shareWork:function(){console.log("share in")}},beforeRouteLeave:function(t,e,o){bt(),this.$store.commit("RESET_WORK_LIST",{type:"boardWorksObj"}),o()},created:function(){var t=this,e=this;this.busy=!1;var o=document.documentElement;window.rem=o.getBoundingClientRect().width/10,o.style.fontSize=window.rem+"px",document.title="排行榜";var n=/micromessenger/.test(navigator.userAgent.toLowerCase());if(n){var i="".concat(location.origin).concat(location.pathname,"#/rank-board");Rt().then(function(){Wt({title:"哎八音母亲节排行榜",desc:"免费赠送定制音乐康乃馨色八音盒～",fullPath:i,imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(o){o.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),e.userId=o.data.data.userId,t.busy=!1,t.loadMore(),console.log("get user info success",o.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent(i),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}else this.loadMore()},mounted:function(){var t=this;setTimeout(function(){t.loading=!1},2e3)},updated:function(){}},hn=pn,fn=(o("9a4e"),Object(G["a"])(hn,on,nn,!1,null,"15c7e6e6",null)),vn=fn.exports,gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"container"}},[n("div",{class:["keys",8===t.tutorSession?"tutorial-highlight":""],on:{touchmove:t.keng,touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.touchNoteStartHandler(e)},touchend:function(e){return e.stopPropagation(),t.touchNoteEndHandler(e)},touchcancel:function(e){return e.stopPropagation(),t.touchNoteEndHandler(e)}}},[n("div",{class:["white","c",t.notesWaitingList[0].includes("C4")?"hl-note":"",t.activeNote.C4?"active-note":""],attrs:{id:"C4"}}),n("div",{class:["black","d-minor",t.notesWaitingList[0].includes("Db4")?"hl-note":"",t.activeNote.Db4?"active-note":""],attrs:{id:"Db4"}}),n("div",{class:["white","d",t.notesWaitingList[0].includes("D4")?"hl-note":"",t.activeNote.D4?"active-note":""],attrs:{id:"D4"}}),n("div",{class:["black","e-minor",t.notesWaitingList[0].includes("Eb4")?"hl-note":"",t.activeNote.Eb4?"active-note":""],attrs:{id:"Eb4"}}),n("div",{class:["white","e",t.notesWaitingList[0].includes("E4")?"hl-note":"",t.activeNote.E4?"active-note":""],attrs:{id:"E4"}}),n("div",{class:["white","f",t.notesWaitingList[0].includes("F4")?"hl-note":"",t.activeNote.F4?"active-note":""],attrs:{id:"F4"}}),n("div",{class:["black","f-sharp",t.notesWaitingList[0].includes("Gb4")?"hl-note":"",t.activeNote.Gb4?"active-note":""],attrs:{id:"Gb4"}}),n("div",{class:["white","g",t.notesWaitingList[0].includes("G4")?"hl-note":"",t.activeNote.G4?"active-note":""],attrs:{id:"G4"}}),n("div",{class:["black","a-minor",t.notesWaitingList[0].includes("Ab4")?"hl-note":"",t.activeNote.Ab4?"active-note":""],attrs:{id:"Ab4"}}),n("div",{class:["white","a",t.notesWaitingList[0].includes("A4")?"hl-note":"",t.activeNote.A4?"active-note":""],attrs:{id:"A4"}}),n("div",{class:["black","b-minor",t.notesWaitingList[0].includes("Bb4")?"hl-note":"",t.activeNote.Bb4?"active-note":""],attrs:{id:"Bb4"}}),n("div",{class:["white","b",t.notesWaitingList[0].includes("B4")?"hl-note":"",t.activeNote.B4?"active-note":""],attrs:{id:"B4"}}),n("div",{class:["white","c",t.notesWaitingList[0].includes("C5")?"hl-note":"",t.activeNote.C5?"active-note":""],attrs:{id:"C5"}}),n("div",{class:["black","d-minor",t.notesWaitingList[0].includes("Db5")?"hl-note":"",t.activeNote.Db5?"active-note":""],attrs:{id:"Db5"}}),n("div",{class:["white","d",t.notesWaitingList[0].includes("D5")?"hl-note":"",t.activeNote.D5?"active-note":""],attrs:{id:"D5"}}),n("div",{class:["black","e-minor",t.notesWaitingList[0].includes("Eb5")?"hl-note":"",t.activeNote.Eb5?"active-note":""],attrs:{id:"Eb5"}}),n("div",{class:["white","e",t.notesWaitingList[0].includes("E5")?"hl-note":"",t.activeNote.E5?"active-note":""],attrs:{id:"E5"}}),n("div",{class:["white","f",t.notesWaitingList[0].includes("F5")?"hl-note":"",t.activeNote.F5?"active-note":""],attrs:{id:"F5"}}),n("div",{class:["black","f-sharp",t.notesWaitingList[0].includes("Gb5")?"hl-note":"",t.activeNote.Gb5?"active-note":""],attrs:{id:"Gb5"}}),n("div",{class:["white","g",t.notesWaitingList[0].includes("G5")?"hl-note":"",t.activeNote.G5?"active-note":""],attrs:{id:"G5"}}),n("div",{class:["black","a-minor",t.notesWaitingList[0].includes("Ab5")?"hl-note":"",t.activeNote.Ab5?"active-note":""],attrs:{id:"Ab5"}}),n("div",{class:["white","a",t.notesWaitingList[0].includes("A5")?"hl-note":"",t.activeNote.A5?"active-note":""],attrs:{id:"A5"}}),n("div",{class:["black","b-minor",t.notesWaitingList[0].includes("Bb5")?"hl-note":"",t.activeNote.Bb5?"active-note":""],attrs:{id:"Bb5"}}),n("div",{class:["white","b",t.notesWaitingList[0].includes("B5")?"hl-note":"",t.activeNote.B5?"active-note":""],attrs:{id:"B5"}}),n("div",{class:["white","c",t.notesWaitingList[0].includes("C6")?"hl-note":"",t.activeNote.C6?"active-note":""],attrs:{id:"C6"}}),n("div",{class:["black","d-minor",t.notesWaitingList[0].includes("Db6")?"hl-note":"",t.activeNote.Db6?"active-note":""],attrs:{id:"Db6"}}),n("div",{class:["white","d",t.notesWaitingList[0].includes("D6")?"hl-note":"",t.activeNote.D6?"active-note":""],attrs:{id:"D6"}}),n("div",{class:["black","e-minor",t.notesWaitingList[0].includes("Eb6")?"hl-note":"",t.activeNote.Eb6?"active-note":""],attrs:{id:"Eb6"}}),n("div",{class:["white","e",t.notesWaitingList[0].includes("E6")?"hl-note":"",t.activeNote.E6?"active-note":""],attrs:{id:"E6"}}),n("div",{class:["white","f",t.notesWaitingList[0].includes("F6")?"hl-note":"",t.activeNote.F6?"active-note":""],attrs:{id:"F6"}})]),n("div",{class:["keyshadow",8===t.tutorSession?"tutorial-highlight":""]}),n("div",{staticClass:"scroll-container"}),n("div",{staticClass:"semi-piano-roll",class:[5===t.tutorSession||6===t.tutorSession?"tutorial-highlight":""],on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[n("swiper",{ref:"pianoRoll",attrs:{options:t.pianoRollSwiperOption}},[t._l(t.PARTNUM,function(e){return n("swiper-slide",[n("div",{staticClass:"current-piano-roll"},[n("svg",{style:{height:"90%",padding:t.timelineConfig.dotSize/2+"px 0"}},[n("defs",[n("filter",{attrs:{id:"glowing",height:"400%",width:"130%",x:"-10%",y:"-130%"}},[n("feMorphology",{attrs:{operator:"dilate",radius:"1",in:"SourceAlpha",result:"thicken"}}),n("feGaussianBlur",{attrs:{in:"thicken",stdDeviation:"2",result:"blurred"}}),n("feFlood",{attrs:{"flood-color":"rgb(200,200,255)",result:"glowColor"}}),n("feComposite",{attrs:{in:"glowColor",in2:"blurred",operator:"in",result:"softGlow_colored"}}),n("feMerge",[n("feMergeNode",{attrs:{in:"softGlow_colored"}}),n("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)]),t._l(t.recordPart,function(o,i){return t.activePartIndex===t.PARTNUM-e?n("rect",{attrs:{x:2,y:100*o.time/20-.2+"%",width:t.mapNoteMidiToLength(o.note),height:"3",rx:"2",ry:"2",fill:t.mapNoteTimeToColor(o.time),filter:"url(#glowing)"},on:{click:function(e){return t.removeNoteInRecordPart(i)}}}):t._e()}),t._l(t.recordParts[t.PARTNUM-e],function(o,i){return n("rect",{attrs:{x:2,y:100*o.time/20-.2+"%",width:t.mapNoteMidiToLength(o.note),height:"3",rx:"2",ry:"2",fill:t.activePartIndex===t.PARTNUM-e?t.mapNoteTimeToColor(o.time):"rgb(120,120,120)",filter:t.activePartIndex===t.PARTNUM-e?"url(#glowing)":""},on:{click:function(o){return t.removeNoteInRecordPart(i,t.PARTNUM-e)}}})})],2),n("div",{staticClass:"temp",on:{click:function(o){return t.clearRecordPart(t.PARTNUM-e)}}})])])}),n("swiper-slide"),n("swiper-slide")],2)],1),n("div",{staticClass:"g-controller"},[n("div",{staticClass:"rotate",class:[4===t.tutorSession?"tutorial-highlight":""],attrs:{id:"menuicon"},on:{touchstart:function(e){t.menuAppear=!0}}}),t.fuckReady?n("vue-slider",t._b({ref:"timeline",class:[2===t.tutorSession?"tutorial-highlight":""],attrs:{show:"portrait"===t.screenOrientation},on:{callback:t.adjustTimeline},model:{value:t.vuetimeline,callback:function(e){t.vuetimeline=e},expression:"vuetimeline"}},"vue-slider",t.timelineConfig,!1)):t._e(),n("div",{staticClass:"btnContainer",class:[3===t.tutorSession?"tutorial-highlight":""]},[n("div",{class:[t.playing?"pauseBtn":"playBtn","rotate"],on:{click:t.toggleReplay}})])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.bouncing,expression:"bouncing"}],staticClass:"mask"},[n("p",[t._v("存储中...")])]),n("transition",{attrs:{name:"slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuAppear,expression:"menuAppear"}],staticClass:"alert-mask",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.menuAppear=!1}}},[n("div",{staticClass:"menu"},[n("div",{on:{touchstart:t.finishProject}},[t._v("保存作品")]),n("div",{on:{touchstart:t.redoProject}},[t._v("再来一遍")]),n("div",{on:{touchstart:t.showPickSong}},[t._v("重选歌曲")]),n("div",{on:{touchstart:function(e){t.menuAppear=!1}}},[t._v("退出")])])])]),n("transition",{attrs:{name:"slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.songListAppear,expression:"songListAppear"}],staticClass:"alert-mask",on:{touchstart:function(e){if(e.target!==e.currentTarget)return null;t.songListAppear=!1}}},[n("div",{staticClass:"picker"},t._l(t.KeyDemo.works,function(e,o){return n("div",{key:e.name,on:{touchstart:function(e){return t.pickSong(o)}}},[t._v(t._s(e.name))])}),0)])]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.hintToastAppear,expression:"hintToastAppear"}],staticClass:"hintToast"},[1==t.hintToastType?n("div",[t._v("没有在20s完成，再试一次吧～")]):t._e(),2==t.hintToastType?n("div",[n("p",[t._v("\n          好棒～点击左上角菜单栏\n          "),n("span",[n("img",{staticStyle:{width:".5rem",height:".5rem","vertical-align":"middle",position:"relative",bottom:".05rem"},attrs:{src:o("2c36"),alt:""}})]),t._v(" 选择保存作品\n        ")]),t._v("不满意还可以再来一遍\n      ")]):t._e()])]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.alertAppear,expression:"alertAppear"}],staticClass:"alert-mask"},[n("div",{staticClass:"mb-dialog"},[n("div",{staticClass:"title"},[t._v("超了"+t._s(t.teethNum-18)+"个音符，目前无法做成实体八音盒，是否继续上传")]),n("div",{staticClass:"btns"},[n("span",{staticClass:"btn cancel",on:{click:t.adjustWork}},[t._v("再调整")]),n("span",{staticClass:"btn confirm",on:{click:t.bounceAnyway}},[t._v("任性上传")])])])])])],1)},mn=[],wn=(o("2fdb"),[{name:"世上只有妈妈好",notes:[["A5"],["G5"],["E5"],["G5"],["C6"],["A5"],["G5"],["A5"],["E5"],["G5"],["A5"],["G5"],["E5"],["D5"],["C5"],["A4"],["G5"],["E5"],["D5"],["D5"],["E5"],["G5"],["G5"],["A5"],["E5"],["D5"],["C5"],["G5"],["E5"],["D5"],["C5"],["A4"],["C5"],["G4"]]},{name:"听妈妈的话",notes:[["E5"],["Ab4","D5"],["F5"],["A4","E5"],["C5"],["D4","C5"],["G5"],["G5"],["F5"],["G4","D5"],["E5"],["Ab4","D5"],["F5"],["A4","E5"],["C5"],["D4","A4"],["C5"],["G4","C5"],["D5"],["C4","C5"]]},{name:"真的爱你",notes:[["G4"],["C5"],["D5"],["E5"],["E5"],["E5"],["D5"],["C5"],["D5"],["D5"],["E5"],["D5"],["C5"],["B4"],["C5"],["B4"],["A4"],["C5"],["D5"],["C4","E5"],["E5"],["E5"],["D5"],["C5"],["G4","D5"],["D5"],["D5"],["C5"],["B4"],["C4","C5"]]},{name:"鲁冰花",notes:[["A5"],["A5"],["A5"],["E5"],["A5"],["Gb5"],["E5"],["D5"],["Gb5"],["E5"],["C5"],["C5"],["D5"],["E5"],["G5"],["A5"],["Gb5"],["E5"],["A5"],["A5"],["C6"],["A5"],["G5"],["G5"],["E5"],["G5"],["G5"],["E5"],["D5"],["E5"],["D5"],["D5"],["B4"],["A4"],["G4"],["B4"],["A4"]]}]),An=o("8cc4"),kn={},bn=new An.Sampler({C4:"C4.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",A4:"A4.[mp3|ogg]",C5:"C5.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A5:"A5.[mp3|ogg]",C6:"C6.[mp3|ogg]"},{release:1,baseUrl:"//cnbj1.fds.api.xiaomi.com/mbox/audio/"}).toMaster(),yn=(document.documentElement.getBoundingClientRect().width,Math.max(document.documentElement.clientHeight,window.innerHeight||0),[]),Cn=[],Tn=0,xn=!0,On=0,En=0,Sn=.1,Pn={components:{swiper:et["swiper"],swiperSlide:et["swiperSlide"],vueSlider:zt.a},props:["screenOrientation"],data:function(){return{portraitMode:!0,activeNote:{},recordPart:[],recordParts:[],playing:!1,generalControllerShow:!1,activeSwiperIndex:3,lastActiveSwiperIndex:2,vuetimeline:0,showExtendBtns:!1,alertAppear:!1,bouncing:!1,tutorSession:0,handClass:"",tutorClass:"",menuAppear:!1,fuckReady:!1,teethNum:18,KeyDemo:n,songListAppear:!1,firstTimeSucceed:!0,notesWaitingList:[[]],currentSongIndex:-1,hintToastType:-1,hintToastAppear:!1,timelineConfig:{value:0,width:8,padding:"0",dotSize:20,eventType:"auto",min:0,max:2e3,interval:1,disabled:!1,show:!0,tooltip:"always",piecewise:!1,reverse:!0,style:{display:"inline-block"},class:"star-slider",direction:"vertical",speed:Sn,bgStyle:{backgroundColor:"rgb(110,113,158)",boxShadow:"inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)"},tooltipDir:"left",tooltipStyle:{backgroundColor:"rgb(69, 106, 255)",borderColor:"rgb(69, 106, 255)",transform:"rotate(90deg)",transformOrigin:"right",position:"relative",left:"-.2rem",top:"0.9rem"},formatter:function(t){return t?"".concat((t/100).toFixed(2),"s/20s"):"0.0s/20s"},processStyle:{backgroundColor:"rgb(69,106,255)"}}}},watch:{playing:function(t){var e=this;console.log("playing status",t),console.log("1",this.hintToastAppear),t?Ge=setInterval(function(){e.vuetimeline+=10,e.vuetimeline>=2e3&&(e.toggleReplay(),e.vuetimeline=0,e.currentSongIndex>=0&&e.notesWaitingList[0].length>0&&(e.$ga.event("KeyMaker","Song","unfinish"),e.hintToastType=1,e.hintToastAppear=!0,setTimeout(function(){e.redoProject()},800),setTimeout(function(){e.hintToastAppear=!1},5e3)))},1e3*Sn):clearInterval(Ge)},screenOrientation:function(){var t=this;console.log("update"),this.$nextTick(function(){return t.$refs.timeline.refresh()})}},computed:{swiper:function(){return this.$refs.pianoRoll.swiper},activePartIndex:function(){return this.PARTNUM-this.activeSwiperIndex-1},lastActivePartIndex:function(){return this.PARTNUM-this.lastActiveSwiperIndex-1}},methods:{load:function(){},toggleReplay:function(){console.log(1),this.playing=!this.playing,this.playing?(this.$ga.event("KeyMaker","Play","start"),this.vuetimeline>=2e3&&(this.vuetimeline=0),On=performance.now()-10*this.vuetimeline,console.log("播放开始"),this.confirmRecordPart(0),console.log("kokokoko"),Tn=performance.now(),console.log("activeOffsetTime".concat(10*this.vuetimeline)),An.Transport.start("+0.01",10*this.vuetimeline/1e3)):(this.$ga.event("KeyMaker","Play","stop"),console.log("播放停了"),An.Transport.stop(0))},handleNoteStart:function(t){var e=this,o=0;bn.triggerAttack(t),this.$set(this.activeNote,t,1),this.notesWaitingList[0].includes(t)&&(console.log(111),this.notesWaitingList[0]=this.notesWaitingList[0].filter(function(e){return e!=t})),0==this.notesWaitingList[0].length&&this.notesWaitingList.length>1&&this.notesWaitingList.shift(),0==this.notesWaitingList[0].length&&this.firstTimeSucceed&&this.currentSongIndex>=0&&(this.hintToastType=2,this.hintToastAppear=!0,setTimeout(function(){e.hintToastAppear=!1},5e3),this.firstTimeSucceed=!1),this.playing?o=performance.now()-On:(xn&&(Tn=performance.now(),En=10*this.vuetimeline,xn=!1),o=performance.now()-Tn+En,this.toggleReplay()),o<2e4?(this.vuetimeline=10*o/100,this.recordPart.push({note:t,time:+(o/1e3).toFixed(4)})):(this.vuetimeline=2e3,console.log("cannot record more than 20 seconds")),console.log(o)},handleNoteEnd:function(t){bn.triggerRelease(t),this.$set(this.activeNote,t,0)},touchNoteStartHandler:function(t){console.log(t.target.id),kn[t.changedTouches[0].identifier]=t.target.id,this.handleNoteStart(t.target.id)},touchNoteEndHandler:function(t){console.log(t.target.id),this.handleNoteEnd(t.target.id),this.handleNoteEnd(kn[t.changedTouches[0].identifier])},confirmRecordPart:function(t){if(this.recordPart.length){if(console.log("processing track: ",this.lastActivePartIndex),this.recordParts[this.lastActivePartIndex]&&this.recordParts[this.lastActivePartIndex].length&&(this.recordPart=this.recordPart.concat(this.recordParts[this.lastActivePartIndex])),yn[this.lastActivePartIndex])try{yn[this.lastActivePartIndex].dispose()}catch(e){}yn[this.lastActivePartIndex]=new An.Part(function(t,e){bn.triggerAttackRelease(e.note,"4n",t)},this.recordPart).start(0),this.recordParts[this.lastActivePartIndex]=this.recordPart,this.recordPart=[]}else console.log("啥也没录");this.lastActiveSwiperIndex=this.activeSwiperIndex,t&&(this.vuetimeline=0,Tn=0),xn=!0},clearRecordPart:function(t){if(this.$ga.event("KeyMaker","Track","clearAll",t),console.log("cleaning track ".concat(t)),this.activePartIndex===t&&(this.recordPart=[],this.vuetimeline=0,xn=!0,this.playing=!1,An.Transport.stop(0)),this.recordParts[t]&&this.recordParts[t].length){if(this.$set(this.recordParts,t,[]),yn[t]){try{yn[t].dispose()}catch(e){}yn[t]=void 0}}else console.log("track ".concat(t," has no content"))},checkBouncibility:function(){return this.confirmRecordPart(0),Cn=[],yn.length?(yn.forEach(function(t){t&&t._events.length&&t._events[0].value&&t._events.forEach(function(t){Cn.push(t.value)})}),Cn.sort(function(t,e){return 0+t.time-e.time}),wt(Cn)):0},finishProject:function(){this.tutorSession>0||(this.$ga.event("KeyMaker","Finish","tap"),this.teethNum=this.checkBouncibility(),this.teethNum<=18?this.bounceProject():(this.$ga.event("KeyMaker","Finish","overLimit"),this.alertAppear=!0))},showPickSong:function(){this.$ga.event("KeyMaker","ChooseSong"),this.menuAppear=!1,this.songListAppear=!0},pickSong:function(t){this.$ga.event("KeyMaker","ChooseSong","".concat(t)),this.clearRecordPart(0),this.clearRecordPart(1),this.clearRecordPart(2),this.firstTimeSucceed=!0,this.currentSongIndex=t,this.notesWaitingList=Object(at["a"])(wn[t].notes),console.log(h()(this.notesWaitingList)),this.menuAppear=!1,this.songListAppear=!1},redoProject:function(){this.$ga.event("KeyMaker","Redo"),this.currentSongIndex>=0&&this.pickSong(this.currentSongIndex),this.menuAppear=!1},bounceProject:function(){var t=this;this.confirmRecordPart(0),console.log(this),console.log(yn),Cn=[],yn.length?(yn.forEach(function(t){t&&t._events.length&&t._events[0].value&&t._events.forEach(function(t){Cn.push(t.value)})}),Cn.sort(function(t,e){return 0+t.time-e.time}),this.bouncing=!0,this.$store.dispatch("BOUNCE_PROJECT",{record:Cn,info:{title:"尚未起名",content:"",cover:""}}).then(function(e){console.log("successfully bounced"),t.bouncing=!1,t.$toast("作品已为您存储"),t.$router.push({path:"/new-music-box-viewer",query:{id:e}})}).catch(function(e){t.bouncing=!1,t.$toast("非常抱歉，上传作品失败了")})):this.$toast("什么都没录呢")},mapNoteTimeToColor:function(t){return At(t)},mapNoteMidiToLength:function(t){return kt(t)},adjustTimeline:function(t){this.playing?(console.log("ccccccccc"),this.toggleReplay()):xn=!0},onMiniKeyboardScroll:function(t){console.log(t.touches[0].clientY)},onMiniKeyboardStart:function(t){console.log(t)},removeNoteInRecordPart:function(t,e){this.$ga.event("KeyMaker","Track","clearNote",e||0),void 0===e?this.recordPart.splice(t,1):(this.recordParts[e].splice(t,1),yn[e].dispose(),yn[e]=new An.Part(function(t,e){bn.triggerAttackRelease(e.note,"4n",t)},this.recordParts[e]).start(0))},keng:function(t){console.log(t);for(var e=0;e<=t.changedTouches.length-1;e++){var o=document.elementFromPoint(t.changedTouches[e].clientX,t.changedTouches[e].clientY);o&&o.classList&&(o.classList.contains("white")||o.classList.contains("black"))?kn[t.changedTouches[e].identifier]&&kn[t.changedTouches[e].identifier]!=o.getAttribute("id")?(console.log(kn),this.handleNoteStart(o.getAttribute("id")),this.handleNoteEnd(kn[t.changedTouches[e].identifier]),kn[t.changedTouches[e].identifier]=o.getAttribute("id")):kn[t.changedTouches[e].identifier]?console.log(3):(console.log(2),this.handleNoteStart(o.getAttribute("id")),kn[t.changedTouches[e].identifier]=o.getAttribute("id")):(console.log("外边"),kn[t.changedTouches[e].identifier]&&this.handleNoteEnd(kn[t.changedTouches[e].identifier]),kn[t.changedTouches[e].identifier]=void 0)}},adjustWork:function(){this.$ga.event("KeyMaker","OverLimit","adjust"),this.alertAppear=!1},bounceAnyway:function(){this.$ga.event("KeyMaker","OverLimit","bounce"),this.bounceProject()}},created:function(){var t=this;setTimeout(function(){t.timelineConfig.height="".concat(.9*(window.innerHeight-50),"px"),t.fuckReady=!0},100),An.Transport.cancel(),yn=[],Cn=[];var e=document.documentElement;window.rem=e.getBoundingClientRect().width/10,e.style.fontSize="".concat(window.rem,"px"),this.PARTNUM=3,this.pianoRollSwiperOption={initialSlide:this.PARTNUM,slidesPerView:3,on:{transitionEnd:function(e){console.log("3",this.activeIndex),t.activeSwiperIndex=this.activeIndex,t.$ga.event("KeyMaker","Track","change",this.activeIndex),t.confirmRecordPart(!xn)}}},this.songListAppear=!0,this.$toast("请选择一首歌");var o=/micromessenger/.test(navigator.userAgent.toLowerCase());o&&(Rt().then(function(){Wt({title:"哎八音-键盘编辑器",desc:"寻找你自己的八音盒",fullPath:"".concat(location.origin).concat(location.pathname,"#/newbie-maker"),imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),ot("code")||v["get"]("serviceToken")?w(ot("code")).then(function(t){t.data.errcode>=2e4&&(v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/newbie-maker")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))),console.log("get user info success",t.data.data)}).catch(function(t){v["remove"]("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/newbie-maker")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=".concat(encodeURIComponent("".concat(location.origin+location.pathname,"#/newbie-maker")),"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")))},beforeRouteLeave:function(t,e,o){this.clearRecordPart(0),this.clearRecordPart(1),this.clearRecordPart(2),bt(yn),o()},mounted:function(){},updated:function(){}},In=Pn,Rn=(o("c24a"),Object(G["a"])(In,gn,mn,!1,null,"5cd878ab",null)),Wn=Rn.exports;i["default"].use(z["a"]);var Nn=new z["a"]({routes:[{path:"/newbie-maker",name:"NB",component:Wn},{path:"/square",name:"Square",component:Ht},{path:"/new-music-box-maker",name:"NMBMaker",component:ce},{path:"/new-music-box-roll",name:"MBRoll",component:no},{path:"/new-music-box-viewer",name:"NMBViewer",component:be},{path:"/product-list",name:"productList",component:Do},{path:"/order-confirm",name:"OrderConfirm",component:Go},{path:"/musixiser",name:"MusixiserDetail",component:xo},{path:"/my-fav",name:"MyFav",component:Ro},{path:"/rank-board",name:"RankBoard",component:vn},{path:"/my-orders",name:"MyOrders",component:en}]});function Bn(t){var e="",o="string"===typeof t?+new Date(t.replace(/-/g,"/")):t,n=6e4,i=60*n,a=24*i,s=30*a,r=12*s,c=(new Date).getTime(),l=c-o;if(!(l<0)){var u=l/r,d=l/s,p=l/(7*a),h=l/a,f=l/i,v=l/n;return e=u>=1?dt()(u)+"年前":d>=1?dt()(d)+"月前":p>=1?dt()(p)+"周前":h>=1?dt()(h)+"天前":f>=1?dt()(f)+"小时前":v>=1?dt()(v)+"分钟前":"刚刚",e}}o("7f7f");var Mn={bind:function(t,e,o){if("function"!==typeof e.value){var n=o.context.name,i="[longpress:] provided expression '".concat(e.expression,"' is not a function, but has to be");n&&(i+="Found in component '".concat(n,"' ")),console.warn(i)}var a=null,s=function(t){"click"===t.type&&0!==t.button||null===a&&(a=setTimeout(function(){c()},600))},r=function(t){null!==a&&(clearTimeout(a),a=null)},c=function(t){e.value(t)};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s),t.addEventListener("click",r),t.addEventListener("mouseout",r),t.addEventListener("touchend",r),t.addEventListener("touchcancel",r)}},_n=o("0284"),Dn=o.n(_n),jn=o("dc21"),Un=o("fde6");jn["a"]({dsn:"https://86039b25a68a419b85c64bd61c77f4e7@sentry.io/1455098",integrations:[new Un["Vue"]({Vue:i["default"],attachProps:!0})]}),i["default"].use(Dn.a,{id:"UA-138246971-1",router:Nn}),i["default"].use(r.a,{defaultType:"center",duration:2500,wordWrap:!1,width:"auto"}),i["default"].config.productionTip=!1,i["default"].filter("getDateDiff",Bn),i["default"].directive("longpress",Mn);var Ln=j();Object(a["sync"])(Ln,Nn),new i["default"]({el:"#app",router:Nn,store:Ln,template:"<App/>",components:{App:K}})},"57d1":function(t,e,o){},"62a7":function(t,e,o){},6368:function(t,e){t.exports="data:image/png;base64,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"},"64a9":function(t,e,o){},6557:function(t,e,o){},"745c":function(t,e,o){"use strict";var n=o("4b8b"),i=o.n(n);i.a},"8c15":function(t,e,o){},"95f2":function(t,e,o){"use strict";var n=o("57d1"),i=o.n(n);i.a},"99dc":function(t,e,o){"use strict";var n=o("d517"),i=o.n(n);i.a},"9a4e":function(t,e,o){"use strict";var n=o("a114"),i=o.n(n);i.a},a114:function(t,e,o){},a3d1:function(t,e,o){},a431:function(t,e,o){"use strict";var n=o("2727"),i=o.n(n);i.a},b168:function(t,e,o){"use strict";var n=o("3e80"),i=o.n(n);i.a},bad2:function(t,e,o){"use strict";var n=o("6557"),i=o.n(n);i.a},bd1e:function(t,e){t.exports="data:image/png;base64,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"},bda5:function(t,e,o){},bdac:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAA4ZJREFUWAnFl8trU0EUh5tHY1vRliqCohIK0jQhERV8QHXZvaAo2nZjS4sgKvh/qAtBcdudS93oRrEVraiVpiF9WFJMwUArhSQ25tX4TWDi3OvNbW5yTQeGOa8555czZ+aetLTYMCKRSDfzkg2uWpx2OCmVSsNbW1u37fBlF6BRQPWTpUCjoBoGBIh+wPgFELI0tuOAADEqQQBsKB6Pt0u+nrWhDMVisS5AXFYCdyWTySsKb5lsCFA6nR4ioiYjxWKxoWNrCBDZqRyXkoqz4XA4pPCWyLoBzc7OniNSsEq0urNUNyCHw2GUHYlvMJFI7JaMlbUuQMvLy50cV9XiRbd3bW3tqhUg0rYuQJlM5joOOqSTKut4Fbmp2CG+Qbwl68Fg8I2ppaKkaL+SheOKyJB0u92n/H7/F0OlTigeWG7oQSeO3czXBJmZm5sbRuHR2WpY9KdrASM2FQoF0+LGj5O4F7kg7wEz6XQ62x1LS0uHOYK4jEqxJpiPWltbH/f29q5LuVxx8BRHI5I3W/GTxs8hn8+XUu14UNtSqdQw+nv4OiZ1Ho/H5xAMCGMsXkHLgfFv6AlQPwgEAhEhn5+f35PL5X5AWrlB46FQ6InYT3a7AXCTErkFe0DIlLFB2exzCwHBpzD0KsoW+Db4EVI5QlZeAex+Pp8XNlbACJdj0Wj0Jcd3F183TPZPg6NUBkTwSQwHxW6jgX4AZwPoikb6bWQn+CHfsHGZ2QHmg9CXr73L5ZoyM1Z0pk4VOz257T5OYFpsKgPiakZB+FPvpVm8OCpO4C8gIWC8axYAfRxiL1L4G0JeeakBJepop0a5fkTwCiALdWQ7aJJRPi4NoL6+vs8IMrZHq8EhBf1vhkCZV5HW4Mcuk00uVVg6qxyZEOxQHX0ibsEQENVe63sk9ze86k9FkyHahcWGI1h0QP18VLdoAPG9MWtL1X220XxovaozDSAUR1Rlk2jNHwUNIGroeZNAVMIQ80WFgdAA4vl+RpE9VA3+Jy1iiZhqDA0goaBJukOhXYNcVQ1tpldFDBFL77fcMeqFghe9NQUneqRB0nqBddsWQuwzGUUy8ha96EIn6EJzRrZVAanGCwsL+2ldzwPsDE5PovMyj8LvUu0kjU0W+jszhs0M/DT98qRRjy73yLUmQNJYXQnkWFlZ6cxmsx30MuX/aHygN2nqf/X09CQBUVLta6X/ACwXZTQhUyKSAAAAAElFTkSuQmCC"},c24a:function(t,e,o){"use strict";var n=o("f965"),i=o.n(n);i.a},c7f0:function(t,e,o){"use strict";var n=o("11bd"),i=o.n(n);i.a},c820:function(t,e){t.exports="data:image/png;base64,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"},cbba:function(t,e,o){"use strict";var n=o("8c15"),i=o.n(n);i.a},cd7d:function(t,e,o){},ce5f:function(t,e,o){"use strict";var n=o("db71"),i=o.n(n);i.a},d216:function(t,e,o){"use strict";var n=o("0d7f"),i=o.n(n);i.a},d2b4:function(t,e,o){"use strict";var n=o("098e"),i=o.n(n);i.a},d462:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAcCAYAAAB/E6/TAAAABGdBTUEAALGPC/xhBQAAApFJREFUSA3Nlc9rE1EQx2deQls1gqg9VMWK4E8U7UUQChJqBUsFUepFCKZVe8jBk/4biuaHOSSrBD14URB6MJsuiIcqHkSQgFLwt0JAFOOPmM0b54Xsxk1C3NWN+CDsm/dmvp83u/MmAB7H3Vx6SM+mJj2GgfAa8MOsRoFkzGucJxARIRDOENABQ0tt8ALzBCpoqTGGbWSAMEme7BmIMzllixNMG4YRtO3fTFxnZFxPrwagw009Gqo9L7ouCtegWqUWAYK+JohnkmYddhfDNYhINl9bQ1AVReFafLiLvr3lCpTPJEY5m612VHMioCJcFYXIZxOX8lp6ZzO2fYYIbdlYXpJk16KYzyW3FDLxi4JPug1k9bGejd8pZJIH63fFUuGnoWkruAimfllqna7pVBT61ct79UzipqxSUSKOqPK8xz++HzBOIMf1bLJY0BLnBSzNhaPR7zX57TgBLGlVd9hEp9m+pQ45fyU5KQnOkWmO1n04GBAXkIX384fOOwKVgVBCgBTHHuGMdrTtOxckCnGWW9MMH3i7c0txcAqNG4mQWYaPQBRodfDL7kNcL8LHYmU++SO/RDvovN03HXtllbf6Tj0ZXLH3lfA/AIkmKID1yutNRgQLdkbhaOw9p7joOwmxtioYemiDGgDfvxMSPNkViXxxghCe+p8R1LNxggiO+g3iprDZ0rSqju8rvrMWfXsSfLK0bJAIBM9w23lpbfz1k7Xqmg0hGzR2YnZxWWhghG/WBe5OX/8cxLGsMdAvditNS4e7T/tQ/U+W4RC/Y264sIedhvnfdHm7p+q9+Jn9XvD1eMB+ugjBbdXWWn07glqdlP1sbq7/9Yc3g2bNHFR2MBAsrVu5trRpYqKi7P9m/AQsKeY4+7W32gAAAABJRU5ErkJggg=="},d517:function(t,e,o){},d9a3:function(t,e){t.exports="data:image/png;base64,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"},db71:function(t,e,o){},dd12:function(t,e,o){"use strict";var n=o("a3d1"),i=o.n(n);i.a},f965:function(t,e,o){}});
//# sourceMappingURL=app.d34ed7ea.js.map