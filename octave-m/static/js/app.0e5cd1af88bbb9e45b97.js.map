{"version":3,"sources":["webpack:///static/js/app.0e5cd1af88bbb9e45b97.js","webpack:///./src/_common/js/api.js","webpack:///./src/App.vue","webpack:///./src/_common/js/util.js","webpack:///./src/components/HelloWorld.vue","webpack:///./src/_common/js/magic.js","webpack:///./src/components/NMBMaker.vue","webpack:///./src/components/common/countButton.vue","webpack:///./src/components/NMBViewer.vue","webpack:///./src/components/common/pieProgress.vue","webpack:///./src/components/MBRollMaker.vue","webpack:///./src/components/MusixiserDetail.vue","webpack:///./src/components/MyFav.vue","webpack:///./src/components/Recommend.vue","webpack:///./src/store/actions.js","webpack:///./src/store/mutations.js","webpack:///./src/store/getters.js","webpack:///./src/store/index.js","webpack:///src/App.vue","webpack:///./src/App.vue?0b48","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?466c","webpack:///./src/_common/js/wx_share.js","webpack:///src/components/NMBMaker.vue","webpack:///./src/components/NMBMaker.vue?0a97","webpack:///src/components/common/countButton.vue","webpack:///./src/components/common/countButton.vue?04f4","webpack:///src/components/NMBViewer.vue","webpack:///./src/components/NMBViewer.vue?c2af","webpack:///src/components/common/pieProgress.vue","webpack:///./src/components/common/pieProgress.vue?643a","webpack:///src/components/MBRollMaker.vue","webpack:///./src/components/MBRollMaker.vue?a944","webpack:///src/components/MusixiserDetail.vue","webpack:///./src/components/MusixiserDetail.vue?743c","webpack:///src/components/MyFav.vue","webpack:///./src/components/MyFav.vue?f469","webpack:///src/components/Recommend.vue","webpack:///./src/components/Recommend.vue?5086","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/assets/oops.png"],"names":["webpackJsonp","2pCB","module","exports","DAU5","Dkm+","J8FY","L6Nk","MCCq","NHnr","__webpack_exports__","__webpack_require__","getUserInfo","wxcode","tokenInCookie","js_cookie","reqConfig","headers","Authorization","axios","get","promise_default","a","resolve","reject","post","then","res","data","errcode","serviceToken","id_token","expires","catch","err","uploadRecord","record","info","_this","this","midi","MidiConvert","create","track","patch","note","formReqConfig","Content-Type","processData","binaryString","encode","bytes","Uint8Array","length","i","charCodeAt","blob","Blob","type","reader","FileReader","onload","_ref","asyncToGenerator_default","regenerator_default","mark","_callee","event","fd","postFix","workURL","param","wrap","_context","prev","next","FormData","append","target","result","sent","t0","console","log","extends_default","url","abrupt","stringify_default","stop","_x","apply","arguments","readAsDataURL","fetchMbox","id","fetchMusixiser","fetchWorksFromMusixiser","page","fetchFavWorks","toggleFavSong","_ref2","workId","status","api_updateWorkTitle","_ref3","title","put","getRecommendations","createOrder","_ref4","pid","wid","amount","address","payOrder","_ref5","orderId","injectStyle","ssrContext","getUrlParam","key","reg","RegExp","match","location","search","HelloWorld_injectStyle","RealMagic","items","tasksObj","forEach","item","itemNoteFreq","parseInt","magic_Tone","Frequency","toFrequency","push","time","taskTypes","keys_default","taskTimeArrays","values_default","machines","groups","timeArray","final","j","test","allPreviousOccupied","successFound","counter","SAME_NOTE_INTERVAL","indexOf","concat","toConsumableArray_default","set_default","Math","max","group","index","count","lastMachine","magic_mapNoteTimeToColor","COLOR1","COLOR2","COLOR3","rgb","floor","magic_mapNoteMidiToLength","noteName","toMidi","clearTone","parts","part","dispose","e","musicPreview","preview","start","Transport","state","oncePlayed","mbox","triggerAttack","Part","value","triggerAttackRelease","loop","loopEnd","NMBMaker_injectStyle","countButton_injectStyle","NMBViewer_injectStyle","pieProgress_injectStyle","MBRollMaker_injectStyle","MusixiserDetail_injectStyle","MyFav_injectStyle","Recommend_injectStyle","Object","defineProperty","vue_esm","vuex_router_sync","lib","lib_default","n","vuex_esm","promise","regenerator","stringify","helpers_extends","asyncToGenerator","interceptors","response","use","alert","resmsg","Accept","actions","BOUNCE_PROJECT","commit","FETCH_MBOX","project","userId","musixiser","userVO","load","tracks","notes","FETCH_MUSIXISER","_ref6","musixiserInfo","FETCH_WORKS_FROM_MUSIXISER","_ref7","_ref8","works","musixiserWorksObj","FETCH_FAV_WORKS","_ref9","_ref10","favWorksObj","mutations","SET_USER_INFO","activeType","SET_WORK_INFO","ids","lists","SET_MUSIXISER_INFO","set","SET_BOUNCE_PROJECT","recordProject","SET_ID_PROJECT","recordProjectInfo","SET_MUSIXISER","PUSH_MUSIXISER_WORKS","current","content","list","total","size","PUSH_FAV_WORKS","getters","activeIds","itemsPerPage","Number","route","params","end","slice","activeItems","map","filter","_","App","name","transitionName","beforeRouteUpdate","to","from","render","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","esExports","selectortype_template_index_0_src_App","normalizeComponent","__vue_styles__","Component","src_App","vue_router_esm","HelloWorld","msg","methods","redirectTo","path","$router","created","docElem","document","documentElement","window","rem","getBoundingClientRect","width","style","fontSize","navigator","userAgent","toLowerCase","replace","realname","HelloWorld_render","staticClass","_v","on","touchstart","$event","HelloWorld_staticRenderFns","HelloWorld_esExports","components_HelloWorld","HelloWorld_normalizeComponent","HelloWorld___vue_styles__","HelloWorld_Component","src_components_HelloWorld","toConsumableArray","values","keys","cancel","Sampler","B3","E4","G4","B4","C#5","E5","G5","B5","C#6","release","baseUrl","toMaster","node_modules_axios","axios_default","weixin_js_sdk","weixin_js_sdk_default","wx_share_reqConfig","wx_share_prepareShareConfig","encodeURIComponent","href","split","config","debug","appId","timestamp","nonceStr","signature","jsApiList","ready","wx_share_prepareShareContent","desc","fullPath","imgUrl","link","onMenuShareTimeline","success","onMenuShareAppMessage","wx_share_newMakeWxOrder","cb1","cb2","openAddress","signType","package","timeStamp","paySign","chooseWXPay","dist","dist_default","vue_awesome_swiper","NMBMaker_Tone","touchIdKeyMap","extendBtnsTimeout","piano","C4","D#4","F#4","A4","C5","D#5","F#5","A5","C6","tonepart","clientHeight","innerHeight","bouncepart","recordStartTime","isLinger","replayInterval","playOffset","lingerOffset","tutorOnceEnter","tutorTimeout","NMBMaker","components","swiper","swiperSlide","vueSlider","portraitMode","activeNote","recordPart","recordParts","playing","generalControllerShow","activeSwiperIndex","lastActiveSwiperIndex","vuetimeline","showExtendBtns","alertAppear","bouncing","tutorSession","handClass","tutorClass","timelineConfig","height","padding","dotSize","eventType","min","interval","disabled","show","tooltip","piecewise","reverse","display","class","direction","speed","bgStyle","backgroundColor","boxShadow","tooltipDir","tooltipStyle","borderColor","transform","transformOrigin","position","left","top","formatter","toFixed","processStyle","watch","val","setInterval","toggleReplay","PROGRESS_INTERVAL_TIME","clearInterval","computed","$refs","pianoRoll","activePartIndex","PARTNUM","lastActivePartIndex","performance","now","confirmRecordPart","handleNoteStart","noteId","noteTime","$set","handleNoteEnd","triggerRelease","touchNoteStartHandler","changedTouches","identifier","touchNoteEndHandler","shouldClearTime","clearRecordPart","trackNum","undefined","checkBouncibility","_events","noteInfo","sort","b","bounceProject","_this2","$store","dispatch","cover","$toast","query","mapNoteTimeToColor","t","mapNoteMidiToLength","m","adjustTimeline","onMiniKeyboardScroll","touches","clientY","onMiniKeyboardStart","keng","elementFromPoint","clientX","classList","contains","getAttribute","btnStart","_this3","setTimeout","btnEnd","clearTimeout","tutorStart","tutorProgress","_this4","clearTutorTimeout","slidePrev","slideNext","v","self","pianoRollSwiperOption","initialSlide","slidesPerView","transitionEnd","activeIndex","origin","pathname","beforeRouteLeave","mounted","updated","NMBMaker_render","touchmove","stopPropagation","preventDefault","touchend","_k","keyCode","Db4","D4","Eb4","F4","Gb4","Ab4","Bb4","Db5","D5","Eb5","F5","Gb5","Ab5","Bb5","Db6","D6","Eb6","E6","F6","ref","options","_l","x","y","operator","radius","in","stdDeviation","flood-color","in2","rx","ry","fill","_e","click","_b","callback","drag-end","model","$$v","expression","directives","rawName","NMBMaker_staticRenderFns","NMBMaker_esExports","components_NMBMaker","NMBMaker_normalizeComponent","NMBMaker___vue_styles__","NMBMaker_Component","src_components_NMBMaker","countButton","props","initCount","initActive","Boolean","iconImg","String","onClickCall","Function","default","currentActiveCount","currentActive","updateButton","countButton_render","_s","countButton_staticRenderFns","countButton_esExports","common_countButton","countButton_normalizeComponent","countButton___vue_styles__","countButton_Component","components_common_countButton","NMBViewer","loading","workIntroAppear","controlPanalAppear","titleUpdateAppear","favStatus","newWorkTitle","finalNewWorkTitle","projectInfo","loadMusicById","togglePlay","toggleFav","updateWorkTitle","redirectToMaker","redirectToMusixiser","purchaseItem","NMBViewer_render","_m","src","smallAvatar","alt","collectNum","placeholder","domProps","input","composing","NMBViewer_staticRenderFns","NMBViewer_esExports","components_NMBViewer","NMBViewer_normalizeComponent","NMBViewer___vue_styles__","NMBViewer_Component","src_components_NMBViewer","pieProgress","progress","pieProgress_render","background","pieProgress_staticRenderFns","pieProgress_esExports","common_pieProgress","pieProgress_normalizeComponent","pieProgress___vue_styles__","pieProgress_Component","components_common_pieProgress","vue_konva_min","vue_konva_min_default","Tone","musicScale","colors","last_i","last_j","cursorSchedules","aInterval","MBRollMaker_extendBtnsTimeout","synth","pulseOptions","oscillator","envelope","MBRollMaker","PolySynth","Synth","NOTE_CATEGORY","ONE_PAGE_NOTE_NUM","NOTE_NUM_PER_SECTOR","tempo","configKonva","configNoteRect","activeJ","sector","rectArray","currentTime","filters","intTime","floatTime","tempoLength","k","setupCanvas","stroke","strokeWidth","scheduleCursor","fullNoteNumWithinDur","ceil","TIME_PER_NOTE","FULL_NOTE_NUM","clear","scheduleRepeat","noteSeq","noteIndex","_scheduledEvents","setupRect","withinDur","handleTouchRect","newRow","handleMoveRect","fullJ","fullLastJ","newLastRow","startloop","stoploop","minusTempo","seconds","bpm","rampTo","addTempo","scrolldown","scrollup","_this5","toNote","_this6","submitProject","clearProject","_this7","MBRollMaker_render","staticStyle","align-items","justify-content","font-size","_f","MBRollMaker_staticRenderFns","MBRollMaker_esExports","components_MBRollMaker","MBRollMaker_normalizeComponent","MBRollMaker___vue_styles__","MBRollMaker_Component","src_components_MBRollMaker","vue_infinite_scroll","vue_infinite_scroll_default","MusixiserDetail","infiniteScroll","isMe","busy","loadMusixiserById","loadMore","redirectToWork","MusixiserDetail_render","infinite-scroll-disabled","infinite-scroll-distance","createdDate","MusixiserDetail_staticRenderFns","MusixiserDetail_esExports","components_MusixiserDetail","MusixiserDetail_normalizeComponent","MusixiserDetail___vue_styles__","MusixiserDetail_Component","src_components_MusixiserDetail","MyFav","MyFav_render","user","MyFav_staticRenderFns","MyFav_esExports","components_MyFav","MyFav_normalizeComponent","MyFav___vue_styles__","MyFav_Component","src_components_MyFav","Recommend","searching","recommendations","Recommend_render","owner","nickName","Recommend_staticRenderFns","Recommend_esExports","components_Recommend","Recommend_normalizeComponent","Recommend___vue_styles__","Recommend_Component","src_components_Recommend","router","routes","component","defaultType","duration","wordWrap","productionTip","store","Store","users","new","ask","job","myInfo","el","template","SpEx","p","XgS5","e195","h4Ia","h6L2","m/X3","v2ns"],"mappings":"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,EACAC,GAAA,EAEAC,IAAA,EACAC,MACAC,IvB0uCEC,YuBvuCFC,OAAA3B,GAAA,OACA4B,YAAA5B,GAAA,YAEA6B,UAAA9B,GAAArW,GvByuCEM,KAAM,WACJ,OACE8X,cuBxuCN,EvByuCMC,cACAC,cACAC,eACAC,SuBxuCN,EvByuCMC,uBuBxuCN,EvByuCMC,kBuBxuCN,EvByuCMC,sBAAuB,EACvBC,YuBxuCN,EvByuCMC,gBuBxuCN,EvByuCMC,auBxuCN,EvByuCMC,UuBxuCN,EvByuCMC,auBxuCN,EvByuCMC,UAAW,GACXC,WAAY,GACZC,gBACE/O,MuBxuCR,EvByuCQwH,MuBxuCR,EvByuCQwH,OuBxuCR,MvByuCQC,QuBxuCR,IvByuCQC,QuBxuCR,GvByuCQC,UuBxuCR,OvByuCQC,IuBxuCR,EvByuCQhR,IuBxuCR,IvByuCQiR,SuBxuCR,EvByuCQC,UuBxuCR,EvByuCQC,MuBxuCR,EvByuCQC,QuBxuCR,SvB0uCQC,WuBxuCR,EvByuCQC,SuBxuCR,EvByuCQjI,OACEkI,QuBvuCV,gBvByuCQC,MuBxuCR,cvByuCQC,UuBxuCR,WvByuCQC,MuBxxCR,GvByxCQC,SACEC,gBuBxuCV,mBvByuCUC,UuBvuCV,6CvByuCQC,WuBxuCR,OvByuCQC,cACEH,gBuBxuCV,oBvByuCUI,YuBxuCV,oBvByuCUC,UuBxuCV,gBvByuCUC,gBuBxuCV,QvByuCUC,SuBxuCV,WvByuCUC,KuBxuCV,SvByuCUC,IuBvuCV,UvByuCQC,UAAW,SAAmB1Q,GAC5B,MAAIA,IACMA,EAAQ,IAAI2Q,QuBxuChC,WAEA,YvB2uCQC,cACEZ,gBuBtuCV,sBvB4uCEa,OACEzC,QAAS,SAAiB0C,GuB1uC9B,GAAAla,GAAAC,IvB6uCM2C,SAAQC,IAAI,iBuB5uClBqX,GvB6uCUA,EAEFxD,GAAiByD,YAAY,WAC3Bna,EAAM4X,auB5uChB,EvB6uCc5X,EAAM4X,aAAe,MACvB5X,EuB5uCZoa,evB6uCYpa,EAAM4X,YuB5uClB,IvB8uCWyC,KAGHC,cuB5uCR5D,MvBgvCE6D,UACEtD,OAAQ,WACN,MAAO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","file":"static/js/app.0e5cd1af88bbb9e45b97.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"2pCB\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"DAU5\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"Dkm+\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"J8FY\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"L6Nk\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"MCCq\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"7+uW\");\n\n// EXTERNAL MODULE: ./node_modules/vuex-router-sync/index.js\nvar vuex_router_sync = __webpack_require__(\"9JMe\");\nvar vuex_router_sync_default = /*#__PURE__*/__webpack_require__.n(vuex_router_sync);\n\n// EXTERNAL MODULE: ./node_modules/vue2-toast/lib/toast.css\nvar toast = __webpack_require__(\"e195\");\nvar toast_default = /*#__PURE__*/__webpack_require__.n(toast);\n\n// EXTERNAL MODULE: ./node_modules/vue2-toast/lib/index.js\nvar lib = __webpack_require__(\"1BT9\");\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__(\"NYxO\");\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/promise.js\nvar promise = __webpack_require__(\"//Fk\");\nvar promise_default = /*#__PURE__*/__webpack_require__.n(promise);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"Xxa5\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/json/stringify.js\nvar stringify = __webpack_require__(\"mvHQ\");\nvar stringify_default = /*#__PURE__*/__webpack_require__.n(stringify);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/extends.js\nvar helpers_extends = __webpack_require__(\"Dd8w\");\nvar extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"exGp\");\nvar asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator);\n\n// EXTERNAL MODULE: ./node_modules/js-cookie/src/js.cookie.js\nvar js_cookie = __webpack_require__(\"lbHh\");\nvar js_cookie_default = /*#__PURE__*/__webpack_require__.n(js_cookie);\n\n// CONCATENATED MODULE: ./src/_common/js/api.js\n\n\n\n\n\n\n// import Vue from 'vue';\nvar axios = __webpack_require__(\"mtWM\");\n\naxios.interceptors.response.use(function (res) {\n  if (res.data.errcode !== '0') {\n    alert(res.data.resmsg);\n    return promise_default.a.reject(res);\n  }\n  return res;\n});\nvar reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\n// const tokenObj = { access_token: '' };\n// TODO:cause 500?????? just cuz this few lines???\n\nfunction getUserInfo(wxcode) {\n  var tokenInCookie = js_cookie[\"get\"]('serviceToken');\n  if (tokenInCookie) {\n    // alert('cookie used');\n    reqConfig.headers.Authorization = '' + tokenInCookie;\n    // tokenObj.access_token = tokenInCookie;\n    return axios.get('//api.octave-love.com/api/v1/user/getInfo', reqConfig);\n  } else if (!tokenInCookie && wxcode) {\n    // alert('no cookie');\n    return new promise_default.a(function (resolve, reject) {\n      axios.post('//api.octave-love.com/api/v1/user/oauth/wechat/callback?code=' + wxcode, '', reqConfig).then(function (res) {\n        if (res.data.errcode === 20001) {\n          reject(20001); // 相当于return了\n        }\n        var serviceToken = res.data.data.id_token;\n        reqConfig.headers.Authorization = '' + serviceToken;\n        // tokenObj.access_token = serviceToken;\n        js_cookie[\"set\"]('serviceToken', serviceToken, {\n          expires: 7\n        });\n        return axios.get('//api.octave-love.com/api/v1/user/getInfo', reqConfig);\n      }, function () {\n        reject();\n      }).then(function (res) {\n        resolve(res);\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  }\n  // !tokenInCookie&&!wxcode的情况在app.js里处理, 不会走到这里\n  return false;\n}\n\nfunction uploadRecord(record, info) {\n  var _this = this;\n\n  return new promise_default.a(function (resolve, reject) {\n    // create a new midi file\n    var midi = MidiConvert.create();\n    // add a track\n    midi.track()\n    // select an instrument by its MIDI patch number\n    .patch(32)\n    // chain note events: note, time, duration\n    .note(60, 0, 2).note(63, 1, 2).note(60, 2, 2);\n    // TODO: reduce midi here\n    // write the output\n    // fs.writeFileSync(\"output.mid\", midi.encode(), \"binary\")\n\n    var formReqConfig = {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        processData: false,\n        Authorization: reqConfig.headers.Authorization\n      }\n    };\n    // const blob = new Blob([JSON.stringify(record)]);\n    // const blob = new Blob([JSON.stringify(midi.encode())]);\n\n    var binaryString = midi.encode();\n    // write the output\n    var bytes = new Uint8Array(binaryString.length);\n    for (var i = 0; i < binaryString.length; i++) {\n      bytes[i] = binaryString.charCodeAt(i);\n    }\n    var blob = new Blob([bytes], {\n      type: 'audio/midi;charset=binary'\n    });\n    var reader = new FileReader();\n    reader.onload = function () {\n      var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee(event) {\n        var fd, postFix, workURL, param;\n        return regenerator_default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fd = new FormData();\n                // fd.append('fname', 'test.txt');\n\n                fd.append('fname', 'output.mid');\n                fd.append('data', event.target.result);\n                // fd.append('access_token', tokenObj.access_token);\n                postFix = '';\n                _context.prev = 4;\n                _context.next = 7;\n                return axios.post('//api.octave-love.com/api/v1/uploadAudio', fd, formReqConfig);\n\n              case 7:\n                postFix = _context.sent;\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context['catch'](4);\n\n                console.log(_context.t0);\n                reject(_context.t0);\n\n              case 14:\n                workURL = '' + postFix.data.data;\n                param = extends_default()({}, info, { // title,content.cover\n                  url: workURL\n                });\n\n                console.log(workURL);\n                return _context.abrupt('return', axios.post('//api.octave-love.com/api/v1/work/create', stringify_default()(param), reqConfig).then(function (res) {\n                  resolve(res.data.data);\n                }).catch(function (err) {\n                  reject(err);\n                }));\n\n              case 18:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this, [[4, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    reader.readAsDataURL(blob);\n  });\n  // trigger the read from the reader...\n}\n\nfunction fetchMbox(id) {\n  return axios.get('//api.octave-love.com/api/v1/work/detail/' + id, reqConfig);\n}\nfunction fetchMusixiser(id) {\n  return axios.get('//api.octave-love.com/api/v1/user/detail/' + id, reqConfig);\n}\nfunction fetchWorksFromMusixiser(id, page) {\n  return axios.get('//api.octave-love.com/api/v1/work/getListByUid/' + id + '?page=' + page + '&size=15', reqConfig);\n}\nfunction fetchFavWorks(id, page) {\n  return axios.get('//api.octave-love.com/api/v1/favorite/getWorkList/' + id + '?page=' + page + '&size=15', reqConfig);\n}\nfunction toggleFavSong(_ref2) {\n  var workId = _ref2.workId,\n      status = _ref2.status;\n\n  return axios.post('//api.octave-love.com/api/v1/favorite/create', stringify_default()({ workId: workId, status: status }), reqConfig);\n  // .then((res) => { console.log(res); })\n  // .catch((err) => { console.log(err); });\n}\nfunction api_updateWorkTitle(_ref3) {\n  var id = _ref3.id,\n      title = _ref3.title;\n\n  return axios.put('//api.octave-love.com/api/v1/work/updateWork/' + id, stringify_default()({ title: title }), reqConfig);\n  // .then((res) => { console.log(res); })\n  // .catch((err) => { console.log(err); });\n}\nfunction getRecommendations() {\n  return axios.post('//api.octave-love.com/api/v1/home', '', reqConfig);\n}\n\nfunction createOrder(_ref4) {\n  var pid = _ref4.pid,\n      wid = _ref4.wid,\n      amount = _ref4.amount,\n      address = _ref4.address;\n\n  return axios.post('//api.octave-love.com/api/v1/shop/orders/create', stringify_default()({ pid: pid, wid: wid, amount: amount, address: address }), reqConfig);\n}\n\nfunction payOrder(_ref5) {\n  var orderId = _ref5.orderId;\n\n  return axios.post('//api.octave-love.com/api/v1/shop/pay/unifiedorder?orderId=' + orderId, '', reqConfig);\n}\n// CONCATENATED MODULE: ./src/store/actions.js\n\n\n/*\n  getUserInfo\n  getWorkInfo\n  getMusixiserInfo\n  saveWork\n*/\n/* harmony default export */ var actions = ({\n  BOUNCE_PROJECT: function BOUNCE_PROJECT(_ref, _ref2) {\n    var commit = _ref.commit,\n        state = _ref.state;\n    var record = _ref2.record,\n        info = _ref2.info;\n    return uploadRecord(record, info);\n  },\n  // 存作品到后台\n  // uploadRecord(record, info).then(() => {\n  //   // commit('SET_BOUNCE_PROJECT', { record, info });\n  //   // 可以在组建直接跳链接，不commit 存store一道\n  // });\n\n  FETCH_MBOX: function FETCH_MBOX(_ref3, _ref4) {\n    var commit = _ref3.commit,\n        state = _ref3.state;\n    var id = _ref4.id;\n    return new promise_default.a(function (resolve, reject) {\n      // 获取某id的音乐盒音乐内容\n      fetchMbox(id).then(function (project) {\n        console.log('xxi', project.data.data.url);\n        console.log('xxi', project.data.data.userId);\n        fetchMusixiser(project.data.data.userId).then(function (musixiser) {\n          console.log('work musixiser info: ', musixiser.data.data);\n          project.data.data.userVO = musixiser.data.data; // 拼接口。\n          // load music notes/ midi notes\n          MidiConvert.load(project.data.data.url, function (midi) {\n            commit('SET_ID_PROJECT', {\n              record: midi.tracks[0].notes,\n              info: project.data.data\n            });\n            resolve();\n          });\n          // const request = new XMLHttpRequest();\n          // request.open('GET', project.data.data.url, true);\n          // request.send(null);\n          // request.onreadystatechange = function () {\n          //   if (request.readyState === 4 && request.status === 200) {\n          //     const type = request.getResponseHeader('Content-Type');\n          //     if (type.indexOf('text') !== -1) {\n          //       commit('SET_ID_PROJECT', {\n          //         record: JSON.parse(request.responseText),\n          //         info: project.data.data,\n          //       });\n          //       resolve();\n          //     }\n          //   }\n          // };\n        });\n      });\n    });\n  },\n  FETCH_MUSIXISER: function FETCH_MUSIXISER(_ref5, _ref6) {\n    var commit = _ref5.commit,\n        state = _ref5.state;\n    var id = _ref6.id;\n    return new promise_default.a(function (resolve, reject) {\n      // 获取某id的音乐盒音乐内容\n      fetchMusixiser(id).then(function (musixiser) {\n        console.log('musixiser info: ', musixiser.data.data);\n        commit('SET_MUSIXISER', { musixiserInfo: musixiser.data.data });\n        resolve();\n      });\n    });\n  },\n  FETCH_WORKS_FROM_MUSIXISER: function FETCH_WORKS_FROM_MUSIXISER(_ref7, _ref8) {\n    var commit = _ref7.commit,\n        state = _ref7.state;\n    var id = _ref8.id,\n        page = _ref8.page;\n    return new promise_default.a(function (resolve, reject) {\n      // 获取某id的音乐盒音乐内容\n      fetchWorksFromMusixiser(id, page).then(function (works) {\n        console.log('works list: ', works.data.data);\n        commit('PUSH_MUSIXISER_WORKS', { musixiserWorksObj: works.data.data });\n        resolve();\n      });\n    });\n  },\n  FETCH_FAV_WORKS: function FETCH_FAV_WORKS(_ref9, _ref10) {\n    var commit = _ref9.commit,\n        state = _ref9.state;\n    var id = _ref10.id,\n        page = _ref10.page;\n    return new promise_default.a(function (resolve, reject) {\n      // 获取某id的音乐盒音乐内容\n      fetchFavWorks(id, page).then(function (works) {\n        console.log('works list: ', works.data.data);\n        commit('PUSH_FAV_WORKS', { favWorksObj: works.data.data });\n        resolve();\n      });\n    });\n  }\n  //   // ensure data for rendering given list type\n  //   FETCH_LIST_DATA: ({ commit, dispatch, state }, { type }) => {\n  //     commit('SET_ACTIVE_TYPE', { type });\n  //     return fetchIdsByType(type)\n  //       .then(ids => commit('SET_LIST', { type, ids }))\n  //       .then(() => dispatch('ENSURE_ACTIVE_ITEMS'));\n  //   },\n  //\n  //   // ensure all active items are fetched\n  //   ENSURE_ACTIVE_ITEMS: ({ dispatch, getters }) => dispatch('FETCH_ITEMS', {\n  //     ids: getters.activeIds,\n  //   }),\n  //\n  //   FETCH_ITEMS: ({ commit, state }, { ids }) => {\n  //     // on the client, the store itself serves as a cache.\n  //     // only fetch items that we do not already have, or has expired (3 minutes)\n  //     const now = Date.now();\n  //     ids = ids.filter((id) => {\n  //       const item = state.items[id];\n  //       if (!item) {\n  //         return true;\n  //       }\n  //       if (now - item.__lastUpdated > 1000 * 60 * 3) {\n  //         return true;\n  //       }\n  //       return false;\n  //     });\n  //     if (ids.length) {\n  //       return fetchItems(ids).then(items => commit('SET_ITEMS', { items }));\n  //     }\n  //     return Promise.resolve();\n  //   },\n  //\n  //   FETCH_USER: ({ commit, state }, { id }) => (state.users[id]\n  //       ? Promise.resolve(state.users[id])\n  //       : fetchUser(id).then(user => commit('SET_USER', { id, user }))),\n});\n// CONCATENATED MODULE: ./src/store/mutations.js\n\n\n/* harmony default export */ var mutations = ({\n  SET_USER_INFO: function SET_USER_INFO(state, _ref) {\n    var type = _ref.type;\n    // 个人信息\n    state.activeType = type;\n  },\n\n  SET_WORK_INFO: function SET_WORK_INFO(state, _ref2) {\n    var type = _ref2.type,\n        ids = _ref2.ids;\n    // 作品详情\n    state.lists[type] = ids;\n  },\n\n  SET_MUSIXISER_INFO: function SET_MUSIXISER_INFO(state, _ref3) {\n    var items = _ref3.items;\n    // 作者信息\n    items.forEach(function (item) {\n      if (item) {\n        vue_esm[\"a\" /* default */].set(state.items, item.id, item);\n      }\n    });\n  },\n  SET_BOUNCE_PROJECT: function SET_BOUNCE_PROJECT(state, _ref4) {\n    var record = _ref4.record;\n    // 储存录制信息\n    state.recordProject = record;\n  },\n  SET_ID_PROJECT: function SET_ID_PROJECT(state, _ref5) {\n    var record = _ref5.record,\n        info = _ref5.info;\n    // 储存录制信息\n    state.recordProject = record; // this is the music itself\n    state.recordProjectInfo = info; // this includes all the relative info\n  },\n  SET_MUSIXISER: function SET_MUSIXISER(state, _ref6) {\n    var musixiserInfo = _ref6.musixiserInfo;\n    // 储存录制信息\n    state.musixiserInfo = musixiserInfo;\n  },\n  PUSH_MUSIXISER_WORKS: function PUSH_MUSIXISER_WORKS(state, _ref7) {\n    var musixiserWorksObj = _ref7.musixiserWorksObj;\n    // 储存录制信息\n    console.log('ccccc', musixiserWorksObj.current);\n    if (+musixiserWorksObj.current === 1) {\n      state.musixiserWorksObj.content = musixiserWorksObj.list;\n    } else {\n      state.musixiserWorksObj.content = state.musixiserWorksObj.content.concat(musixiserWorksObj.list);\n    }\n    state.musixiserWorksObj.total = musixiserWorksObj.total;\n    state.musixiserWorksObj.size = musixiserWorksObj.size;\n    state.musixiserWorksObj.current = musixiserWorksObj.current;\n  },\n  PUSH_FAV_WORKS: function PUSH_FAV_WORKS(state, _ref8) {\n    var favWorksObj = _ref8.favWorksObj;\n    // 储存录制信息\n    console.log('xxxxxxx', favWorksObj);\n    if (+favWorksObj.current === 1) {\n      state.favWorksObj.content = favWorksObj.list;\n    } else {\n      state.favWorksObj.content = state.favWorksObj.content.concat(favWorksObj.list);\n    }\n    state.favWorksObj.total = favWorksObj.total;\n    state.favWorksObj.size = favWorksObj.size;\n    state.favWorksObj.current = favWorksObj.current;\n  }\n  // SET_FINAL_WORK: (state, { type }) => { // 储存成品信息\n  //   state.activeType = type;\n  // },\n  // SET_USER: (state, { id, user }) => {\n  //   Vue.set(state.users, id, user || false); /* false means user not found */\n  // },\n});\n// CONCATENATED MODULE: ./src/store/getters.js\n/* harmony default export */ var getters = ({\n  // ids of the items that should be currently displayed based on\n  // current list type and current pagination\n  activeIds: function activeIds(state) {\n    var activeType = state.activeType,\n        itemsPerPage = state.itemsPerPage,\n        lists = state.lists;\n\n    var page = Number(state.route.params.page) || 1;\n    if (activeType) {\n      var start = (page - 1) * itemsPerPage;\n      var end = page * itemsPerPage;\n      return lists[activeType].slice(start, end);\n    }\n    return [];\n  },\n\n\n  // items that should be currently displayed.\n  // this Array may not be fully fetched.\n  activeItems: function activeItems(state, getters) {\n    return getters.activeIds.map(function (id) {\n      return state.items[id];\n    }).filter(function (_) {\n      return _;\n    });\n  }\n});\n// CONCATENATED MODULE: ./src/store/index.js\n\n\n\n\n\n\nvue_esm[\"a\" /* default */].use(vuex_esm[\"a\" /* default */]);\n\nfunction createStore() {\n  return new vuex_esm[\"a\" /* default */].Store({\n    state: {\n      activeType: null,\n      itemsPerPage: 20,\n      items: {/* [id: number]: Item */},\n      users: {/* [id: string]: User */},\n      lists: {\n        top: [/* number */],\n        new: [],\n        show: [],\n        ask: [],\n        job: []\n      },\n      myInfo: {},\n      recordParts: [],\n      recordProject: [],\n      musixiserInfo: {},\n      musixiserWorksObj: { content: [] },\n      favWorksObj: { content: [] }\n    },\n    actions: actions,\n    mutations: mutations,\n    getters: getters\n  });\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue\n//\n//\n//\n//\n//\n//\n//\n//\n\n// https://router.vuejs.org/en/advanced/transitions.html\n/* harmony default export */ var App = ({\n  name: 'app',\n  data: function data() {\n    return {\n      transitionName: 'fade'\n    };\n  },\n  beforeRouteUpdate: function beforeRouteUpdate(to, from, next) {\n    // const toPage = to.indexOf('make')\n    // const fromPage = from.path.split('/').length\n    // this.transitionName = toDepth < fromDepth ? 'slide-right' : 'slide-left'\n    // next()\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fcaae542\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":_vm.transitionName}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_App = (esExports);\n// CONCATENATED MODULE: ./src/App.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"h4Ia\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  App,\n  selectortype_template_index_0_src_App,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_App = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-router/dist/vue-router.esm.js\nvar vue_router_esm = __webpack_require__(\"/ocq\");\n\n// CONCATENATED MODULE: ./src/_common/js/util.js\nfunction getUrlParam(key) {\n  var reg = new RegExp(\"[?|&]\" + key + \"=([^&]+)\");\n  var match = location.search.match(reg);\n  return match && match[1];\n}\n\nfunction getUrlParam1(key) {\n  var reg = new RegExp(\"[?|&]\" + key + \"=([^&]+)\");\n  var match = location.search.match(reg);\n  return match && match[1];\n}\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/HelloWorld.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ var HelloWorld = ({\n  name: 'hello',\n  data: function data() {\n    return {\n      msg: 'Welcome to Your Vue.js App'\n    };\n  },\n\n  methods: {\n    redirectTo: function redirectTo(path) {\n      // IMPORTANT keng. 从主页跳制作页，如果相对路径会带上参数，比如auth回来的code会一直带着，污染之后的auth\n      // 成功auth一次，就写入cookie了，所以往后跳就直接给全路径，摒弃微信弄回来的乱七八糟的参数\n      this.$router.push(path);\n    }\n  },\n  created: function created() {\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // 网页内cookie失效，需要重新验证\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n        }\n        alert('welcome' + res.data.data.realname);\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n      });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect');\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3d40ace0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\nvar HelloWorld_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('div',{staticClass:\"m-logo\"}),_vm._v(\" \"),_c('div',{staticClass:\"redirect-button\",attrs:{\"id\":\"mb-maker\"},on:{\"touchstart\":function($event){_vm.redirectTo('/new-music-box-maker')}}},[_vm._v(\"\\n      去编曲\\n  \")])])}\nvar HelloWorld_staticRenderFns = []\nvar HelloWorld_esExports = { render: HelloWorld_render, staticRenderFns: HelloWorld_staticRenderFns }\n/* harmony default export */ var components_HelloWorld = (HelloWorld_esExports);\n// CONCATENATED MODULE: ./src/components/HelloWorld.vue\nfunction HelloWorld_injectStyle (ssrContext) {\n  __webpack_require__(\"DAU5\")\n}\nvar HelloWorld_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar HelloWorld___vue_template_functional__ = false\n/* styles */\nvar HelloWorld___vue_styles__ = HelloWorld_injectStyle\n/* scopeId */\nvar HelloWorld___vue_scopeId__ = \"data-v-3d40ace0\"\n/* moduleIdentifier (server only) */\nvar HelloWorld___vue_module_identifier__ = null\nvar HelloWorld_Component = HelloWorld_normalizeComponent(\n  HelloWorld,\n  components_HelloWorld,\n  HelloWorld___vue_template_functional__,\n  HelloWorld___vue_styles__,\n  HelloWorld___vue_scopeId__,\n  HelloWorld___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_HelloWorld = (HelloWorld_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/swiper/dist/css/swiper.css\nvar swiper = __webpack_require__(\"v2ns\");\nvar swiper_default = /*#__PURE__*/__webpack_require__.n(swiper);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/set.js\nvar set = __webpack_require__(\"lHA8\");\nvar set_default = /*#__PURE__*/__webpack_require__.n(set);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/toConsumableArray.js\nvar toConsumableArray = __webpack_require__(\"Gu7T\");\nvar toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/object/values.js\nvar values = __webpack_require__(\"gRE1\");\nvar values_default = /*#__PURE__*/__webpack_require__.n(values);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/object/keys.js\nvar keys = __webpack_require__(\"fZjL\");\nvar keys_default = /*#__PURE__*/__webpack_require__.n(keys);\n\n// CONCATENATED MODULE: ./src/_common/js/magic.js\n\n\n\n\n\nvar magic_Tone = __webpack_require__(\"ZnLv\");\n\nmagic_Tone.Transport.cancel();\nvar SAME_NOTE_INTERVAL = 1; // 同一个音不能相距小于1秒，不然音片打击出问题\nvar musicPreview = void 0;\n\nvar oncePlayed = false;\n// notesInfo example\n// let work = [{note: \"E4\", time: 0.14585000000000037},\n// {note: \"G4\", time: 1.0295},\n// {note: \"G4\", time: 1.3985},\n// {note: \"E4\", time: 2.6605300000000005},\n// {note: \"D4\", time: 3.4207450000000006},\n// {note: \"C4\", time: 4.196245000000001},\n// {note: \"G4\", time: 2.671395000000004},\n// {note: \"A4\", time: 3.35932},\n// {note: \"B4\", time: 4.183044999999998}]\n// const mbox = new Tone.MonoSynth({\n//   volume: -10,\n//   envelope: {\n//     attack: 0.1,\n//     decay: 0.3,\n//     release: 2,\n//   },\n//   filterEnvelope: {\n//     attack: 0.001,\n//     decay: 0.01,\n//     sustain: 0.5,\n//     baseFrequency: 200,\n//     octaves: 2.6,\n//   },\n// }).toMaster();\n// const mbox = new Tone.PolySynth(6, Tone.Synth, {\n//   oscillator: {\n//     partials: [0, 2, 3, 4],\n//   },\n// }).toMaster();\n// const mbox = new Tone.Sampler({\n//   C4: 'C4.[mp3|ogg]',\n//   'D#4': 'Ds4.[mp3|ogg]',\n//   'F#4': 'Fs4.[mp3|ogg]',\n//   A4: 'A4.[mp3|ogg]',\n//   C5: 'C5.[mp3|ogg]',\n//   'D#5': 'Ds5.[mp3|ogg]',\n//   'F#5': 'Fs5.[mp3|ogg]',\n//   A5: 'A5.[mp3|ogg]',\n//   C6: 'C6.[mp3|ogg]',\n// }, {\n//   release: 1,\n//   baseUrl: '/static/audio/',\n// }).toMaster();\n\nvar mbox = new magic_Tone.Sampler({\n  B3: 'B3.[mp3|ogg]',\n  E4: 'E4.[mp3|ogg]',\n  G4: 'G4.[mp3|ogg]',\n  B4: 'B4.[mp3|ogg]',\n  'C#5': 'Cs5.[mp3|ogg]',\n  E5: 'E5.[mp3|ogg]',\n  G5: 'G5.[mp3|ogg]',\n  B5: 'B5.[mp3|ogg]',\n  'C#6': 'Cs6.[mp3|ogg]'\n}, {\n  release: 1,\n  // baseUrl: '/static/audio/mbox/',\n  baseUrl: '//cnbj1.fds.api.xiaomi.com/mbox/audio/mbox/'\n}).toMaster();\n\nfunction RealMagic(items) {\n  console.log('== Enter RealMagic ==');\n  console.log(stringify_default()(items));\n  var tasksObj = {};\n  items.forEach(function (item) {\n    //* 2 cuz print mbox need 1 octave higher.\n    var itemNoteFreq = parseInt(magic_Tone.Frequency(item.note).toFrequency() * 2, 10);\n    if (!tasksObj[itemNoteFreq]) {\n      tasksObj[itemNoteFreq] = [];\n    }\n    tasksObj[itemNoteFreq].push(item.time);\n  });\n  // tasksObj is like {784:[1.0295,1.39,2.6713],659:[2.66],...}\n\n  // then we focus on each task\n  var taskTypes = keys_default()(tasksObj); // [659,784,...]  freq array, 排好序的（object.keys）\n  var taskTimeArrays = values_default()(tasksObj); // [[2.66]，[1.0295,1.39,2.6713]] 顺序跟上面对应的\n  var machines = []; // init with existing types, will add more machines\n  var groups = []; // will final be [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  if (taskTypes.length > 18) {\n    console.log('音种类超过18个，这个做不了');\n    return false;\n  }\n\n  taskTimeArrays.forEach(function (timeArray) {\n    var final = [];\n    timeArray.forEach(function (time, j) {\n      var test = []; // 校验当前final里不能用的序号， final里序号种类和test种类相同则证明不行\n      var allPreviousOccupied = false;\n      var successFound = false;\n      if (j === 0) {\n        final.push(1); // 给第1组的第一个任务分配第一个机器\n      } else {\n        var counter = j;\n        while (counter >= 1 && !allPreviousOccupied) {\n          // TODO: -1 or 0\n          counter -= 1;\n          if (time - timeArray[counter] >= SAME_NOTE_INTERVAL && test.indexOf(final[counter]) === -1) {\n            final.push(final[counter]);\n            successFound = true;\n            break;\n          } else if (test.indexOf(final[counter]) === -1) {\n            test.push(final[counter]);\n            if ([].concat(toConsumableArray_default()(new set_default.a(final))).length === [].concat(toConsumableArray_default()(new set_default.a(test))).length) {\n              // final目前已有的都不满足，set可以取unique elements [1,1,2,2,3,1] => [1,2,3]\n              allPreviousOccupied = true;\n              break;\n            }\n          }\n        }\n        if (counter === 0 && !successFound || allPreviousOccupied) {\n          final.push(Math.max.apply(Math, final) + 1);\n        }\n      }\n    });\n    groups.push(final);\n  });\n  console.log(taskTypes);\n  console.log(taskTimeArrays);\n  console.log('hehe', groups); // [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  // now we have groups, let's build machines based on this\n  groups.forEach(function (group, index) {\n    var count = 0;\n    while (count <= Math.max.apply(Math, toConsumableArray_default()(group)) - 1) {\n      machines.push(taskTypes[index]);\n      count += 1;\n    }\n  });\n  if (machines.length < 18) {\n    var lastMachine = machines[machines.length - 1];\n    while (machines.length < 18) {\n      machines.push(lastMachine); // make it length of 18\n    }\n    // machines is like [\"1046\", \"1174\", \"1318\", \"1318\", \"1318\", \"1396\", \"1567\"] of 18 length\n  } else if (machines.length > 18) {\n    console.log('所需音片儿超过18个');\n    return false;\n  }\n  return true;\n  // console.log(machines);\n  // // then we merge all the tasks\n  //\n  // // test1: [[1],[1,2,1]] => [1,2,3,2]\n  // // test2: [[1,2,1],[1,2,3]] => [1,2,1,3,4,5]\n  // const finalBins = groups.reduce((a, b) => a.concat(b.map(item => item + Math.max(...a))));\n  // let finalTimings = taskTimeArrays.reduce((a, b) => a.concat(b)); // just flatten it\n  // finalTimings = finalTimings.map(item => (item * 15) / 20); // normalize from 20s to 15s\n  // const musicboxPins = finalBins.map((bin, index) => `generatePin(${finalTimings[index]},${bin})`);\n  // console.log(`\n  //   //底下低音,上面高音\n  // const DOT_WIDTH = 0.6\n  // const RATIO = 0.98\n  // const OFFSET = 2.2 //1.95 is center\n  // const OUTER_RADIUS = 6.6\n  // const INNER_RADIUS = 5.9\n  // function generatePin(noteSec, noteNo) {\n  //   return rotate(90, [1, 0, 4 * noteSec * RATIO / 15], cylinder({\n  //     h: 1,\n  //     r: DOT_WIDTH / 2,\n  //     center: true\n  //   })).translate([sin(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -cos(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -9.95 + OFFSET + 0.4 + (noteNo - 1) * .9])\n  // }\n  //\n  // function main() {\n  //   let cylinderBody = difference(cylinder({h: 19.9,r: OUTER_RADIUS,center: true}),cylinder({h: 19.9,r: INNER_RADIUS,center: true}))\n  //   let holes = union(${musicboxPins})\n  //   return union(cylinderBody,holes).translate([0, 0, 0]).scale(1);\n  // }`);\n}\n\nfunction magic_mapNoteTimeToColor(time) {\n  // let rgb = [0, 0, 0];\n  // const COLOR1 = [151, 255, 241];\n  // const COLOR2 = [98, 166, 223];\n  // const COLOR3 = [154, 124, 255];\n  var COLOR1 = [151, 255, 241];\n  var COLOR2 = [137, 228, 217];\n  var COLOR3 = [143, 123, 242];\n  var TIME_MAX = 20;\n  var rgb = [0, 0, 0];\n  if (time < 0 || time > TIME_MAX) {\n    // console.warn('we don\\'t allow time above 20. from \\'mapNoteTimeToColor\\' util function');\n  } else if (time <= 10) {\n    rgb = [COLOR1[0] + time * (COLOR2[0] - COLOR1[0]) / (TIME_MAX / 2), COLOR1[1] + time * (COLOR2[1] - COLOR1[1]) / (TIME_MAX / 2), COLOR1[2] + time * (COLOR2[2] - COLOR1[2]) / (TIME_MAX / 2)];\n  }\n  rgb = [COLOR2[0] + time * (COLOR3[0] - COLOR2[0]) / (TIME_MAX / 2), COLOR2[1] + time * (COLOR3[1] - COLOR2[1]) / (TIME_MAX / 2), COLOR2[2] + time * (COLOR3[2] - COLOR2[2]) / (TIME_MAX / 2)];\n  // console.log(`rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`);\n  return 'rgb(' + Math.floor(rgb[0]) + ',' + Math.floor(rgb[1]) + ',' + Math.floor(rgb[2]) + ')';\n}\nfunction magic_mapNoteMidiToLength(noteName) {\n  // in our context, the midi range would be from 60 - 84\n  // 75 is rem to px\n  // return `${(75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 60) / (84 - 40))) + 0.2}`;\n  // 50 - 110\n  return '' + (75 * 0.8 * ((magic_Tone.Frequency(noteName).toMidi() - 50) / (110 - 40)) + 0.2); // 75 is rem to px\n}\n\nfunction clearTone(parts) {\n  // 本方法只为Tone.js不在各页面中全局污染，完全是作者这包操蛋\n  if (parts && parts.length) {\n    // 传进来值 挨个dispose。。。\n    parts.forEach(function (part) {\n      try {\n        part.dispose();\n      } catch (e) {\n        //\n      }\n    });\n  }\n  if (musicPreview) {\n    // 清理自己的musicPreview\n    try {\n      musicPreview.dispose();\n    } catch (e) {\n      //\n    }\n  }\n}\nfunction preview(items, start) {\n  console.log('current state', magic_Tone.Transport.state);\n  // if (Tone.Transport.state === 'stopped') {\n  if (start) {\n    // TODO: this is weird...but you need to play something to make sure it works\n    // trigger to avoid no sound\n    if (!oncePlayed) {\n      mbox.triggerAttack('E6', 0, 0);\n      oncePlayed = true;\n    }\n    if (musicPreview) {\n      try {\n        musicPreview.dispose();\n      } catch (e) {\n        //\n      }\n    }\n    musicPreview = new magic_Tone.Part(function (time, value) {\n      mbox.triggerAttackRelease(value.note, '4n', time);\n    }, items).start(0, 0);\n    musicPreview.loop = true;\n    musicPreview.loopEnd = 21; // 20s一个循环\n    magic_Tone.Transport.start('+0.01', 0);\n  } else {\n    magic_Tone.Transport.stop(0);\n  }\n}\n\nfunction previewMidi(url, start) {\n  console.log('current state', magic_Tone.Transport.state);\n  // if (Tone.Transport.state === 'stopped') {\n  if (start) {\n    // TODO: this is weird...but you need to play something to make sure it works\n    // trigger to avoid no sound\n    if (!oncePlayed) {\n      mbox.triggerAttack('E6', 0, 0);\n      oncePlayed = true;\n    }\n    if (musicPreview) {\n      try {\n        musicPreview.dispose();\n      } catch (e) {\n        //\n      }\n    }\n    MidiConvert.load(url, function (midi) {\n      //这个load放到外头，整个函数还是以notes作为入参\n      musicPreview = new magic_Tone.Part(function (time, value) {\n        mbox.triggerAttackRelease(value.note, '4n', time);\n      }, midi.tracks[0].notes).start(0, 0);\n      musicPreview.loop = true;\n      musicPreview.loopEnd = 21; // 20s一个循环\n      magic_Tone.Transport.start('+0.01', 0);\n    });\n  } else {\n    magic_Tone.Transport.stop(0);\n  }\n}\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar node_modules_axios = __webpack_require__(\"mtWM\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(node_modules_axios);\n\n// EXTERNAL MODULE: ./node_modules/weixin-js-sdk/index.js\nvar weixin_js_sdk = __webpack_require__(\"fxnj\");\nvar weixin_js_sdk_default = /*#__PURE__*/__webpack_require__.n(weixin_js_sdk);\n\n// CONCATENATED MODULE: ./src/_common/js/wx_share.js\n\n\n\n\n\n\nvar wx_share_reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\nvar wx_share_prepareShareConfig = function prepareShareConfig() {\n  return new promise_default.a(function (resolve, reject) {\n    axios_default.a.post('//api.octave-love.com/api/v1/wechat/getTicket?url=' + encodeURIComponent(window.location.href.split('#')[0]), '', wx_share_reqConfig).then(function (res) {\n      // alert(`before # url: ${window.location.href.split('#')[0]}`);\n      // alert(`full path: ${window.location.href}`);\n      // alert(JSON.stringify(res.data.data));\n      weixin_js_sdk_default.a.config({\n        debug: false,\n        appId: res.data.data.appId,\n        timestamp: res.data.data.timestamp,\n        nonceStr: res.data.data.nonceStr,\n        signature: res.data.data.signature,\n        jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'chooseWXPay', 'openAddress']\n      });\n      weixin_js_sdk_default.a.ready(function () {\n        // 配置wx.config成功\n        resolve(weixin_js_sdk_default.a);\n      });\n    }, function () {\n      reject('配置wx.config失败');\n    });\n  });\n};\n\n// 分享配置\nvar wx_share_prepareShareContent = function prepareShareContent(_ref) {\n  var title = _ref.title,\n      desc = _ref.desc,\n      fullPath = _ref.fullPath,\n      imgUrl = _ref.imgUrl;\n\n  // const link = 'http://example.com/static/auth.html' +\n  //              `?redirect_uri=${encodeURIComponent(window.location.href.split('#')[0])}` +\n  //              `&full_path=${encodeURIComponent(fullPath)}`;\n  var link = fullPath;\n  weixin_js_sdk_default.a.onMenuShareTimeline({\n    title: title,\n    link: link,\n    imgUrl: imgUrl,\n    success: function success() {},\n    cancel: function cancel() {}\n  });\n  weixin_js_sdk_default.a.onMenuShareAppMessage({\n    title: title,\n    desc: desc,\n    link: link,\n    imgUrl: imgUrl,\n    success: function success() {},\n    cancel: function cancel() {}\n  });\n};\n\n// order pay\nvar wx_share_makeWxOrder = function makeWxOrder(_ref2) {\n  var pid = _ref2.pid,\n      wid = _ref2.wid,\n      amount = _ref2.amount;\n  return new promise_default.a(function (resolve, reject) {\n    wx_share_getAddress().then(function (address) {\n      console.log('234', address);\n      createOrder({ pid: pid, wid: wid, amount: amount }).then(function (res) {\n        // 得到返回的支付参数\n        alert(stringify_default()(res));\n        var orderId = res.data.data;\n        // params.success = (res) => {\n        //   // 支付成功\n        // };\n        payOrder({ orderId: orderId }).then(function (res) {\n          // alert(JSON.stringify(res));\n          var params = res.data.data;\n          alert(stringify_default()(params));\n          console.log(params.nonceStr);\n          console.log(params.signType);\n          console.log(params.package);\n          console.log(params.timeStamp);\n          console.log(params.appId);\n          console.log(params.paySign);\n          console.log('sdsd');\n          // WeixinJSBridge.invoke(\n          //   'getBrandWCPayRequest',\n          //   {\n          //     nonceStr: params.nonceStr || 'e3bcr07pOMTlSmo8xEtbjzCkhRQzUuEX',\n          //     signType: params.signType || 'MD5',\n          //     package: params.package || 'prepay_id=wx23170809963259d77f75f3450235551609',\n          //     timeStamp: params.timeStamp || '1545556090',\n          //     appId: params.appId || 'wx353a60a8b049d366',\n          //     paySign: params.paySign || '1855DBE80F3E3EF13A956D87802CD52E',\n          //   },\n          //   (res) => {\n          //     if (res.err_msg == 'get_brand_wcpay_request:ok') {\n          //       // 使用以上方式判断前端返回,微信团队郑重提示：\n          //       // res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\n          //     }\n          //   },\n          // );\n          weixin_js_sdk_default.a.chooseWXPay({\n            // ...params,\n            appId: params.appId,\n            timestamp: params.timeStamp,\n            nonceStr: params.nonceStr,\n            package: params.package,\n            signType: params.signType,\n            paySign: params.paySign,\n            success: function success(res) {\n              console.log(res);\n              resolve(res);\n            }\n          });\n        });\n      });\n    });\n  });\n};\n\n// address\nvar wx_share_newMakeWxOrder = function newMakeWxOrder(_ref3, cb1, cb2) {\n  var pid = _ref3.pid,\n      wid = _ref3.wid,\n      amount = _ref3.amount;\n\n  weixin_js_sdk_default.a.openAddress({\n    success: function success(res) {\n      console.log(res);\n      createOrder({ pid: pid, wid: wid, amount: amount, address: res }).then(function (res) {\n        var orderId = res.data.data;\n        payOrder({ orderId: orderId }).then(function (res) {\n          // alert(JSON.stringify(res));\n          var params = res.data.data;\n          alert(stringify_default()(params));\n          console.log(params.nonceStr);\n          console.log(params.signType);\n          console.log(params.package);\n          console.log(params.timeStamp);\n          console.log(params.appId);\n          console.log(params.paySign);\n          console.log('1234');\n          weixin_js_sdk_default.a.chooseWXPay({\n            // ...params,\n            appId: params.appId,\n            timestamp: params.timeStamp,\n            nonceStr: params.nonceStr,\n            package: params.package,\n            signType: params.signType,\n            paySign: params.paySign,\n            success: function success(res) {\n              console.log(res);\n              cb1(res);\n            }\n          });\n        });\n      });\n    },\n    cancel: function cancel() {\n      cb2();\n    }\n  });\n};\n\nvar wx_share_getAddress = function getAddress() {\n  new promise_default.a(function (resolve, reject) {\n    weixin_js_sdk_default.a.openAddress({\n      success: function success(res) {\n        console.log(res);\n        resolve(res);\n      },\n      cancel: function cancel() {\n        reject();\n      }\n    });\n  });\n};\n// 调用分享\n// $_wechat().config().then((res) => {\n//   $_wechat().share({ // 配置分享\n//     title: 'wechat-spa',\n//     desc: 'Wechat SPA',\n//     fullPath: '/home/index',\n//     imgUrl: 'https://www.baidu.com/img/bd_logo1.png',\n//   });\n// }, (err) => {\n//   console.warn(err);\n// });\n// EXTERNAL MODULE: ./node_modules/vue-slider-component/dist/index.js\nvar dist = __webpack_require__(\"GDE4\");\nvar dist_default = /*#__PURE__*/__webpack_require__.n(dist);\n\n// EXTERNAL MODULE: ./node_modules/vue-awesome-swiper/dist/vue-awesome-swiper.js\nvar vue_awesome_swiper = __webpack_require__(\"7QTg\");\nvar vue_awesome_swiper_default = /*#__PURE__*/__webpack_require__.n(vue_awesome_swiper);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/NMBMaker.vue\n\n\n\n\n\n\n\n\n\n\nvar NMBMaker_Tone = __webpack_require__(\"ZnLv\");\nvar touchIdKeyMap = {}; // touch move can have several threads, each thread only activate one note at most\n// e.g. {0:a4,1:b5}\n\nvar MINI_KEY_LENGTH = 200; // px\nvar extendBtnsTimeout = void 0;\n\nvar piano = new NMBMaker_Tone.Sampler({\n  C4: 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  A4: 'A4.[mp3|ogg]',\n  C5: 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  A5: 'A5.[mp3|ogg]',\n  C6: 'C6.[mp3|ogg]'\n}, {\n  release: 1,\n  // 'baseUrl': '/static/audio/'\n  baseUrl: '//cnbj1.fds.api.xiaomi.com/mbox/audio/'\n}).toMaster();\n\n// var plucky = new Tone.PluckSynth().toMaster()\n\nvar SCREEN_WIDTH = document.documentElement.getBoundingClientRect().width;\nvar SCREEN_HEIGHT = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nvar tonepart = []; // store all the music parts. (ummm,that's why it's named part...)\nvar bouncepart = [];\n\nvar recordStartTime = 0;\n\nvar isLinger = true; // 非播放状态中未开始录音\nvar replayInterval = void 0; // 控制progressbar的setinterval\nvar playOffset = 0; // 播放状态的拉条bar初始时间记录\nvar lingerOffset = 0; // 未播放状态的拉条bar初始时间记录\nvar PROGRESS_INTERVAL_TIME = 0.1; // 0.1秒挪一下\nvar tutorOnceEnter = false;\nvar tutorTimeout = [];\n/* harmony default export */ var NMBMaker = ({\n  components: {\n    swiper: vue_awesome_swiper[\"swiper\"],\n    swiperSlide: vue_awesome_swiper[\"swiperSlide\"],\n    vueSlider: dist_default.a\n  },\n  data: function data() {\n    return {\n      portraitMode: true,\n      activeNote: {},\n      recordPart: [], // current record part\n      recordParts: [], // each new record goes in here.\n      playing: false,\n      generalControllerShow: false,\n      activeSwiperIndex: 3,\n      lastActiveSwiperIndex: 3 - 1,\n      vuetimeline: 0,\n      showExtendBtns: false,\n      alertAppear: false,\n      bouncing: false,\n      tutorSession: 0,\n      handClass: '', // hand or clickhand\n      tutorClass: '', // hand positioning in different session\n      timelineConfig: {\n        value: 0,\n        width: 8,\n        height: '90%',\n        padding: '0',\n        dotSize: 20,\n        eventType: 'auto',\n        min: 0,\n        max: 200,\n        interval: 1,\n        disabled: false,\n        show: true,\n        tooltip: 'always',\n        // tooltip: 'hidden',\n        piecewise: false,\n        reverse: true,\n        style: {\n          display: 'inline-block'\n        },\n        class: 'star-slider',\n        direction: 'vertical',\n        speed: PROGRESS_INTERVAL_TIME,\n        bgStyle: {\n          backgroundColor: 'rgb(110,113,158)',\n          boxShadow: 'inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)'\n        },\n        tooltipDir: 'left',\n        tooltipStyle: {\n          backgroundColor: 'rgb(69, 106, 255)',\n          borderColor: 'rgb(69, 106, 255)',\n          transform: 'rotate(90deg)',\n          transformOrigin: 'right',\n          position: 'relative',\n          left: '-.2rem',\n          top: '0.9rem'\n        },\n        formatter: function formatter(value) {\n          if (value) {\n            return (value / 10).toFixed(1) + 's/20s';\n          }\n          return '0.0s/20s';\n        },\n\n        processStyle: {\n          backgroundColor: 'rgb(69,106,255)'\n        }\n      }\n    };\n  },\n\n  watch: {\n    playing: function playing(val) {\n      var _this = this;\n\n      console.log('playing status', val);\n      if (val) {\n        //start progress bar\n        replayInterval = setInterval(function () {\n          _this.vuetimeline += 1;\n          if (_this.vuetimeline >= 200) {\n            _this.toggleReplay();\n            _this.vuetimeline = 0;\n          }\n        }, PROGRESS_INTERVAL_TIME * 1000);\n      } else {\n        //stop progress bar\n        clearInterval(replayInterval);\n      }\n    }\n  },\n  computed: {\n    swiper: function swiper() {\n      return this.$refs.pianoRoll.swiper;\n    },\n    activePartIndex: function activePartIndex() {\n      return this.PARTNUM - this.activeSwiperIndex - 1;\n    },\n    lastActivePartIndex: function lastActivePartIndex() {\n      return this.PARTNUM - this.lastActiveSwiperIndex - 1;\n    }\n  },\n  methods: {\n    load: function load() {},\n    toggleReplay: function toggleReplay() {\n      console.log(1);\n      this.playing = !this.playing;\n      if (this.playing) {\n        if (this.vuetimeline >= 200) {\n          this.vuetimeline = 0;\n        }\n        // this.confirmRecordPart(!isLinger)\n        playOffset = performance.now() - this.vuetimeline * 100;\n        console.log('播放开始');\n        this.confirmRecordPart(0);\n        console.log('kokokoko');\n        recordStartTime = performance.now();\n        console.log('activeOffsetTime' + this.vuetimeline * 100);\n        NMBMaker_Tone.Transport.start('+0.01', this.vuetimeline * 100 / 1000); // TODO:有问题in case < context.currentTime\n      } else {\n        console.log('播放停了');\n        NMBMaker_Tone.Transport.stop(0); // TODO：必须stop才能start。。。有没有自动stop啊..\n        // recordStartTime = performance.now()\n      }\n    },\n    handleNoteStart: function handleNoteStart(noteId) {\n      var noteTime = 0;\n      // console.log('down', e.target.id)\n      piano.triggerAttack(noteId);\n      // console.log('midi no. :', Tone.Frequency(noteId).toMidi())\n      this.$set(this.activeNote, noteId, 1);\n      if (!this.playing) {\n        if (isLinger) {\n          recordStartTime = performance.now();\n          lingerOffset = this.vuetimeline * 100;\n          isLinger = false;\n        }\n        noteTime = performance.now() - recordStartTime + lingerOffset;\n      } else {\n        noteTime = performance.now() - playOffset;\n        // noteTime = this.vuetimeline * 100\n        // console.log('1', this.vuetimeline * 100)\n        // console.log('2', performance.now() - recordStartTime + this.vuetimeline*100)\n      }\n      if (noteTime < 20000) {\n        this.vuetimeline = 10 * noteTime / 1000;\n        this.recordPart.push({\n          note: noteId,\n          time: +(noteTime / 1000).toFixed(4)\n        });\n      } else {\n        this.vuetimeline = 20 * 10; // 颗粒度是0.1s => 200份\n        console.log('cannot record more than 20 seconds');\n      }\n    },\n    handleNoteEnd: function handleNoteEnd(noteId) {\n      piano.triggerRelease(noteId);\n      this.$set(this.activeNote, noteId, 0);\n    },\n    touchNoteStartHandler: function touchNoteStartHandler(e) {\n      console.log(e);\n      // 先存起来，防止在该键位touchmove重复\n      touchIdKeyMap[e.changedTouches[0].identifier] = e.target.id; // TODO: 猜测 touchstart只会有一个changetouches///\n      this.handleNoteStart(e.target.id);\n    },\n    touchNoteEndHandler: function touchNoteEndHandler(e) {\n      this.handleNoteEnd(e.target.id);\n      this.handleNoteEnd(touchIdKeyMap[e.changedTouches[0].identifier]); // TODO: 猜测 touchend只会有一个changetouches,记录的正好是该停的\n    },\n    confirmRecordPart: function confirmRecordPart(shouldClearTime) {\n      if (this.recordPart.length) {\n        console.log('processing track: ', this.lastActivePartIndex);\n        if (this.recordParts[this.lastActivePartIndex] && this.recordParts[this.lastActivePartIndex].length) {\n          // 已在该track录过,merge both\n          this.recordPart = this.recordPart.concat(this.recordParts[this.lastActivePartIndex]);\n        }\n        if (tonepart[this.lastActivePartIndex]) {\n          try {\n            tonepart[this.lastActivePartIndex].dispose(); // 覆盖之前的需要dispose\n          } catch (e) {}\n        }\n        tonepart[this.lastActivePartIndex] = new NMBMaker_Tone.Part(function (time, value) {\n          // 不能老这new啊，要每次一个数组，每次改动最后一个\n          piano.triggerAttackRelease(value.note, '8n', time);\n        }, this.recordPart).start(0);\n        this.recordParts[this.lastActivePartIndex] = this.recordPart;\n        this.recordPart = [];\n      } else {\n        console.log('啥也没录');\n      }\n      this.lastActiveSwiperIndex = this.activeSwiperIndex;\n      // reinit time\n      if (shouldClearTime) {\n        this.vuetimeline = 0; // this is kind of separate for progress view\n        recordStartTime = 0;\n      }\n      isLinger = true;\n    },\n    clearRecordPart: function clearRecordPart(trackNum) {\n      console.log('cleaning track ' + trackNum);\n      if (this.activePartIndex === trackNum) {\n        this.recordPart = [];\n        this.vuetimeline = 0;\n        isLinger = true;\n        this.playing = false;\n        NMBMaker_Tone.Transport.stop(0);\n      }\n      if (this.recordParts[trackNum] && this.recordParts[trackNum].length) {\n        this.$set(this.recordParts, trackNum, []);\n        if (tonepart[trackNum]) {\n          try {\n            tonepart[trackNum].dispose(); // dispose掉\n          } catch (e) {}\n          tonepart[trackNum] = undefined; // 同时要从数组中删掉\n        }\n      } else {\n        console.log('track ' + trackNum + ' has no content');\n      }\n    },\n    checkBouncibility: function checkBouncibility() {\n      this.confirmRecordPart(0);\n      bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(function (item) {\n          if (item && item._events.length && item._events[0].value) {\n            item._events.forEach(function (noteInfo) {\n              bouncepart.push(noteInfo.value);\n            });\n          }\n        });\n        bouncepart.sort(function (a, b) {\n          return 0 + a.time - b.time;\n        });\n        return RealMagic(bouncepart);\n      }\n      return true;\n    },\n    bounceProject: function bounceProject() {\n      var _this2 = this;\n\n      this.confirmRecordPart(0);\n      console.log(this);\n      console.log(tonepart);\n      bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(function (item) {\n          if (item && item._events.length && item._events[0].value) {\n            item._events.forEach(function (noteInfo) {\n              bouncepart.push(noteInfo.value);\n            });\n          }\n        });\n        bouncepart.sort(function (a, b) {\n          return 0 + a.time - b.time;\n        });\n        // TODO, semi done\n        this.bouncing = true;\n        this.$store.dispatch('BOUNCE_PROJECT', {\n          record: bouncepart,\n          info: {\n            title: '尚未起名',\n            content: 'default',\n            cover: 'default'\n          }\n        }).then(function (id) {\n          console.log('successfully bounced');\n          _this2.bouncing = false;\n          _this2.$toast('作品已为您存储');\n          _this2.$router.push({\n            path: '/new-music-box-viewer',\n            query: {\n              id: id\n            }\n          });\n        }).catch(function (err) {\n          _this2.bouncing = false;\n          _this2.$toast('非常抱歉，上传作品失败了');\n        });\n      } else {\n        this.$toast('什么都没录呢');\n      }\n    },\n    mapNoteTimeToColor: function mapNoteTimeToColor(t) {\n      return magic_mapNoteTimeToColor(t);\n    },\n    mapNoteMidiToLength: function mapNoteMidiToLength(m) {\n      return magic_mapNoteMidiToLength(m);\n    },\n    adjustTimeline: function adjustTimeline(e) {\n      if (this.playing) {\n        console.log('ccccccccc');\n        this.toggleReplay(); // 现在播放中拉条，直接停，涉及到ref读不到最新值貌似，无法直接继续播放 this is TODO\n      } else {\n        isLinger = true; // 你拉条了肯定是\n      }\n    },\n    onMiniKeyboardScroll: function onMiniKeyboardScroll(e) {\n      console.log(e.touches[0].clientY);\n    },\n    onMiniKeyboardStart: function onMiniKeyboardStart(e) {\n      console.log(e);\n    },\n    keng: function keng(e) {\n      // console.log(e)\n      // console.log(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY).style.backgroundColor=\"yellow\")\n      console.log(e); // e.touches is array like object\n      for (var i = 0; i <= e.changedTouches.length - 1; i++) {\n        var a = document.elementFromPoint(e.changedTouches[i].clientX, e.changedTouches[i].clientY);\n        if (a.classList.contains('white') || a.classList.contains('black')) {\n          if (touchIdKeyMap[e.changedTouches[i].identifier] && touchIdKeyMap[e.changedTouches[i].identifier] != a.getAttribute('id')) {\n            // 这个touch已经触发，且和当前不一致\n            console.log(touchIdKeyMap);\n            this.handleNoteStart(a.getAttribute('id'));\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier]);\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id');\n          } else if (!touchIdKeyMap[e.changedTouches[i].identifier]) {\n            console.log(2);\n            this.handleNoteStart(a.getAttribute('id'));\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id');\n          } else {\n            console.log(3);\n            // 新旧相同什么都不做\n          }\n        } else {\n          console.log('外边');\n          if (touchIdKeyMap[e.changedTouches[i].identifier]) {\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier]);\n          }\n          touchIdKeyMap[e.changedTouches[i].identifier] = undefined;\n        }\n      }\n    },\n    btnStart: function btnStart(e) {\n      var _this3 = this;\n\n      console.log(e);\n      extendBtnsTimeout = setTimeout(function () {\n        // show extend buttons\n        _this3.showExtendBtns = true;\n      }, 200);\n    },\n    btnEnd: function btnEnd(e) {\n      // console.log(e)\n      clearTimeout(extendBtnsTimeout);\n      var a = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n      console.log(a);\n      if (a && a.classList.contains('bounceBtn')) {\n        // 导出\n        if (this.checkBouncibility()) {\n          this.bounceProject();\n        } else {\n          this.alertAppear = true;\n        }\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('pauseBtn'))) {\n        // 播放\n        this.toggleReplay();\n        this.showExtendBtns = false;\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('cancelBtn'))) {\n        // hide extend buttons\n        this.showExtendBtns = false;\n      }\n    },\n    tutorStart: function tutorStart() {\n      // 0未开始，1黑屏,2键盘，3track，4时间线，5播放,\n      this.tutorSession = 1;\n      this.$toast('请锁住竖屏使用');\n      tutorOnceEnter = setTimeout(this.tutorProgress, 3000);\n      // setTimeout(()=>{this.tutorSession=2},3000)\n      // setTimeout(()=>{this.tutorSession=3;this.swiper.slidePrev()},5000)\n      // setTimeout(()=>{this.swiper.slideNext()},7000)\n      // setTimeout(()=>{this.tutorSession=4},8500)\n      // setTimeout(()=>{this.vuetimeline=120},9500)\n      // setTimeout(()=>{this.vuetimeline=0},10500)\n      // setTimeout(()=>{this.tutorSession=5},12000)\n      // setTimeout(()=>{this.showExtendBtns = true},13000)\n      // setTimeout(()=>{this.showExtendBtns=false},15000)\n      // setTimeout(()=>{this.tutorSession=0},16000)\n    },\n    tutorProgress: function tutorProgress() {\n      var _this4 = this;\n\n      clearTimeout(tutorOnceEnter);\n      console.log('??????????');\n      this.tutorSession += 1;\n      console.log(this.tutorSession);\n      switch (this.tutorSession) {\n        case 1:\n          this.clearTutorTimeout();\n          this.$toast('请锁住竖屏使用,长按播放按钮保存作品');\n          break;\n        case 2:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor2start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; // clickhand\n            _this4.tutorClass = 'tutor2end';\n          }, 500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.vuetimeline = 120;\n            _this4.handClass = 'hand';\n          }, 1500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.vuetimeline = 0;\n            _this4.handClass = 'hidehand';\n          }, 2500));\n          break;\n        case 3:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor3start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; // clickhand\n            _this4.tutorClass = 'tutor3end';\n          }, 500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hand'; // clickhand\n            _this4.tutorClass = 'tutor3end';\n          }, 800));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hidehand';\n          }, 1000));\n          break;\n        case 4:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor4start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; // clickhand\n            _this4.tutorClass = 'tutor4end';\n          }, 500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hand'; // clickhand\n            _this4.tutorClass = 'tutor4start';\n            _this4.showExtendBtns = true;\n          }, 1500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hidehand';\n          }, 2500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.showExtendBtns = false;\n          }, 3000));\n          break;\n        case 5:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor5start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; // clickhand\n            _this4.tutorClass = 'tutor5end';\n          }, 1200));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.swiper.slidePrev();\n          }, 1500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.swiper.slideNext();\n            _this4.handClass = 'hidehand';\n          }, 2500));\n          break;\n        case 6:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor6start';\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'clickhand'; // clickhand\n            _this4.tutorClass = 'tutor6end';\n          }, 500));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hand'; // clickhand\n            _this4.tutorClass = 'tutor6end';\n          }, 800));\n          tutorTimeout.push(setTimeout(function () {\n            _this4.handClass = 'hidehand';\n          }, 1500));\n          break;\n        default:\n          this.tutorSession = 0;\n          break;\n      }\n    },\n    clearTutorTimeout: function clearTutorTimeout() {\n      this.showExtendBtns = false;\n      tutorTimeout.forEach(function (v) {\n        return clearTimeout(v);\n      });\n      tutorTimeout = [];\n    }\n  },\n  created: function created() {\n    // check cookie to get serviceToken first\n    // if stoken not exist, go auth\n\n    var self = this;\n    NMBMaker_Tone.Transport.cancel();\n    tonepart = [];\n    bouncepart = [];\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    this.PARTNUM = 3;\n    this.pianoRollSwiperOption = {\n      initialSlide: this.PARTNUM,\n      // centeredSlides: true,\n      slidesPerView: 3,\n      on: {\n        // slideChange(e){\n        //   console.log('1',e)\n        // },\n        // slideNextTransitionStart(e) {\n        //   console.log('2',e)\n        // },\n        transitionEnd: function transitionEnd(e) {\n          console.log('3', this.activeIndex); // THIS!!! within swiper...scope.....\n          self.activeSwiperIndex = this.activeIndex;\n          self.confirmRecordPart(!isLinger);\n        }\n      }\n    };\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    // alert(Cookies.get('serviceToken'))\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '寻找你自己的八音盒',\n        fullPath: '' + location.origin + location.pathname + '#/new-music-box-maker',\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      // TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // 网页内cookie失效，需要重新验证\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n          // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        // alert(`welcome${res.data.data.realname}`)\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace(\n        // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n        // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      // 又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\n      // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n      // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n      'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-maker') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone(tonepart);\n    next();\n  },\n  mounted: function mounted() {\n    // this.startRecord();\n    // pointer events以后可以使用\n    this.tutorStart();\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ac33d9c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBMaker.vue\nvar NMBMaker_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{class:['keys',_vm.tutorSession===8?'tutorial-highlight':''],on:{\"touchmove\":_vm.keng,\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchNoteStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchNoteEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db6?'active-note':''],attrs:{\"id\":\"Db6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D6?'active-note':''],attrs:{\"id\":\"D6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb6?'active-note':''],attrs:{\"id\":\"Eb6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E6?'active-note':''],attrs:{\"id\":\"E6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F6?'active-note':''],attrs:{\"id\":\"F6\"}})]),_vm._v(\" \"),_c('div',{class:['keyshadow',_vm.tutorSession===8?'tutorial-highlight':'']}),_vm._v(\" \"),_c('div',{staticClass:\"scroll-container\"}),_vm._v(\" \"),_c('div',{staticClass:\"semi-piano-roll\",class:[(_vm.tutorSession===5||_vm.tutorSession===6)?'tutorial-highlight':''],on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('swiper',{ref:\"pianoRoll\",attrs:{\"options\":_vm.pianoRollSwiperOption}},[_vm._l((_vm.PARTNUM),function(n){return _c('swiper-slide',[_c('div',{staticClass:\"current-piano-roll\"},[_c('svg',{style:({height:'90%',padding:_vm.timelineConfig.dotSize/2+'px 0'})},[_c('defs',[_c('filter',{attrs:{\"id\":\"glowing\",\"height\":\"400%\",\"width\":\"130%\",\"x\":\"-10%\",\"y\":\"-130%\"}},[_c('feMorphology',{attrs:{\"operator\":\"dilate\",\"radius\":\"1\",\"in\":\"SourceAlpha\",\"result\":\"thicken\"}}),_vm._v(\" \"),_c('feGaussianBlur',{attrs:{\"in\":\"thicken\",\"stdDeviation\":\"2\",\"result\":\"blurred\"}}),_vm._v(\" \"),_c('feFlood',{attrs:{\"flood-color\":\"rgb(200,200,255)\",\"result\":\"glowColor\"}}),_vm._v(\" \"),_c('feComposite',{attrs:{\"in\":\"glowColor\",\"in2\":\"blurred\",\"operator\":\"in\",\"result\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMerge',[_c('feMergeNode',{attrs:{\"in\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMergeNode',{attrs:{\"in\":\"SourceGraphic\"}})],1)],1)]),_vm._v(\" \"),_vm._l((_vm.recordPart),function(item,index){return (_vm.activePartIndex===(_vm.PARTNUM-n))?_c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.mapNoteTimeToColor(item.time),\"filter\":\"url(#glowing)\"}}):_vm._e()}),_vm._v(\" \"),_vm._l((_vm.recordParts[_vm.PARTNUM-n]),function(item,index){return _c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.activePartIndex===(_vm.PARTNUM-n)?_vm.mapNoteTimeToColor(item.time):'rgb(120,120,120)',\"filter\":_vm.activePartIndex===(_vm.PARTNUM-n)?'url(#glowing)':''}})})],2),_vm._v(\" \"),_c('div',{staticClass:\"temp\",on:{\"click\":function($event){_vm.clearRecordPart(_vm.PARTNUM-n)}}})])])}),_vm._v(\" \"),_c('swiper-slide'),_vm._v(\" \"),_c('swiper-slide')],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"g-controller\"},[_c('vue-slider',_vm._b({class:[_vm.tutorSession===2?'tutorial-highlight':''],on:{\"callback\":_vm.adjustTimeline,\"drag-end\":function($event){}},model:{value:(_vm.vuetimeline),callback:function ($$v) {_vm.vuetimeline=$$v},expression:\"vuetimeline\"}},'vue-slider',_vm.timelineConfig,false)),_vm._v(\" \"),_c('div',{staticClass:\"btnContainer\",class:[(_vm.tutorSession===3||_vm.tutorSession===4)?'tutorial-highlight':''],on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnStart($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.btnEnd($event)}}},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.toggleReplay}}),_vm._v(\" \"),_c('div',{class:[_vm.showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']},[_c('div',{staticClass:\"bounceBtn rotate\"}),_vm._v(\" \"),_c('div',{staticClass:\"cancelBtn\"})])])],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertAppear),expression:\"alertAppear\"}],attrs:{\"id\":\"alert-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          减少些音符才能做成音乐盒，是否继续上传\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.alertAppear=false}}},[_vm._v(\"再调整\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.bounceProject}},[_vm._v(\"任性上传\")])])])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bouncing),expression:\"bouncing\"}],staticClass:\"mask\"},[_c('p',[_vm._v(\"存储中...\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession>0),expression:\"tutorSession>0\"}],staticClass:\"hint-mask\",attrs:{\"id\":\"tutorial-mask\"},on:{\"touchend\":_vm.tutorProgress}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===2),expression:\"tutorSession===2\"}],staticClass:\"hint-text\",attrs:{\"id\":\"timeline-hint\"}},[_c('h3',[_vm._v(\"进度条\")]),_c('p',[_vm._v(\"拖动原点改变时间\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===3),expression:\"tutorSession===3\"}],staticClass:\"hint-text\",attrs:{\"id\":\"play-hint\"}},[_c('h3',[_vm._v(\"功能按钮\")]),_c('p',[_vm._v(\"点击播放/暂停\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===4),expression:\"tutorSession===4\"}],staticClass:\"hint-text\",attrs:{\"id\":\"longpress-hint\"}},[_c('h3',[_vm._v(\"功能按钮\")]),_c('p',[_vm._v(\"长按后点击：保存/取消\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===5),expression:\"tutorSession===5\"}],staticClass:\"hint-text\",attrs:{\"id\":\"swipe-hint\"}},[_c('h3',[_vm._v(\"多轨编曲\")]),_c('p',[_vm._v(\"上下滑动切换轨道编曲\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===6),expression:\"tutorSession===6\"}],staticClass:\"hint-text\",attrs:{\"id\":\"clear-hint\"}},[_c('h3',[_vm._v(\"多轨编曲\")]),_c('p',[_vm._v(\"清空轨道\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.handClass!='hidehand'),expression:\"handClass!='hidehand'\"}],class:[_vm.tutorClass],attrs:{\"id\":\"tutorhand\"}},[_c('div',{class:[_vm.handClass]})])],1)}\nvar NMBMaker_staticRenderFns = []\nvar NMBMaker_esExports = { render: NMBMaker_render, staticRenderFns: NMBMaker_staticRenderFns }\n/* harmony default export */ var components_NMBMaker = (NMBMaker_esExports);\n// CONCATENATED MODULE: ./src/components/NMBMaker.vue\nfunction NMBMaker_injectStyle (ssrContext) {\n  __webpack_require__(\"Dkm+\")\n}\nvar NMBMaker_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar NMBMaker___vue_template_functional__ = false\n/* styles */\nvar NMBMaker___vue_styles__ = NMBMaker_injectStyle\n/* scopeId */\nvar NMBMaker___vue_scopeId__ = \"data-v-4ac33d9c\"\n/* moduleIdentifier (server only) */\nvar NMBMaker___vue_module_identifier__ = null\nvar NMBMaker_Component = NMBMaker_normalizeComponent(\n  NMBMaker,\n  components_NMBMaker,\n  NMBMaker___vue_template_functional__,\n  NMBMaker___vue_styles__,\n  NMBMaker___vue_scopeId__,\n  NMBMaker___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_NMBMaker = (NMBMaker_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/common/countButton.vue\n\n/* harmony default export */ var countButton = ({\n  // https://vuejs.org/v2/guide/components.html#Props\n  props: {\n    initCount: Number,\n    initActive: Boolean,\n    iconImg: String,\n    onClickCall: {\n      type: Function,\n      default: function _default() {\n        return function () {\n          console.log('tap tap in count Button');\n        };\n      }\n    }\n  },\n  computed: {\n    style: function style() {\n      // return 'background-color: ' + this.hovering ? this.color: 'red';\n    }\n  },\n  data: function data() {\n    return {\n      currentActiveCount: 0,\n      currentActive: false\n    };\n  },\n\n  watch: {},\n  created: function created() {\n    this.currentActive = this.initActive;\n    this.currentActiveCount = this.currentActive ? this.initCount : this.initCount + 1;\n  },\n  mounted: function mounted() {},\n  updated: function updated() {},\n\n  methods: {\n    updateButton: function updateButton() {\n      // if (this.currentActive) {\n      //   this.currentActiveCount -= 1;\n      // } else {\n      //   this.currentActiveCount += 1;\n      // }\n      this.currentActive = !this.currentActive;\n      this.onClickCall();\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-55643781\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/countButton.vue\nvar countButton_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btnContainer\",on:{\"click\":_vm.updateButton}},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"active-btn-background\"})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideDown\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"btn active\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount))])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.currentActive),expression:\"!currentActive\"}],staticClass:\"btn inactive\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount-1))])])])],1)}\nvar countButton_staticRenderFns = []\nvar countButton_esExports = { render: countButton_render, staticRenderFns: countButton_staticRenderFns }\n/* harmony default export */ var common_countButton = (countButton_esExports);\n// CONCATENATED MODULE: ./src/components/common/countButton.vue\nfunction countButton_injectStyle (ssrContext) {\n  __webpack_require__(\"2pCB\")\n}\nvar countButton_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar countButton___vue_template_functional__ = false\n/* styles */\nvar countButton___vue_styles__ = countButton_injectStyle\n/* scopeId */\nvar countButton___vue_scopeId__ = \"data-v-55643781\"\n/* moduleIdentifier (server only) */\nvar countButton___vue_module_identifier__ = null\nvar countButton_Component = countButton_normalizeComponent(\n  countButton,\n  common_countButton,\n  countButton___vue_template_functional__,\n  countButton___vue_styles__,\n  countButton___vue_scopeId__,\n  countButton___vue_module_identifier__\n)\n\n/* harmony default export */ var components_common_countButton = (countButton_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/NMBViewer.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\n\n// const musicPart;\n\n/* harmony default export */ var NMBViewer = ({\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      // playing: false,\n      loading: true,\n      workIntroAppear: false,\n      controlPanalAppear: false,\n      titleUpdateAppear: false,\n      playing: false,\n      userId: 0,\n      favStatus: false,\n      newWorkTitle: \"\",\n      finalNewWorkTitle: \"\"\n    };\n  },\n\n  computed: {\n    project: function project() {\n      return this.$store.state.recordProject;\n    },\n    projectInfo: function projectInfo() {\n      return this.$store.state.recordProjectInfo;\n    }\n  },\n  methods: {\n    load: function load() {},\n    loadMusicById: function loadMusicById() {\n      var _this = this;\n\n      alert(1);\n      console.log(\"hehe\", this.$store.state);\n      var id = this.$store.state.route.query.id;\n\n      if (id) {\n        // 从id取作品\n        console.log(\"mmm\", id);\n        this.$store.dispatch(\"FETCH_MBOX\", { id: id }).then(function () {\n          console.log(\"workPart\", _this.project);\n          console.log(\"work info\", _this.projectInfo);\n          _this.favStatus = _this.projectInfo.favStatus;\n          // alert('load complete');\n          // this.togglePlay();\n          var fullPath = \"\" + location.origin + location.pathname + \"#/new-music-box-viewer?id=\" + _this.$store.state.route.query.id;\n          wx_share_prepareShareContent({\n            title: \"MUSIXISE\",\n            desc: \"\\u6765\\u542C\" + _this.projectInfo.userVO.realname + \"\\u7684\\u4F5C\\u54C1-\" + _this.projectInfo.title,\n            // fullPath:location.href.split('#')[0],\n            fullPath: fullPath,\n            imgUrl: \"http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png\"\n          });\n        });\n      } else {\n        // 不会出现这个情况\n        this.$store.dispatch(\"FETCH_MBOX\", { id: 50 }).then(function () {\n          console.log(\"workPart\", _this.project);\n          console.log(\"work info\", _this.projectInfo);\n          _this.favStatus = _this.projectInfo.favStatus;\n          // alert('load complete');\n          // this.togglePlay();\n        });\n      }\n    },\n    togglePlay: function togglePlay() {\n      // alert('111')\n      preview(this.project, !this.playing);\n      this.playing = !this.playing;\n    },\n    toggleFav: function toggleFav() {\n      this.favStatus = +!this.favStatus;\n      toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus\n      }).then(function () {}).catch(function (err) {\n        // alert(JSON.stringify(err))\n      });\n    },\n    updateWorkTitle: function updateWorkTitle() {\n      var _this2 = this;\n\n      api_updateWorkTitle({\n        id: this.$store.state.route.query.id,\n        title: this.newWorkTitle\n      });\n      this.finalNewWorkTitle = this.newWorkTitle;\n      var fullPath = \"\" + location.origin + location.pathname + \"#/new-music-box-viewer?id=\" + this.$store.state.route.query.id;\n      wx_share_prepareShareContent({\n        title: \"MUSIXISE\",\n        desc: \"\\u6765\\u542C\" + this.projectInfo.userVO.realname + \"\\u7684\\u4F5C\\u54C1-\" + this.newWorkTitle,\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: \"http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png\"\n      });\n      setTimeout(function () {\n        _this2.titleUpdateAppear = false;\n      }, 300);\n    },\n    redirectToMaker: function redirectToMaker() {\n      this.$router.push({\n        path: \"/new-music-box-maker\"\n        // query: {\n        //   id\n        // }\n      });\n    },\n    redirectToMusixiser: function redirectToMusixiser(id) {\n      if (id) {\n        this.$router.push({\n          path: \"/musixiser\",\n          query: {\n            id: id\n          }\n        });\n      }\n    },\n    purchaseItem: function purchaseItem() {\n      console.log(\"you are about to purchase \" + this.projectInfo.id);\n      // this.$toast('尚未开发购买功能');\n      // WxShare.makeWxOrder({ pid: 1, wid: this.projectInfo.id, amount: 1 })\n      //   .then(res => {\n      //     console.log(\"pay succeed\");\n      //   })\n      //   .catch(err => {\n      //     console.log(\"pay fail\");\n      //   });\n      wx_share_newMakeWxOrder({ pid: 1, wid: this.projectInfo.id, amount: 1 }, function () {\n        console.log(\"pay succeed\");\n      }, function () {\n        console.log(\"pay fail\");\n      });\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    // check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    alert(1);\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + \"px\";\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      self.loadMusicById();\n      return;\n    }\n    var fullPath = \"\" + location.origin + location.pathname + \"#/new-music-box-viewer?id=\" + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: \"MUSIXISE\",\n        desc: \"分享一个八音盒\",\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: \"https://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png\"\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam(\"code\") || js_cookie[\"get\"](\"serviceToken\")) {\n      // TODO:ajax call to get info\n      getUserInfo(getUrlParam(\"code\")).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // 网页内cookie失效，需要重新验证\n          js_cookie[\"remove\"](\"serviceToken\");\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=\" + encodeURIComponent(fullPath) + \"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\");\n        }\n        self.userId = res.data.data.userId;\n        // alert(`welcome${res.data.data.realname}`)\n        // if (!this.project) {\n        self.loadMusicById();\n        // }\n\n        console.log(\"get user info success\", res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"](\"serviceToken\");\n        location.replace(\"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=\" + encodeURIComponent(fullPath) + \"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\");\n      });\n    } else {\n      // 又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=\" + encodeURIComponent(fullPath) + \"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\");\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this3.loading = false;\n    }, 2000);\n    setTimeout(function () {\n      _this3.workIntroAppear = true;\n    }, 4500);\n    setTimeout(function () {\n      _this3.controlPanalAppear = true;\n    }, 5500);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23da7fb8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBViewer.vue\nvar NMBViewer_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})]),_vm._v(\" \"),_c('div',{class:[_vm.playing?'':'not-playing'],attrs:{\"id\":\"mb-shiner\"}})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\",on:{\"click\":function($event){_vm.userId === _vm.projectInfo.userId?_vm.titleUpdateAppear=true:_vm.titleUpdateAppear=false}}},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){_vm.redirectToMusixiser(_vm.projectInfo.userVO.userId)}}},[_c('img',{attrs:{\"src\":_vm.projectInfo.userVO.smallAvatar,\"alt\":\"\"}})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.projectInfo.userVO.realname))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"购买\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"编曲\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"作品名称\")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"作品新名称\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"确认\")])])])])])],1)}\nvar NMBViewer_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar NMBViewer_esExports = { render: NMBViewer_render, staticRenderFns: NMBViewer_staticRenderFns }\n/* harmony default export */ var components_NMBViewer = (NMBViewer_esExports);\n// CONCATENATED MODULE: ./src/components/NMBViewer.vue\nfunction NMBViewer_injectStyle (ssrContext) {\n  __webpack_require__(\"m/X3\")\n}\nvar NMBViewer_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar NMBViewer___vue_template_functional__ = false\n/* styles */\nvar NMBViewer___vue_styles__ = NMBViewer_injectStyle\n/* scopeId */\nvar NMBViewer___vue_scopeId__ = \"data-v-23da7fb8\"\n/* moduleIdentifier (server only) */\nvar NMBViewer___vue_module_identifier__ = null\nvar NMBViewer_Component = NMBViewer_normalizeComponent(\n  NMBViewer,\n  components_NMBViewer,\n  NMBViewer___vue_template_functional__,\n  NMBViewer___vue_styles__,\n  NMBViewer___vue_scopeId__,\n  NMBViewer___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_NMBViewer = (NMBViewer_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/common/pieProgress.vue\n\n// https://codepen.io/jo-asakura/pen/stFHi\n/* harmony default export */ var pieProgress = ({\n  props: {\n    progress: Number\n  },\n  computed: {\n    style: function style() {}\n  },\n  data: function data() {\n    return {};\n  },\n\n  watch: {},\n  created: function created() {\n    // alert(this.progress)\n  },\n  mounted: function mounted() {},\n  updated: function updated() {},\n\n  methods: {\n    updateButton: function updateButton() {}\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6a56a6f0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/pieProgress.vue\nvar pieProgress_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"pie-wrapper pie-wrapper--solid\"},[_c('div',{staticClass:\"before\",style:({\n      background:_vm.progress<=50?'#25252b':'#979797',\n      transform:_vm.progress<=50?(\"rotate(\" + ((100  - _vm.progress) / 100 * -360) + \"deg)\"):(\"rotate(\" + ((_vm.progress-50) / 100 * 360) + \"deg)\")\n      })})])])}\nvar pieProgress_staticRenderFns = []\nvar pieProgress_esExports = { render: pieProgress_render, staticRenderFns: pieProgress_staticRenderFns }\n/* harmony default export */ var common_pieProgress = (pieProgress_esExports);\n// CONCATENATED MODULE: ./src/components/common/pieProgress.vue\nfunction pieProgress_injectStyle (ssrContext) {\n  __webpack_require__(\"XgS5\")\n}\nvar pieProgress_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar pieProgress___vue_template_functional__ = false\n/* styles */\nvar pieProgress___vue_styles__ = pieProgress_injectStyle\n/* scopeId */\nvar pieProgress___vue_scopeId__ = \"data-v-6a56a6f0\"\n/* moduleIdentifier (server only) */\nvar pieProgress___vue_module_identifier__ = null\nvar pieProgress_Component = pieProgress_normalizeComponent(\n  pieProgress,\n  common_pieProgress,\n  pieProgress___vue_template_functional__,\n  pieProgress___vue_styles__,\n  pieProgress___vue_scopeId__,\n  pieProgress___vue_module_identifier__\n)\n\n/* harmony default export */ var components_common_pieProgress = (pieProgress_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-konva/lib/vue-konva.min.js\nvar vue_konva_min = __webpack_require__(\"rc1w\");\nvar vue_konva_min_default = /*#__PURE__*/__webpack_require__.n(vue_konva_min);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MBRollMaker.vue\n\n\n// TODO: IMPORTANT MEMO: reschedule(clear then schedule, might lead to jump/click)\n// activeJ那块 现找播放行不行\n\n\n\n\n\n\n\n\n\n\nwindow.Tone = __webpack_require__(\"ZnLv\");\nvar musicPart = undefined;\nvar musicScale = [0, 2, 4, 5, 7, 9, 11, 12, 14, 16, 17, 19, 21, 23, 24, 26, 28, 29];\n// const colors = ['#8fd3c7', '#95c631', '#edda28', '#f7943d', '#e43159', '#bf4ea8', '#4d61d9', '#45b5a1', '#8fd3c7', '#95c631', '#edda28', '#f7943d', '#e43159', '#bf4ea8', '#4d61d9', '#45b5a1', '#edda28', '#f7943d']\nvar colors = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18];\ncolors.fill('#9FB2CF', 0, 18);\nvar invalidColors = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18];\ninvalidColors.fill('#7D90AD', 0, 18);\nvar last_i = -1;\nvar last_j = -1;\nwindow.cursorSchedules = [];\nvar aInterval = undefined;\nvar MBRollMaker_extendBtnsTimeout = undefined;\nvar TIME_PER_NOTE = 0.25;\n// const FULL_NOTE_NUM = 40; //80 notes, then if set 20 per page, it would be 4 pages\nvar FULL_NOTE_NUM = 30; // tempo 180, 20seconds => 120 notes\nvar NOTE_NUM_PER_SECTOR = 10;\n// const MB_DUR = 5; // 20 seconds length\nvar MB_DUR = 5; // 20 seconds length\nvar MIN_TEMPO = 60;\nvar MAX_TEMPO = 180;\nvue_esm[\"a\" /* default */].use(vue_konva_min_default.a);\nvar synth = new Tone.Sampler({\n  C4: 'C4.[mp3|ogg]',\n  'D#4': 'Ds4.[mp3|ogg]',\n  'F#4': 'Fs4.[mp3|ogg]',\n  A4: 'A4.[mp3|ogg]',\n  C5: 'C5.[mp3|ogg]',\n  'D#5': 'Ds5.[mp3|ogg]',\n  'F#5': 'Fs5.[mp3|ogg]',\n  A5: 'A5.[mp3|ogg]',\n  C6: 'C6.[mp3|ogg]'\n}, {\n  release: 1,\n  // 'baseUrl': '/static/audio/'\n  baseUrl: '//cnbj1.fds.api.xiaomi.com/mbox/audio/'\n}).toMaster();\n\nvar pulseOptions = {\n  oscillator: {\n    type: 'triangle'\n  },\n  envelope: {\n    release: 0.07\n  }\n};\nvar MBRollMaker_piano = new Tone.PolySynth(18, Tone.Synth, pulseOptions).toMaster();\n/* harmony default export */ var MBRollMaker = ({\n  components: {\n    // countButton,\n    pieProgress: components_common_pieProgress\n  },\n  data: function data() {\n    return {\n      NOTE_CATEGORY: 18,\n      ONE_PAGE_NOTE_NUM: 20,\n      NOTE_NUM_PER_SECTOR: NOTE_NUM_PER_SECTOR,\n      tempo: 80,\n      configKonva: {\n        width: 0,\n        height: 0\n      },\n      configNoteRect: {},\n      activeJ: -1, // highlight timeline\n      sector: 1, // 2*4-1,可以滚动7次，营造处4页的氛围\n      rectArray: [[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], []],\n      alertAppear: false,\n      showExtendBtns: false,\n      playing: false,\n      currentTime: 0\n    };\n  },\n\n  filters: {\n    intTime: function intTime(floatTime) {\n      return Math.floor(floatTime) % 20;\n      // return floatTime\n    }\n  },\n  computed: {\n    tempoLength: function tempoLength() {\n      var k = 100 / (MAX_TEMPO - MIN_TEMPO);\n      var b = -(MIN_TEMPO * k);\n      return { height: k * this.tempo + b + '%' };\n    }\n  },\n  methods: {\n    setupCanvas: function setupCanvas() {\n      var docElem = document.documentElement;\n      this.configKonva = {\n        width: docElem.getBoundingClientRect().width - 50,\n        height: window.innerHeight\n      };\n      this.configNoteRect = {\n        width: (docElem.getBoundingClientRect().width - 50) / this.NOTE_CATEGORY,\n        height: window.innerHeight / this.ONE_PAGE_NOTE_NUM,\n        fill: '#fff',\n        stroke: '#000',\n        strokeWidth: 0.5\n      };\n      this.scheduleCursor();\n    },\n    scheduleCursor: function scheduleCursor() {\n      var _this = this;\n\n      var fullNoteNumWithinDur = Math.ceil(MB_DUR / (TIME_PER_NOTE * 120 / this.tempo));\n      // const fullNoteNumWithinDur = 10;\n      // console.log('full note num', fullNoteNumWithinDur);\n      // let lastTiming = 0;\n\n      var _loop = function _loop(i) {\n        if (i <= fullNoteNumWithinDur - 1) {\n          // 在有效范围，已规划 => 要修改\n          Tone.Transport.clear(cursorSchedules[i]);\n          cursorSchedules[i] = Tone.Transport.scheduleRepeat(function (time) {\n            _this.activeJ = i;\n            _this.currentTime = i * TIME_PER_NOTE * 120 / _this.tempo;\n            // const now = performance.now();\n            // console.log(now - lastTiming);\n            // lastTiming = now;\n            _this.rectArray.forEach(function (noteSeq, noteIndex) {\n              if (noteSeq[i]) {\n                synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[noteIndex], 'midi'), 0.25);\n              }\n            });\n            // synth.triggerAttackRelease(Tone.Frequency(60, 'midi'), 0.1);\n          }, fullNoteNumWithinDur * TIME_PER_NOTE * 120 / _this.tempo, i * TIME_PER_NOTE * 120 / _this.tempo);\n        } else if (i > fullNoteNumWithinDur - 1 && cursorSchedules[i]) {\n          // 不在有效范围，已规划 => 不清除，但禁掉\n          Tone.Transport.clear(cursorSchedules[i]);\n          cursorSchedules[i] = '';\n        } else {\n          // 不在有效范围，未规划 => 储存，但不规划\n        }\n      };\n\n      for (var i = 0; i <= FULL_NOTE_NUM - 1; i++) {\n        _loop(i);\n      }\n      console.log(cursorSchedules);\n      console.log(Tone.Transport._scheduledEvents);\n    },\n    setupRect: function setupRect(i, j, sector) {\n      var fill = '';\n      // split NOTE_NUM_PER_SECTOR and this.NOTE_NUM_PER_SECTOR for ANIMATION!!!\n      var index = j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR;\n      var withinDur = index * TIME_PER_NOTE * 120 / this.tempo < MB_DUR;\n      if (index == this.activeJ && this.rectArray[i][index]) {\n        // active current note: lighter color\n        fill = withinDur ? '#6477b1' : '#A9B9FF';\n      } else if (index == this.activeJ && !this.rectArray[i][index]) {\n        // inactive current light blue\n        fill = withinDur ? '#292B3A' : '#2B2E3D';\n      } else if (this.rectArray[i][index]) {\n        // active non-current note\n        fill = withinDur ? colors[i] : '#333740';\n      } else {\n        // incative non-current note\n        fill = withinDur ? 'rgba(0,0,0,' + (0.98 - i * 0.3 / this.NOTE_CATEGORY) + ')' : '#131315';\n      }\n      return extends_default()({}, this.configNoteRect, {\n        x: i * this.configKonva.width / this.NOTE_CATEGORY,\n        y: j * this.configKonva.height / this.ONE_PAGE_NOTE_NUM,\n        fill: fill\n      });\n    },\n    handleTouchRect: function handleTouchRect(i, j, sector) {\n      // console.log(`trigger ${i},${j+(sector-1)*this.NOTE_NUM_PER_SECTOR}`)\n      // make sound\n      synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], 'midi'), 0.25);\n      // this.rectArray[i][j] = !this.rectArray[i][j] // this is how to assign a two dim array in vue 2.0...\n      var newRow = this.rectArray[i].slice(0);\n      newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = !newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR];\n      this.$set(this.rectArray, i, newRow);\n\n      // update last\n      last_i = i;\n      last_j = j;\n    },\n    handleMoveRect: function handleMoveRect(i, j, sector) {\n      var fullJ = j + (sector - 1) * this.NOTE_NUM_PER_SECTOR;\n      var fullLastJ = last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR;\n      if (j != last_j) {\n        // take this as real note, store arrange\n        this.handleTouchRect(i, j, sector);\n      } else if (i != last_i && j == last_j) {\n        // take this as testing note, no store, no arrange\n        // make sound\n        synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], 'midi'), 0.25);\n        // operate current note view\n        var newRow = this.rectArray[i].slice(0);\n        newRow[fullJ] = !newRow[fullJ];\n        this.$set(this.rectArray, i, newRow);\n\n        // restore last note view\n        var newLastRow = this.rectArray[last_i].slice(0);\n        newLastRow[fullLastJ] = !newLastRow[fullLastJ];\n        this.$set(this.rectArray, last_i, newLastRow);\n\n        // update last\n        last_i = i;\n        last_j = j;\n      } else {\n        // console.log(`ignore ${i},${j}`)\n      }\n    },\n    startloop: function startloop() {\n      Tone.Transport.start('+0.1');\n      this.playing = true;\n    },\n    stoploop: function stoploop() {\n      Tone.Transport.stop();\n      this.playing = false;\n    },\n    toggleReplay: function toggleReplay() {\n      if (this.playing) this.stoploop();else this.startloop();\n    },\n    minusTempo: function minusTempo() {\n      var _this2 = this;\n\n      if (this.tempo > MIN_TEMPO) {\n        this.tempo -= 5;\n        Tone.Transport.seconds = this.activeJ * TIME_PER_NOTE * 120 / this.tempo;\n        Tone.Transport.bpm.rampTo(this.tempo, 0.01);\n        setTimeout(function () {\n          // bpm ramp to, so need a settimeout\n          _this2.scheduleCursor();\n        }, 200);\n      }\n    },\n    addTempo: function addTempo() {\n      var _this3 = this;\n\n      if (this.tempo < MAX_TEMPO) {\n        this.tempo += 5;\n        Tone.Transport.seconds = this.activeJ * TIME_PER_NOTE * 120 / this.tempo;\n        Tone.Transport.bpm.rampTo(this.tempo, 0.01);\n        setTimeout(function () {\n          _this3.scheduleCursor();\n        }, 200);\n      }\n    },\n    scrolldown: function scrolldown() {\n      var _this4 = this;\n\n      clearInterval(aInterval);\n      this.sector == FULL_NOTE_NUM / NOTE_NUM_PER_SECTOR - 1 ? this.NOTE_NUM_PER_SECTOR = NOTE_NUM_PER_SECTOR - 2 : this.NOTE_NUM_PER_SECTOR = 1; // for animation,\n      this.sector <= FULL_NOTE_NUM / NOTE_NUM_PER_SECTOR - 2 ? this.sector += 1 : ''; // this line is real scroll down\n      // below is for animation\n      aInterval = setInterval(function () {\n        _this4.NOTE_NUM_PER_SECTOR += 1;\n        if (_this4.NOTE_NUM_PER_SECTOR == 10) {\n          clearInterval(aInterval);\n        }\n      }, 50);\n    },\n    scrollup: function scrollup() {\n      var _this5 = this;\n\n      clearInterval(aInterval);\n      this.sector == 1 ? this.NOTE_NUM_PER_SECTOR = NOTE_NUM_PER_SECTOR + 2 : this.NOTE_NUM_PER_SECTOR = 20; // for animation,\n      this.sector >= 2 ? this.sector -= 1 : '';\n      aInterval = setInterval(function () {\n        _this5.NOTE_NUM_PER_SECTOR -= 1;\n        if (_this5.NOTE_NUM_PER_SECTOR == 10) {\n          clearInterval(aInterval);\n        }\n      }, 50);\n    },\n    checkBouncibility: function checkBouncibility() {\n      var result = [];\n      for (var i = 0; i <= this.NOTE_CATEGORY - 1; i++) {\n        for (var j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n          if (this.rectArray[i][j]) {\n            result.push({\n              note: Tone.Frequency(60 + musicScale[i], 'midi').toNote(),\n              time: j * TIME_PER_NOTE * 120 / this.tempo\n            });\n          }\n        }\n      }\n      result.sort(function (a, b) {\n        return 0 + a.time - b.time;\n      });\n      return RealMagic(result);\n    },\n    bounceProject: function bounceProject() {\n      var _this6 = this;\n\n      // finally get something like [{note:'A4',time:0},{note:'A5',time:0.3227}]\n      var result = [];\n      for (var i = 0; i <= this.NOTE_CATEGORY - 1; i++) {\n        for (var j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n          if (this.rectArray[i][j]) {\n            result.push({\n              note: Tone.Frequency(60 + musicScale[i], 'midi').toNote(),\n              time: j * TIME_PER_NOTE * 120 / this.tempo\n            });\n          }\n        }\n      }\n      this.$store.dispatch('BOUNCE_PROJECT', {\n        record: result,\n        info: {\n          title: '尚未起名',\n          content: 'default',\n          cover: 'default'\n        }\n      }).then(function (id) {\n        console.log('successfully bounced');\n        _this6.bouncing = false;\n        _this6.$toast('作品已为您存储');\n        _this6.$router.push({\n          path: '/new-music-box-viewer',\n          query: {\n            id: id\n          }\n        });\n      }).catch(function (err) {\n        _this6.bouncing = false;\n        _this6.$toast('非常抱歉，上传作品失败了');\n      });\n    },\n    submitProject: function submitProject() {\n      if (this.checkBouncibility()) {\n        // alert(1);\n        this.bounceProject();\n      } else {\n        // alert(2);\n        this.alertAppear = true;\n      }\n    },\n    clearProject: function clearProject() {},\n    btnStart: function btnStart(e) {\n      var _this7 = this;\n\n      console.log(e);\n      MBRollMaker_extendBtnsTimeout = setTimeout(function () {\n        //show extend buttons\n        _this7.showExtendBtns = true;\n      }, 200);\n    },\n    btnEnd: function btnEnd(e) {\n      // console.log(e)\n      clearTimeout(MBRollMaker_extendBtnsTimeout);\n      var a = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n      console.log(a);\n      if (a && a.classList.contains('bounceBtn')) {\n        this.submitProject();\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('pauseBtn'))) {\n        //播放\n        // console.log(Tone.Transport.state)\n        this.toggleReplay();\n        this.showExtendBtns = false;\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('cancelBtn'))) {\n        //hide extend buttons\n        this.showExtendBtns = false;\n      }\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    this.setupCanvas();\n\n    // regular setup\n    var self = this;\n    Tone.Transport.cancel();\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    // alert(Cookies.get('serviceToken'))\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '划拉划拉八音盒',\n        fullPath: '' + location.origin + location.pathname + '#/new-music-box-roll',\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // 网页内cookie失效，需要重新验证\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-roll') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-roll') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(location.origin + location.pathname + '#/new-music-box-roll') + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {},\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0c05d5a7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBRollMaker.vue\nvar MBRollMaker_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('div',{staticClass:\"roll\"},[_c('v-stage',{attrs:{\"config\":_vm.configKonva}},[_c('v-layer',[_vm._l((_vm.NOTE_CATEGORY),function(i){return _vm._l((_vm.ONE_PAGE_NOTE_NUM),function(j){return _c('v-rect',{key:(\"\" + i + j),attrs:{\"config\":_vm.setupRect(i-1,j-1,_vm.sector)},on:{\"touchstart\":function($event){_vm.handleTouchRect(i-1,j-1,_vm.sector)},\"touchmove\":function($event){_vm.handleMoveRect(i-1,j-1,_vm.sector)}}})})})],2)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"control-panal\"},[_c('div',[_c('div',{staticClass:\"rotate\",attrs:{\"id\":\"scrollup\"},on:{\"touchstart\":_vm.scrollup}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"scrolldown\"},on:{\"touchstart\":_vm.scrolldown}})]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"rotate\",attrs:{\"id\":\"minustempo\"},on:{\"touchstart\":_vm.minusTempo}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"tempo-indicator\"}},[_c('div',{style:(_vm.tempoLength),attrs:{\"id\":\"tempo-progress\"}}),_vm._v(\" \"),_c('p',{attrs:{\"id\":\"tempo-num\"}},[_vm._v(_vm._s(this.tempo)+\" bpm\")])]),_vm._v(\" \"),_c('div',{staticClass:\"rotate\",attrs:{\"id\":\"addtempo\"},on:{\"touchstart\":_vm.addTempo}})]),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"relative\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"center\",\"transform\":\"rotate(90deg)\"}},[_c('pie-progress',{attrs:{\"progress\":100*_vm.currentTime/5}}),_vm._v(\" \"),_c('p',{staticStyle:{\"position\":\"absolute\",\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm._f(\"intTime\")(_vm.currentTime)))])],1),_vm._v(\" \"),_c('div',{staticClass:\"btnContainer\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnStart($event)},\"touchend\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnEnd($event)}}},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.toggleReplay}}),_vm._v(\" \"),_c('div',{class:[_vm.showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']},[_c('div',{staticClass:\"bounceBtn rotate\"}),_vm._v(\" \"),_c('div',{staticClass:\"cancelBtn\"})])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertAppear),expression:\"alertAppear\"}],attrs:{\"id\":\"alert-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          减少些音符才能做成音乐盒，是否继续上传\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.alertAppear=false}}},[_vm._v(\"再调整\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.bounceProject}},[_vm._v(\"任性上传\")])])])])])],1)}\nvar MBRollMaker_staticRenderFns = []\nvar MBRollMaker_esExports = { render: MBRollMaker_render, staticRenderFns: MBRollMaker_staticRenderFns }\n/* harmony default export */ var components_MBRollMaker = (MBRollMaker_esExports);\n// CONCATENATED MODULE: ./src/components/MBRollMaker.vue\nfunction MBRollMaker_injectStyle (ssrContext) {\n  __webpack_require__(\"J8FY\")\n}\nvar MBRollMaker_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MBRollMaker___vue_template_functional__ = false\n/* styles */\nvar MBRollMaker___vue_styles__ = MBRollMaker_injectStyle\n/* scopeId */\nvar MBRollMaker___vue_scopeId__ = \"data-v-0c05d5a7\"\n/* moduleIdentifier (server only) */\nvar MBRollMaker___vue_module_identifier__ = null\nvar MBRollMaker_Component = MBRollMaker_normalizeComponent(\n  MBRollMaker,\n  components_MBRollMaker,\n  MBRollMaker___vue_template_functional__,\n  MBRollMaker___vue_styles__,\n  MBRollMaker___vue_scopeId__,\n  MBRollMaker___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MBRollMaker = (MBRollMaker_Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/vue-infinite-scroll/vue-infinite-scroll.js\nvar vue_infinite_scroll = __webpack_require__(\"bqTm\");\nvar vue_infinite_scroll_default = /*#__PURE__*/__webpack_require__.n(vue_infinite_scroll);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MusixiserDetail.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\n\n\nvar MusixiserDetail_musicPart = undefined;\n\n/* harmony default export */ var MusixiserDetail = ({\n  directives: {\n    infiniteScroll: vue_infinite_scroll_default.a\n  },\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      // playing: false,\n      loading: true,\n      playing: false,\n      userId: 0,\n      isMe: false,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: '',\n      busy: true\n    };\n  },\n\n  computed: {\n    musixiserInfo: function musixiserInfo() {\n      return this.$store.state.musixiserInfo;\n    },\n    musixiserWorksObj: function musixiserWorksObj() {\n      return this.$store.state.musixiserWorksObj;\n    }\n  },\n  methods: {\n    loadMusixiserById: function loadMusixiserById() {\n      console.log('my id: ', this.userId);\n      var id = this.userId;\n      this.$store.dispatch('FETCH_MUSIXISER', {\n        id: id\n      });\n      this.busy = false;\n      // this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n      //   id,\n      //   page:1\n      // })\n    },\n    loadMore: function loadMore() {\n      var _this = this;\n\n      //will call automatically when enter!\n      var id = this.userId;\n      // alert(id)\n      this.busy = true;\n      console.log('1111111', this.musixiserWorksObj.current);\n      this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n        id: id,\n        page: this.musixiserWorksObj.current ? this.musixiserWorksObj.current + 1 : 1\n      }).then(function () {\n        console.log('2222222', _this.musixiserWorksObj);\n        if (_this.musixiserWorksObj.content.length < _this.musixiserWorksObj.total) {\n          _this.busy = false;\n        }\n      });\n    },\n    togglePlay: function togglePlay() {\n      // alert('111')\n      preview(this.project);\n      this.playing = !this.playing;\n    },\n    toggleFav: function toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus\n      });\n    },\n    redirectToWork: function redirectToWork(id) {\n      this.$router.push({\n        path: '/new-music-box-viewer',\n        query: {\n          id: id\n        }\n      });\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    var _this2 = this;\n\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      this.userId = this.$store.state.route.query.id || 149;\n      self.loadMusixiserById();\n      return;\n    }\n    var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '我的地盘你就dê听我的',\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // 网页内cookie失效，需要重新验证\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        self.userId = _this2.$store.state.route.query.id || res.data.data.userId;\n        self.isMe = self.userId == res.data.data.userId;\n        self.loadMusixiserById();\n\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this3.loading = false;\n    }, 2000);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-051f4e98\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MusixiserDetail.vue\nvar MusixiserDetail_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"worklist\",attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.musixiserWorksObj.content),function(item){return _c('div',{staticClass:\"work\",on:{\"click\":function($event){_vm.redirectToWork(item.id)}}},[_c('img',{staticClass:\"cover\",attrs:{\"src\":item.cover=='default'?item.userVO.smallAvatar:item.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"hairline\"}),_vm._v(\" \"),_c('div',{staticClass:\"line line1\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(item.createdDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"line line2\"},[_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(item.userVO.realname))]),_vm._v(\" \"),_c('p',{staticClass:\"likes\"},[_vm._v(\"收藏人数: \"+_vm._s(item.collectNum))])])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && _vm.musixiserWorksObj.content.length==0),expression:\"!loading && musixiserWorksObj.content.length==0\"}],staticClass:\"emptysection\"},[_vm._m(0,false,false)])])}\nvar MusixiserDetail_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"emptytitle\"},[_vm._v(\"暂无作品\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"6rem\"},attrs:{\"src\":__webpack_require__(\"SpEx\"),\"alt\":\"\"}})])}]\nvar MusixiserDetail_esExports = { render: MusixiserDetail_render, staticRenderFns: MusixiserDetail_staticRenderFns }\n/* harmony default export */ var components_MusixiserDetail = (MusixiserDetail_esExports);\n// CONCATENATED MODULE: ./src/components/MusixiserDetail.vue\nfunction MusixiserDetail_injectStyle (ssrContext) {\n  __webpack_require__(\"h6L2\")\n}\nvar MusixiserDetail_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MusixiserDetail___vue_template_functional__ = false\n/* styles */\nvar MusixiserDetail___vue_styles__ = MusixiserDetail_injectStyle\n/* scopeId */\nvar MusixiserDetail___vue_scopeId__ = \"data-v-051f4e98\"\n/* moduleIdentifier (server only) */\nvar MusixiserDetail___vue_module_identifier__ = null\nvar MusixiserDetail_Component = MusixiserDetail_normalizeComponent(\n  MusixiserDetail,\n  components_MusixiserDetail,\n  MusixiserDetail___vue_template_functional__,\n  MusixiserDetail___vue_styles__,\n  MusixiserDetail___vue_scopeId__,\n  MusixiserDetail___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MusixiserDetail = (MusixiserDetail_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MyFav.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\n\n\nvar MyFav_musicPart = undefined;\n\n/* harmony default export */ var MyFav = ({\n  directives: {\n    infiniteScroll: vue_infinite_scroll_default.a\n  },\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      // playing: false,\n      loading: true,\n      playing: false,\n      userId: 0,\n      isMe: false,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: '',\n      busy: true\n    };\n  },\n\n  computed: {\n    musixiserInfo: function musixiserInfo() {\n      return this.$store.state.musixiserInfo;\n    },\n    favWorksObj: function favWorksObj() {\n      return this.$store.state.favWorksObj;\n    }\n  },\n  methods: {\n    loadMusixiserById: function loadMusixiserById() {\n      console.log('my id: ', this.userId);\n      var id = this.userId;\n      this.$store.dispatch('FETCH_MUSIXISER', {\n        id: id\n      });\n      this.busy = false;\n      // this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n      //   id,\n      //   page:1\n      // })\n    },\n    loadMore: function loadMore() {\n      var _this = this;\n\n      //will call automatically when enter!\n      var id = this.userId;\n      // alert(id)\n      this.busy = true;\n      console.log('1111111', this.favWorksObj.current);\n      this.$store.dispatch('FETCH_FAV_WORKS', {\n        id: id,\n        page: this.favWorksObj.current ? this.favWorksObj.current + 1 : 1\n      }).then(function () {\n        console.log('2222222', _this.favWorksObj);\n        if (_this.favWorksObj.content.length < _this.favWorksObj.total) {\n          _this.busy = false;\n        }\n      });\n    },\n    togglePlay: function togglePlay() {\n      // alert('111')\n      preview(this.project);\n      this.playing = !this.playing;\n    },\n    toggleFav: function toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus\n      });\n    },\n    redirectToWork: function redirectToWork(id) {\n      if (id) {\n        this.$router.push({\n          path: '/new-music-box-viewer',\n          query: {\n            id: id\n          }\n        });\n      }\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    var _this2 = this;\n\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      this.userId = this.$store.state.route.query.id || 149;\n      self.loadMusixiserById();\n      return;\n    }\n    var fullPath = '' + location.origin + location.pathname + '#/new-music-box-viewer?id=' + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '我的地盘你就dê听我的',\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png'\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam('code') || js_cookie[\"get\"]('serviceToken')) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam('code')).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // 网页内cookie失效，需要重新验证\n          js_cookie[\"remove\"]('serviceToken');\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n        }\n        self.userId = _this2.$store.state.route.query.id || res.data.data.userId;\n        self.isMe = self.userId == res.data.data.userId;\n        self.loadMusixiserById();\n\n        console.log('get user info success', res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"]('serviceToken');\n        location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n      });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace('https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=' + encodeURIComponent(fullPath) + '&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this3.loading = false;\n    }, 2000);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-66845376\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MyFav.vue\nvar MyFav_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"worklist\",attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.favWorksObj.content),function(item){return _c('div',{staticClass:\"work\",on:{\"click\":function($event){_vm.redirectToWork(item.id)}}},[_c('img',{staticClass:\"cover\",attrs:{\"src\":item.cover=='default'?item.user.smallAvatar:item.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"hairline\"}),_vm._v(\" \"),_c('div',{staticClass:\"line line1\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(item.createdDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"line line2\"},[_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(item.user.realname))]),_vm._v(\" \"),_c('p',{staticClass:\"likes\"},[_vm._v(\"收藏人数: \"+_vm._s(item.collectNum))])])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && _vm.favWorksObj.content.length==0),expression:\"!loading && favWorksObj.content.length==0\"}],staticClass:\"emptysection\"},[_vm._m(0,false,false)])])}\nvar MyFav_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"emptytitle\"},[_vm._v(\"暂无作品\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"6rem\"},attrs:{\"src\":__webpack_require__(\"SpEx\"),\"alt\":\"\"}})])}]\nvar MyFav_esExports = { render: MyFav_render, staticRenderFns: MyFav_staticRenderFns }\n/* harmony default export */ var components_MyFav = (MyFav_esExports);\n// CONCATENATED MODULE: ./src/components/MyFav.vue\nfunction MyFav_injectStyle (ssrContext) {\n  __webpack_require__(\"L6Nk\")\n}\nvar MyFav_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar MyFav___vue_template_functional__ = false\n/* styles */\nvar MyFav___vue_styles__ = MyFav_injectStyle\n/* scopeId */\nvar MyFav___vue_scopeId__ = \"data-v-66845376\"\n/* moduleIdentifier (server only) */\nvar MyFav___vue_module_identifier__ = null\nvar MyFav_Component = MyFav_normalizeComponent(\n  MyFav,\n  components_MyFav,\n  MyFav___vue_template_functional__,\n  MyFav___vue_styles__,\n  MyFav___vue_scopeId__,\n  MyFav___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_MyFav = (MyFav_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Recommend.vue\n\n// window.Tone = require('tone')\n\n\n\n\n\n\nvar Recommend_musicPart = undefined;\n\n/* harmony default export */ var Recommend = ({\n  components: {\n    countButton: components_common_countButton\n  },\n  data: function data() {\n    return {\n      searching: false,\n      loading: false,\n      recommendations: {}\n    };\n  },\n\n  computed: {},\n  methods: {\n    load: function load() {\n      getRecommendations().then(function (res) {\n        console.log(\"index:\", res);\n      });\n    },\n    search: function search() {}\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    clearTone();\n    next();\n  },\n  created: function created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    var self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + \"px\";\n\n    var inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      self.loadMusicById();\n      return;\n    }\n    var fullPath = \"\" + location.origin + location.pathname + \"#/new-music-box-viewer?id=\" + self.$store.state.route.query.id;\n    wx_share_prepareShareConfig().then(function () {\n      wx_share_prepareShareContent({\n        title: \"MUSIXISE\",\n        desc: \"分享一个八音盒\",\n        // fullPath:location.href.split('#')[0],\n        fullPath: fullPath,\n        imgUrl: \"https://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png\"\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (getUrlParam(\"code\") || js_cookie[\"get\"](\"serviceToken\")) {\n      //TODO:ajax call to get info\n      getUserInfo(getUrlParam(\"code\")).then(function (res) {\n        if (res.data.errcode >= 20000) {\n          // 网页内cookie失效，需要重新验证\n          js_cookie[\"remove\"](\"serviceToken\");\n          location.replace(\n          // will publish to node project m-musixise, under '/music-box' path\n          \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=\" + encodeURIComponent(fullPath) + \"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\");\n        }\n        self.userId = res.data.data.userId;\n        // alert(`welcome${res.data.data.realname}`)\n        // if (!this.project) {\n        self.loadMusicById();\n        // }\n\n        console.log(\"get user info success\", res.data.data);\n      }).catch(function (err) {\n        js_cookie[\"remove\"](\"serviceToken\");\n        location.replace(\"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=\" + encodeURIComponent(fullPath) + \"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\");\n      });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=\" + encodeURIComponent(fullPath) + \"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\");\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    // this.startRecord();\n    setTimeout(function () {\n      _this.loading = false;\n    }, 2000);\n    setTimeout(function () {\n      _this.workIntroAppear = true;\n    }, 4500);\n    setTimeout(function () {\n      _this.controlPanalAppear = true;\n    }, 5500);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated: function updated() {}\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-324355b7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Recommend.vue\nvar Recommend_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',[_c('img',{attrs:{\"src\":_vm.projectInfo.owner.smallAvatar,\"alt\":\"\"}})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.projectInfo.owner.nickName))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"购买\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"编曲\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"作品名称\")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"作品新名称\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"确认\")])])])])])],1)}\nvar Recommend_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar Recommend_esExports = { render: Recommend_render, staticRenderFns: Recommend_staticRenderFns }\n/* harmony default export */ var components_Recommend = (Recommend_esExports);\n// CONCATENATED MODULE: ./src/components/Recommend.vue\nfunction Recommend_injectStyle (ssrContext) {\n  __webpack_require__(\"MCCq\")\n}\nvar Recommend_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar Recommend___vue_template_functional__ = false\n/* styles */\nvar Recommend___vue_styles__ = Recommend_injectStyle\n/* scopeId */\nvar Recommend___vue_scopeId__ = \"data-v-324355b7\"\n/* moduleIdentifier (server only) */\nvar Recommend___vue_module_identifier__ = null\nvar Recommend_Component = Recommend_normalizeComponent(\n  Recommend,\n  components_Recommend,\n  Recommend___vue_template_functional__,\n  Recommend___vue_styles__,\n  Recommend___vue_scopeId__,\n  Recommend___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Recommend = (Recommend_Component.exports);\n\n// CONCATENATED MODULE: ./src/router/index.js\n\n\n\n// import MBMaker from '@/components/MBMaker';\n\n// import MBAuthor from '@/components/MBAuthor';\n\n// import MBViewer from '@/components/MBViewer';\n\n\n\n\n\n\nvue_esm[\"a\" /* default */].use(vue_router_esm[\"a\" /* default */]);\n\n/* harmony default export */ var router = (new vue_router_esm[\"a\" /* default */]({\n  // mode: 'history', // avoid hash in url\n  routes: [{\n    path: '/',\n    name: 'HelloWorld',\n    component: src_components_HelloWorld\n  }, {\n    path: '/new-music-box-maker',\n    name: 'NMBMaker',\n    component: src_components_NMBMaker\n  }, {\n    path: '/new-music-box-roll',\n    name: 'MBRoll',\n    component: src_components_MBRollMaker\n  }, {\n    path: '/new-music-box-viewer',\n    name: 'NMBViewer',\n    component: src_components_NMBViewer\n  }, {\n    path: '/musixiser',\n    name: 'MusixiserDetail',\n    component: src_components_MusixiserDetail\n  }, {\n    path: '/myfav',\n    name: 'MyFav',\n    component: src_components_MyFav\n  }, {\n    path: '/recommend',\n    name: 'Recommend',\n    component: src_components_Recommend\n  }]\n}));\n// CONCATENATED MODULE: ./src/main.js\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n// import VueTouch from 'vue-touch';\n\n\n\n\n\n\n// Vue.use(VueTouch, { name: 'v-touch' });\nvue_esm[\"a\" /* default */].use(lib_default.a, { defaultType: 'center', duration: 2500, wordWrap: false, width: 'auto' });\nvue_esm[\"a\" /* default */].config.productionTip = false;\nvar store = createStore();\nObject(vuex_router_sync[\"sync\"])(store, router);\n\n/* eslint-disable no-new */\nnew vue_esm[\"a\" /* default */]({\n  el: '#app',\n  router: router,\n  store: store,\n  template: '<App/>',\n  components: { App: src_App }\n});\n\n/***/ }),\n\n/***/ \"SpEx\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/img/oops.7bb4a06.png\";\n\n/***/ }),\n\n/***/ \"XgS5\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"e195\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"h4Ia\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"h6L2\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"m/X3\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"v2ns\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.0e5cd1af88bbb9e45b97.js","import * as Cookies from 'js-cookie';\n// import Vue from 'vue';\nconst axios = require('axios');\n\naxios.interceptors.response.use((res) => {\n  if (res.data.errcode !== '0') {\n    alert(res.data.resmsg);\n    return Promise.reject(res);\n  }\n  return res;\n});\nconst reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n};\n// const tokenObj = { access_token: '' };\n// TODO:cause 500?????? just cuz this few lines???\n\nexport function getUserInfo(wxcode) {\n  const tokenInCookie = Cookies.get('serviceToken');\n  if (tokenInCookie) {\n    // alert('cookie used');\n    reqConfig.headers.Authorization = `${tokenInCookie}`;\n    // tokenObj.access_token = tokenInCookie;\n    return axios.get('//api.octave-love.com/api/v1/user/getInfo', reqConfig);\n  } else if (!tokenInCookie && wxcode) {\n    // alert('no cookie');\n    return new Promise((resolve, reject) => {\n      axios\n        .post(\n          `//api.octave-love.com/api/v1/user/oauth/wechat/callback?code=${wxcode}`,\n          '',\n          reqConfig,\n        )\n        .then(\n          (res) => {\n            if (res.data.errcode === 20001) {\n              reject(20001); // 相当于return了\n            }\n            const serviceToken = res.data.data.id_token;\n            reqConfig.headers.Authorization = `${serviceToken}`;\n            // tokenObj.access_token = serviceToken;\n            Cookies.set('serviceToken', serviceToken, {\n              expires: 7,\n            });\n            return axios.get('//api.octave-love.com/api/v1/user/getInfo', reqConfig);\n          },\n          () => {\n            reject();\n          },\n        )\n        .then((res) => {\n          resolve(res);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n  // !tokenInCookie&&!wxcode的情况在app.js里处理, 不会走到这里\n  return false;\n}\n\nexport function uploadRecord(record, info) {\n  return new Promise((resolve, reject) => {\n    // create a new midi file\n    const midi = MidiConvert.create();\n    // add a track\n    midi\n      .track()\n      // select an instrument by its MIDI patch number\n      .patch(32)\n      // chain note events: note, time, duration\n      .note(60, 0, 2)\n      .note(63, 1, 2)\n      .note(60, 2, 2);\n    // TODO: reduce midi here\n    // write the output\n    // fs.writeFileSync(\"output.mid\", midi.encode(), \"binary\")\n\n    const formReqConfig = {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        processData: false,\n        Authorization: reqConfig.headers.Authorization,\n      },\n    };\n    // const blob = new Blob([JSON.stringify(record)]);\n    // const blob = new Blob([JSON.stringify(midi.encode())]);\n\n    const binaryString = midi.encode();\n    // write the output\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n      bytes[i] = binaryString.charCodeAt(i);\n    }\n    const blob = new Blob([bytes], {\n      type: 'audio/midi;charset=binary',\n    });\n    const reader = new FileReader();\n    reader.onload = async (event) => {\n      const fd = new FormData();\n      // fd.append('fname', 'test.txt');\n      fd.append('fname', 'output.mid');\n      fd.append('data', event.target.result);\n      // fd.append('access_token', tokenObj.access_token);\n      let postFix = '';\n      try {\n        // important, othereise dispatch won't be stoped here...\n        postFix = await axios.post('//api.octave-love.com/api/v1/uploadAudio', fd, formReqConfig);\n      } catch (e) {\n        console.log(e);\n        reject(e);\n      }\n      const workURL = `${postFix.data.data}`;\n      const param = {\n        // ...tokenObj,\n        ...info, // title,content.cover\n        url: workURL,\n      };\n      console.log(workURL);\n      return axios\n        .post('//api.octave-love.com/api/v1/work/create', JSON.stringify(param), reqConfig)\n        .then((res) => {\n          resolve(res.data.data);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    };\n    reader.readAsDataURL(blob);\n  });\n  // trigger the read from the reader...\n}\n\nexport function fetchMbox(id) {\n  return axios.get(`//api.octave-love.com/api/v1/work/detail/${id}`, reqConfig);\n}\nexport function fetchMusixiser(id) {\n  return axios.get(`//api.octave-love.com/api/v1/user/detail/${id}`, reqConfig);\n}\nexport function fetchWorksFromMusixiser(id, page) {\n  return axios.get(\n    `//api.octave-love.com/api/v1/work/getListByUid/${id}?page=${page}&size=15`,\n    reqConfig,\n  );\n}\nexport function fetchFavWorks(id, page) {\n  return axios.get(\n    `//api.octave-love.com/api/v1/favorite/getWorkList/${id}?page=${page}&size=15`,\n    reqConfig,\n  );\n}\nexport function toggleFavSong({ workId, status }) {\n  return axios.post(\n    '//api.octave-love.com/api/v1/favorite/create',\n    JSON.stringify({ workId, status }),\n    reqConfig,\n  );\n  // .then((res) => { console.log(res); })\n  // .catch((err) => { console.log(err); });\n}\nexport function updateWorkTitle({ id, title }) {\n  return axios.put(\n    `//api.octave-love.com/api/v1/work/updateWork/${id}`,\n    JSON.stringify({ title }),\n    reqConfig,\n  );\n  // .then((res) => { console.log(res); })\n  // .catch((err) => { console.log(err); });\n}\nexport function getRecommendations() {\n  return axios.post('//api.octave-love.com/api/v1/home', '', reqConfig);\n}\n\nexport function createOrder({ pid, wid, amount, address }) {\n  return axios.post(\n    '//api.octave-love.com/api/v1/shop/orders/create',\n    JSON.stringify({ pid, wid, amount, address }),\n    reqConfig,\n  );\n}\n\nexport function payOrder({ orderId }) {\n  return axios.post(\n    `//api.octave-love.com/api/v1/shop/pay/unifiedorder?orderId=${orderId}`,\n    '',\n    reqConfig,\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/api.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fcaae542\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fcaae542\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","export function getUrlParam(key) {\n  const reg = new RegExp(`[?|&]${key}=([^&]+)`);\n  const match = location.search.match(reg);\n  return match && match[1];\n}\n\nexport function getUrlParam1(key) {\n  const reg = new RegExp(`[?|&]${key}=([^&]+)`);\n  const match = location.search.match(reg);\n  return match && match[1];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/util.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d40ace0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelloWorld.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d40ace0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelloWorld.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3d40ace0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","const Tone = require('tone');\n\nTone.Transport.cancel();\nconst SAME_NOTE_INTERVAL = 1; // 同一个音不能相距小于1秒，不然音片打击出问题\nlet musicPreview;\n\nlet oncePlayed = false;\n// notesInfo example\n// let work = [{note: \"E4\", time: 0.14585000000000037},\n// {note: \"G4\", time: 1.0295},\n// {note: \"G4\", time: 1.3985},\n// {note: \"E4\", time: 2.6605300000000005},\n// {note: \"D4\", time: 3.4207450000000006},\n// {note: \"C4\", time: 4.196245000000001},\n// {note: \"G4\", time: 2.671395000000004},\n// {note: \"A4\", time: 3.35932},\n// {note: \"B4\", time: 4.183044999999998}]\n// const mbox = new Tone.MonoSynth({\n//   volume: -10,\n//   envelope: {\n//     attack: 0.1,\n//     decay: 0.3,\n//     release: 2,\n//   },\n//   filterEnvelope: {\n//     attack: 0.001,\n//     decay: 0.01,\n//     sustain: 0.5,\n//     baseFrequency: 200,\n//     octaves: 2.6,\n//   },\n// }).toMaster();\n// const mbox = new Tone.PolySynth(6, Tone.Synth, {\n//   oscillator: {\n//     partials: [0, 2, 3, 4],\n//   },\n// }).toMaster();\n// const mbox = new Tone.Sampler({\n//   C4: 'C4.[mp3|ogg]',\n//   'D#4': 'Ds4.[mp3|ogg]',\n//   'F#4': 'Fs4.[mp3|ogg]',\n//   A4: 'A4.[mp3|ogg]',\n//   C5: 'C5.[mp3|ogg]',\n//   'D#5': 'Ds5.[mp3|ogg]',\n//   'F#5': 'Fs5.[mp3|ogg]',\n//   A5: 'A5.[mp3|ogg]',\n//   C6: 'C6.[mp3|ogg]',\n// }, {\n//   release: 1,\n//   baseUrl: '/static/audio/',\n// }).toMaster();\n\nconst mbox = new Tone.Sampler(\n  {\n    B3: 'B3.[mp3|ogg]',\n    E4: 'E4.[mp3|ogg]',\n    G4: 'G4.[mp3|ogg]',\n    B4: 'B4.[mp3|ogg]',\n    'C#5': 'Cs5.[mp3|ogg]',\n    E5: 'E5.[mp3|ogg]',\n    G5: 'G5.[mp3|ogg]',\n    B5: 'B5.[mp3|ogg]',\n    'C#6': 'Cs6.[mp3|ogg]',\n  },\n  {\n    release: 1,\n    // baseUrl: '/static/audio/mbox/',\n    baseUrl: '//cnbj1.fds.api.xiaomi.com/mbox/audio/mbox/',\n  },\n).toMaster();\n\nexport function RealMagic(items) {\n  console.log('== Enter RealMagic ==');\n  console.log(JSON.stringify(items));\n  const tasksObj = {};\n  items.forEach((item) => {\n    //* 2 cuz print mbox need 1 octave higher.\n    const itemNoteFreq = parseInt(Tone.Frequency(item.note).toFrequency() * 2, 10);\n    if (!tasksObj[itemNoteFreq]) {\n      tasksObj[itemNoteFreq] = [];\n    }\n    tasksObj[itemNoteFreq].push(item.time);\n  });\n  // tasksObj is like {784:[1.0295,1.39,2.6713],659:[2.66],...}\n\n  // then we focus on each task\n  const taskTypes = Object.keys(tasksObj); // [659,784,...]  freq array, 排好序的（object.keys）\n  const taskTimeArrays = Object.values(tasksObj); // [[2.66]，[1.0295,1.39,2.6713]] 顺序跟上面对应的\n  const machines = []; // init with existing types, will add more machines\n  const groups = []; // will final be [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  if (taskTypes.length > 18) {\n    console.log('音种类超过18个，这个做不了');\n    return false;\n  }\n\n  taskTimeArrays.forEach((timeArray) => {\n    const final = [];\n    timeArray.forEach((time, j) => {\n      const test = []; // 校验当前final里不能用的序号， final里序号种类和test种类相同则证明不行\n      let allPreviousOccupied = false;\n      let successFound = false;\n      if (j === 0) {\n        final.push(1); // 给第1组的第一个任务分配第一个机器\n      } else {\n        let counter = j;\n        while (counter >= 1 && !allPreviousOccupied) {\n          // TODO: -1 or 0\n          counter -= 1;\n          if (\n            time - timeArray[counter] >= SAME_NOTE_INTERVAL &&\n            test.indexOf(final[counter]) === -1\n          ) {\n            final.push(final[counter]);\n            successFound = true;\n            break;\n          } else if (test.indexOf(final[counter]) === -1) {\n            test.push(final[counter]);\n            if ([...new Set(final)].length === [...new Set(test)].length) {\n              // final目前已有的都不满足，set可以取unique elements [1,1,2,2,3,1] => [1,2,3]\n              allPreviousOccupied = true;\n              break;\n            }\n          }\n        }\n        if ((counter === 0 && !successFound) || allPreviousOccupied) {\n          final.push(Math.max(...final) + 1);\n        }\n      }\n    });\n    groups.push(final);\n  });\n  console.log(taskTypes);\n  console.log(taskTimeArrays);\n  console.log('hehe', groups); // [[1],[1,2,1],...], corespond to taskTimeArrays\n\n  // now we have groups, let's build machines based on this\n  groups.forEach((group, index) => {\n    let count = 0;\n    while (count <= Math.max(...group) - 1) {\n      machines.push(taskTypes[index]);\n      count += 1;\n    }\n  });\n  if (machines.length < 18) {\n    const lastMachine = machines[machines.length - 1];\n    while (machines.length < 18) {\n      machines.push(lastMachine); // make it length of 18\n    }\n    // machines is like [\"1046\", \"1174\", \"1318\", \"1318\", \"1318\", \"1396\", \"1567\"] of 18 length\n  } else if (machines.length > 18) {\n    console.log('所需音片儿超过18个');\n    return false;\n  }\n  return true;\n  // console.log(machines);\n  // // then we merge all the tasks\n  //\n  // // test1: [[1],[1,2,1]] => [1,2,3,2]\n  // // test2: [[1,2,1],[1,2,3]] => [1,2,1,3,4,5]\n  // const finalBins = groups.reduce((a, b) => a.concat(b.map(item => item + Math.max(...a))));\n  // let finalTimings = taskTimeArrays.reduce((a, b) => a.concat(b)); // just flatten it\n  // finalTimings = finalTimings.map(item => (item * 15) / 20); // normalize from 20s to 15s\n  // const musicboxPins = finalBins.map((bin, index) => `generatePin(${finalTimings[index]},${bin})`);\n  // console.log(`\n  //   //底下低音,上面高音\n  // const DOT_WIDTH = 0.6\n  // const RATIO = 0.98\n  // const OFFSET = 2.2 //1.95 is center\n  // const OUTER_RADIUS = 6.6\n  // const INNER_RADIUS = 5.9\n  // function generatePin(noteSec, noteNo) {\n  //   return rotate(90, [1, 0, 4 * noteSec * RATIO / 15], cylinder({\n  //     h: 1,\n  //     r: DOT_WIDTH / 2,\n  //     center: true\n  //   })).translate([sin(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -cos(360 * noteSec * RATIO / 15) * OUTER_RADIUS, -9.95 + OFFSET + 0.4 + (noteNo - 1) * .9])\n  // }\n  //\n  // function main() {\n  //   let cylinderBody = difference(cylinder({h: 19.9,r: OUTER_RADIUS,center: true}),cylinder({h: 19.9,r: INNER_RADIUS,center: true}))\n  //   let holes = union(${musicboxPins})\n  //   return union(cylinderBody,holes).translate([0, 0, 0]).scale(1);\n  // }`);\n}\n\nexport function mapNoteTimeToColor(time) {\n  // let rgb = [0, 0, 0];\n  // const COLOR1 = [151, 255, 241];\n  // const COLOR2 = [98, 166, 223];\n  // const COLOR3 = [154, 124, 255];\n  const COLOR1 = [151, 255, 241];\n  const COLOR2 = [137, 228, 217];\n  const COLOR3 = [143, 123, 242];\n  const TIME_MAX = 20;\n  let rgb = [0, 0, 0];\n  if (time < 0 || time > TIME_MAX) {\n    // console.warn('we don\\'t allow time above 20. from \\'mapNoteTimeToColor\\' util function');\n  } else if (time <= 10) {\n    rgb = [\n      COLOR1[0] + time * (COLOR2[0] - COLOR1[0]) / (TIME_MAX / 2),\n      COLOR1[1] + time * (COLOR2[1] - COLOR1[1]) / (TIME_MAX / 2),\n      COLOR1[2] + time * (COLOR2[2] - COLOR1[2]) / (TIME_MAX / 2),\n    ];\n  }\n  rgb = [\n    COLOR2[0] + time * (COLOR3[0] - COLOR2[0]) / (TIME_MAX / 2),\n    COLOR2[1] + time * (COLOR3[1] - COLOR2[1]) / (TIME_MAX / 2),\n    COLOR2[2] + time * (COLOR3[2] - COLOR2[2]) / (TIME_MAX / 2),\n  ];\n  // console.log(`rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`);\n  return `rgb(${Math.floor(rgb[0])},${Math.floor(rgb[1])},${Math.floor(rgb[2])})`;\n}\nexport function mapNoteMidiToLength(noteName) {\n  // in our context, the midi range would be from 60 - 84\n  // 75 is rem to px\n  // return `${(75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 60) / (84 - 40))) + 0.2}`;\n  // 50 - 110\n  return `${75 * 0.8 * ((Tone.Frequency(noteName).toMidi() - 50) / (110 - 40)) + 0.2}`; // 75 is rem to px\n}\n\nexport function clearTone(parts) {\n  // 本方法只为Tone.js不在各页面中全局污染，完全是作者这包操蛋\n  if (parts && parts.length) {\n    // 传进来值 挨个dispose。。。\n    parts.forEach((part) => {\n      try {\n        part.dispose();\n      } catch (e) {\n        //\n      }\n    });\n  }\n  if (musicPreview) {\n    // 清理自己的musicPreview\n    try {\n      musicPreview.dispose();\n    } catch (e) {\n      //\n    }\n  }\n}\nexport function preview(items, start) {\n  console.log('current state', Tone.Transport.state);\n  // if (Tone.Transport.state === 'stopped') {\n  if (start) {\n    // TODO: this is weird...but you need to play something to make sure it works\n    // trigger to avoid no sound\n    if (!oncePlayed) {\n      mbox.triggerAttack('E6', 0, 0);\n      oncePlayed = true;\n    }\n    if (musicPreview) {\n      try {\n        musicPreview.dispose();\n      } catch (e) {\n        //\n      }\n    }\n    musicPreview = new Tone.Part((time, value) => {\n      mbox.triggerAttackRelease(value.note, '4n', time);\n    }, items).start(0, 0);\n    musicPreview.loop = true;\n    musicPreview.loopEnd = 21; // 20s一个循环\n    Tone.Transport.start('+0.01', 0);\n  } else {\n    Tone.Transport.stop(0);\n  }\n}\n\nexport function previewMidi(url, start) {\n  console.log('current state', Tone.Transport.state);\n  // if (Tone.Transport.state === 'stopped') {\n  if (start) {\n    // TODO: this is weird...but you need to play something to make sure it works\n    // trigger to avoid no sound\n    if (!oncePlayed) {\n      mbox.triggerAttack('E6', 0, 0);\n      oncePlayed = true;\n    }\n    if (musicPreview) {\n      try {\n        musicPreview.dispose();\n      } catch (e) {\n        //\n      }\n    }\n    MidiConvert.load(url, (midi) => {\n      //这个load放到外头，整个函数还是以notes作为入参\n      musicPreview = new Tone.Part((time, value) => {\n        mbox.triggerAttackRelease(value.note, '4n', time);\n      }, midi.tracks[0].notes).start(0, 0);\n      musicPreview.loop = true;\n      musicPreview.loopEnd = 21; // 20s一个循环\n      Tone.Transport.start('+0.01', 0);\n    });\n  } else {\n    Tone.Transport.stop(0);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/magic.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ac33d9c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NMBMaker.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NMBMaker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ac33d9c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NMBMaker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4ac33d9c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NMBMaker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-55643781\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./countButton.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./countButton.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-55643781\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./countButton.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-55643781\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/countButton.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23da7fb8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NMBViewer.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NMBViewer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23da7fb8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NMBViewer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-23da7fb8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NMBViewer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6a56a6f0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./pieProgress.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./pieProgress.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a56a6f0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./pieProgress.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6a56a6f0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/pieProgress.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0c05d5a7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MBRollMaker.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MBRollMaker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0c05d5a7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MBRollMaker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0c05d5a7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MBRollMaker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-051f4e98\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MusixiserDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MusixiserDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-051f4e98\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MusixiserDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-051f4e98\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MusixiserDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-66845376\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MyFav.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MyFav.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-66845376\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MyFav.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-66845376\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MyFav.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-324355b7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Recommend.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Recommend.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-324355b7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Recommend.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-324355b7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Recommend.vue\n// module id = null\n// module chunks = ","import {\n  // fetchUser,\n  // fetchItems,\n  // fetchIdsByType,\n  fetchMbox,\n  uploadRecord,\n  fetchMusixiser,\n  fetchWorksFromMusixiser,\n  fetchFavWorks,\n} from '../_common/js/api';\n/*\n  getUserInfo\n  getWorkInfo\n  getMusixiserInfo\n  saveWork\n*/\nexport default {\n  BOUNCE_PROJECT: ({ commit, state }, { record, info }) => uploadRecord(record, info),\n  // 存作品到后台\n  // uploadRecord(record, info).then(() => {\n  //   // commit('SET_BOUNCE_PROJECT', { record, info });\n  //   // 可以在组建直接跳链接，不commit 存store一道\n  // });\n\n  FETCH_MBOX: ({ commit, state }, { id }) =>\n    new Promise((resolve, reject) => {\n      // 获取某id的音乐盒音乐内容\n      fetchMbox(id).then((project) => {\n        console.log('xxi', project.data.data.url);\n        console.log('xxi', project.data.data.userId);\n        fetchMusixiser(project.data.data.userId).then((musixiser) => {\n          console.log('work musixiser info: ', musixiser.data.data);\n          project.data.data.userVO = musixiser.data.data; // 拼接口。\n          // load music notes/ midi notes\n          MidiConvert.load(project.data.data.url, (midi) => {\n            commit('SET_ID_PROJECT', {\n              record: midi.tracks[0].notes,\n              info: project.data.data,\n            });\n            resolve();\n          });\n          // const request = new XMLHttpRequest();\n          // request.open('GET', project.data.data.url, true);\n          // request.send(null);\n          // request.onreadystatechange = function () {\n          //   if (request.readyState === 4 && request.status === 200) {\n          //     const type = request.getResponseHeader('Content-Type');\n          //     if (type.indexOf('text') !== -1) {\n          //       commit('SET_ID_PROJECT', {\n          //         record: JSON.parse(request.responseText),\n          //         info: project.data.data,\n          //       });\n          //       resolve();\n          //     }\n          //   }\n          // };\n        });\n      });\n    }),\n  FETCH_MUSIXISER: ({ commit, state }, { id }) =>\n    new Promise((resolve, reject) => {\n      // 获取某id的音乐盒音乐内容\n      fetchMusixiser(id).then((musixiser) => {\n        console.log('musixiser info: ', musixiser.data.data);\n        commit('SET_MUSIXISER', { musixiserInfo: musixiser.data.data });\n        resolve();\n      });\n    }),\n  FETCH_WORKS_FROM_MUSIXISER: ({ commit, state }, { id, page }) =>\n    new Promise((resolve, reject) => {\n      // 获取某id的音乐盒音乐内容\n      fetchWorksFromMusixiser(id, page).then((works) => {\n        console.log('works list: ', works.data.data);\n        commit('PUSH_MUSIXISER_WORKS', { musixiserWorksObj: works.data.data });\n        resolve();\n      });\n    }),\n  FETCH_FAV_WORKS: ({ commit, state }, { id, page }) =>\n    new Promise((resolve, reject) => {\n      // 获取某id的音乐盒音乐内容\n      fetchFavWorks(id, page).then((works) => {\n        console.log('works list: ', works.data.data);\n        commit('PUSH_FAV_WORKS', { favWorksObj: works.data.data });\n        resolve();\n      });\n    }),\n  //   // ensure data for rendering given list type\n  //   FETCH_LIST_DATA: ({ commit, dispatch, state }, { type }) => {\n  //     commit('SET_ACTIVE_TYPE', { type });\n  //     return fetchIdsByType(type)\n  //       .then(ids => commit('SET_LIST', { type, ids }))\n  //       .then(() => dispatch('ENSURE_ACTIVE_ITEMS'));\n  //   },\n  //\n  //   // ensure all active items are fetched\n  //   ENSURE_ACTIVE_ITEMS: ({ dispatch, getters }) => dispatch('FETCH_ITEMS', {\n  //     ids: getters.activeIds,\n  //   }),\n  //\n  //   FETCH_ITEMS: ({ commit, state }, { ids }) => {\n  //     // on the client, the store itself serves as a cache.\n  //     // only fetch items that we do not already have, or has expired (3 minutes)\n  //     const now = Date.now();\n  //     ids = ids.filter((id) => {\n  //       const item = state.items[id];\n  //       if (!item) {\n  //         return true;\n  //       }\n  //       if (now - item.__lastUpdated > 1000 * 60 * 3) {\n  //         return true;\n  //       }\n  //       return false;\n  //     });\n  //     if (ids.length) {\n  //       return fetchItems(ids).then(items => commit('SET_ITEMS', { items }));\n  //     }\n  //     return Promise.resolve();\n  //   },\n  //\n  //   FETCH_USER: ({ commit, state }, { id }) => (state.users[id]\n  //       ? Promise.resolve(state.users[id])\n  //       : fetchUser(id).then(user => commit('SET_USER', { id, user }))),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","import Vue from 'vue';\n\nexport default {\n  SET_USER_INFO: (state, { type }) => { // 个人信息\n    state.activeType = type;\n  },\n\n  SET_WORK_INFO: (state, { type, ids }) => { // 作品详情\n    state.lists[type] = ids;\n  },\n\n  SET_MUSIXISER_INFO: (state, { items }) => { // 作者信息\n    items.forEach((item) => {\n      if (item) {\n        Vue.set(state.items, item.id, item);\n      }\n    });\n  },\n  SET_BOUNCE_PROJECT: (state, { record }) => { // 储存录制信息\n    state.recordProject = record;\n  },\n  SET_ID_PROJECT: (state, { record, info }) => { // 储存录制信息\n    state.recordProject = record; // this is the music itself\n    state.recordProjectInfo = info; // this includes all the relative info\n  },\n  SET_MUSIXISER: (state, { musixiserInfo }) => { // 储存录制信息\n    state.musixiserInfo = musixiserInfo;\n  },\n  PUSH_MUSIXISER_WORKS: (state, { musixiserWorksObj }) => { // 储存录制信息\n    console.log('ccccc', musixiserWorksObj.current);\n    if (+musixiserWorksObj.current === 1) {\n      state.musixiserWorksObj.content = musixiserWorksObj.list;\n    } else {\n      state.musixiserWorksObj.content = state.musixiserWorksObj.content.concat(musixiserWorksObj.list);\n    }\n    state.musixiserWorksObj.total = musixiserWorksObj.total;\n    state.musixiserWorksObj.size = musixiserWorksObj.size;\n    state.musixiserWorksObj.current = musixiserWorksObj.current;\n  },\n  PUSH_FAV_WORKS: (state, { favWorksObj }) => { // 储存录制信息\n    console.log('xxxxxxx', favWorksObj);\n    if (+favWorksObj.current === 1) {\n      state.favWorksObj.content = favWorksObj.list;\n    } else {\n      state.favWorksObj.content = state.favWorksObj.content.concat(favWorksObj.list);\n    }\n    state.favWorksObj.total = favWorksObj.total;\n    state.favWorksObj.size = favWorksObj.size;\n    state.favWorksObj.current = favWorksObj.current;\n  },\n  // SET_FINAL_WORK: (state, { type }) => { // 储存成品信息\n  //   state.activeType = type;\n  // },\n  // SET_USER: (state, { id, user }) => {\n  //   Vue.set(state.users, id, user || false); /* false means user not found */\n  // },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","export default {\n  // ids of the items that should be currently displayed based on\n  // current list type and current pagination\n  activeIds(state) {\n    const { activeType, itemsPerPage, lists } = state;\n    const page = Number(state.route.params.page) || 1;\n    if (activeType) {\n      const start = (page - 1) * itemsPerPage;\n      const end = page * itemsPerPage;\n      return lists[activeType].slice(start, end);\n    }\n    return [];\n  },\n\n  // items that should be currently displayed.\n  // this Array may not be fully fetched.\n  activeItems(state, getters) {\n    return getters.activeIds.map(id => state.items[id]).filter(_ => _);\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport actions from './actions';\nimport mutations from './mutations';\nimport getters from './getters';\n\nVue.use(Vuex);\n\nexport function createStore() {\n  return new Vuex.Store({\n    state: {\n      activeType: null,\n      itemsPerPage: 20,\n      items: {/* [id: number]: Item */},\n      users: {/* [id: string]: User */},\n      lists: {\n        top: [/* number */],\n        new: [],\n        show: [],\n        ask: [],\n        job: [],\n      },\n      myInfo: {},\n      recordParts: [],\n      recordProject: [],\n      musixiserInfo: {},\n      musixiserWorksObj: { content: [] },\n      favWorksObj: { content: [] },\n    },\n    actions,\n    mutations,\n    getters,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","<template>\n<div id=\"app\">\n  <transition :name=\"transitionName\">\n    <router-view/>\n  </transition>\n</div>\n</template>\n\n<script>\n// https://router.vuejs.org/en/advanced/transitions.html\nexport default {\n  name: 'app',\n  data() {\n    return {\n      transitionName:'fade',\n    }\n  },\n  beforeRouteUpdate (to, from, next) {\n    // const toPage = to.indexOf('make')\n    // const fromPage = from.path.split('/').length\n    // this.transitionName = toDepth < fromDepth ? 'slide-right' : 'slide-left'\n    // next()\n  },\n};\n</script>\n\n<style>\n\n.lx-toast {\n  rotate: 90deg;\n  transform-origin: left;\n}\n.vue-slider-component .vue-slider-tooltip-wrap.vue-slider-tooltip-left .vue-slider-tooltip:before {\n  border:none !important;\n}\n#app {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height:100%;\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  user-select: none;\n  overflow:hidden;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('transition',{attrs:{\"name\":_vm.transitionName}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fcaae542\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"app\">\n    <div class=\"m-logo\"></div>\n    <div class=\"redirect-button\" id=\"mb-maker\" @touchstart=\"redirectTo('/new-music-box-maker')\">\n        去编曲\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as Util from '../_common/js/util';\nimport * as Api from '../_common/js/api';\nimport * as Cookies from 'js-cookie';\nexport default {\n  name: 'hello',\n  data() {\n    return {\n      msg: 'Welcome to Your Vue.js App',\n    };\n  },\n  methods: {\n    redirectTo(path) {\n      // IMPORTANT keng. 从主页跳制作页，如果相对路径会带上参数，比如auth回来的code会一直带着，污染之后的auth\n      // 成功auth一次，就写入cookie了，所以往后跳就直接给全路径，摒弃微信弄回来的乱七八糟的参数\n      this.$router.push(path);\n    },\n  },\n  created() {\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then(res => {\n          if (res.data.errcode >= 20000) {\n            // 网页内cookie失效，需要重新验证\n            Cookies.remove('serviceToken');\n            location.replace(\n              'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect',\n            );\n          }\n          alert(`welcome${res.data.data.realname}`);\n          console.log('get user info success', res.data.data);\n        })\n        .catch(err => {\n          Cookies.remove('serviceToken');\n          location.replace(\n            'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect',\n          );\n        });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\n        'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect',\n      );\n    }\n  },\n};\n\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n* {\n  box-sizing: border-box;\n  margin:0;\n  padding:0;\n}\n.app {\n\n  background-color: black;\n}\n.m-logo {\n  position: absolute;\n  width: getRem(200);\n  height: getRem(200);\n  top: 30%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background:url('//gw.alicdn.com/tps/TB1pfhUOFXXXXaSaXXXXXXXXXXX-350-350.png') no-repeat center center;\n  background-size: getRem(175) getRem(175);\n  background-color: #ffcc33;\n  border-radius: getRem(25);\n  animation: toupperleftwithsize 4.5s linear;\n  -webkit-animation-fill-mode: forwards;\n  animation-fill-mode: forwards;\n  z-index: 2\n}\n.redirect-button {\n  width:getRem(450);\n  height: getRem(100);\n  padding: getRem(20) getRem(50);\n  background-color: #ffcc33;\n  border-radius:getRem(10);\n  color: gray;\n}\n.redirect-button,#mb-maker {\n  position: absolute;\n  top: 60%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size:.57rem;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelloWorld.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('div',{staticClass:\"m-logo\"}),_vm._v(\" \"),_c('div',{staticClass:\"redirect-button\",attrs:{\"id\":\"mb-maker\"},on:{\"touchstart\":function($event){_vm.redirectTo('/new-music-box-maker')}}},[_vm._v(\"\\n      去编曲\\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3d40ace0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","import axios from 'axios';\nimport wx from 'weixin-js-sdk';\nimport { createOrder, payOrder } from './api';\n\nconst reqConfig = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n};\nexport const prepareShareConfig = () =>\n  new Promise((resolve, reject) => {\n    axios\n      .post(\n        `//api.octave-love.com/api/v1/wechat/getTicket?url=${encodeURIComponent(\n          window.location.href.split('#')[0],\n        )}`,\n        '',\n        reqConfig,\n      )\n      .then(\n        (res) => {\n          // alert(`before # url: ${window.location.href.split('#')[0]}`);\n          // alert(`full path: ${window.location.href}`);\n          // alert(JSON.stringify(res.data.data));\n          wx.config({\n            debug: false,\n            appId: res.data.data.appId,\n            timestamp: res.data.data.timestamp,\n            nonceStr: res.data.data.nonceStr,\n            signature: res.data.data.signature,\n            jsApiList: [\n              'onMenuShareTimeline',\n              'onMenuShareAppMessage',\n              'chooseWXPay',\n              'openAddress',\n            ],\n          });\n          wx.ready(() => {\n            // 配置wx.config成功\n            resolve(wx);\n          });\n        },\n        () => {\n          reject('配置wx.config失败');\n        },\n      );\n  });\n\n// 分享配置\nexport const prepareShareContent = ({ title, desc, fullPath, imgUrl }) => {\n  // const link = 'http://example.com/static/auth.html' +\n  //              `?redirect_uri=${encodeURIComponent(window.location.href.split('#')[0])}` +\n  //              `&full_path=${encodeURIComponent(fullPath)}`;\n  const link = fullPath;\n  wx.onMenuShareTimeline({\n    title,\n    link,\n    imgUrl,\n    success() {},\n    cancel() {},\n  });\n  wx.onMenuShareAppMessage({\n    title,\n    desc,\n    link,\n    imgUrl,\n    success() {},\n    cancel() {},\n  });\n};\n\n// order pay\nexport const makeWxOrder = ({ pid, wid, amount }) =>\n  new Promise((resolve, reject) => {\n    getAddress().then((address) => {\n      console.log('234', address);\n      createOrder({ pid, wid, amount }).then((res) => {\n        // 得到返回的支付参数\n        alert(JSON.stringify(res));\n        const orderId = res.data.data;\n        // params.success = (res) => {\n        //   // 支付成功\n        // };\n        payOrder({ orderId }).then((res) => {\n          // alert(JSON.stringify(res));\n          const params = res.data.data;\n          alert(JSON.stringify(params));\n          console.log(params.nonceStr);\n          console.log(params.signType);\n          console.log(params.package);\n          console.log(params.timeStamp);\n          console.log(params.appId);\n          console.log(params.paySign);\n          console.log('sdsd');\n          // WeixinJSBridge.invoke(\n          //   'getBrandWCPayRequest',\n          //   {\n          //     nonceStr: params.nonceStr || 'e3bcr07pOMTlSmo8xEtbjzCkhRQzUuEX',\n          //     signType: params.signType || 'MD5',\n          //     package: params.package || 'prepay_id=wx23170809963259d77f75f3450235551609',\n          //     timeStamp: params.timeStamp || '1545556090',\n          //     appId: params.appId || 'wx353a60a8b049d366',\n          //     paySign: params.paySign || '1855DBE80F3E3EF13A956D87802CD52E',\n          //   },\n          //   (res) => {\n          //     if (res.err_msg == 'get_brand_wcpay_request:ok') {\n          //       // 使用以上方式判断前端返回,微信团队郑重提示：\n          //       // res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\n          //     }\n          //   },\n          // );\n          wx.chooseWXPay({\n            // ...params,\n            appId: params.appId,\n            timestamp: params.timeStamp,\n            nonceStr: params.nonceStr,\n            package: params.package,\n            signType: params.signType,\n            paySign: params.paySign,\n            success(res) {\n              console.log(res);\n              resolve(res);\n            },\n          });\n        });\n      });\n    });\n  });\n\n// address\nexport const newMakeWxOrder = ({ pid, wid, amount }, cb1, cb2) => {\n  wx.openAddress({\n    success(res) {\n      console.log(res);\n      createOrder({ pid, wid, amount, address: res }).then((res) => {\n        const orderId = res.data.data;\n        payOrder({ orderId }).then((res) => {\n          // alert(JSON.stringify(res));\n          const params = res.data.data;\n          alert(JSON.stringify(params));\n          console.log(params.nonceStr);\n          console.log(params.signType);\n          console.log(params.package);\n          console.log(params.timeStamp);\n          console.log(params.appId);\n          console.log(params.paySign);\n          console.log('1234');\n          wx.chooseWXPay({\n            // ...params,\n            appId: params.appId,\n            timestamp: params.timeStamp,\n            nonceStr: params.nonceStr,\n            package: params.package,\n            signType: params.signType,\n            paySign: params.paySign,\n            success(res) {\n              console.log(res);\n              cb1(res);\n            },\n          });\n        });\n      });\n    },\n    cancel() {\n      cb2();\n    },\n  });\n};\n\nexport const getAddress = () => {\n  new Promise((resolve, reject) => {\n    wx.openAddress({\n      success(res) {\n        console.log(res);\n        resolve(res);\n      },\n      cancel() {\n        reject();\n      },\n    });\n  });\n};\n// 调用分享\n// $_wechat().config().then((res) => {\n//   $_wechat().share({ // 配置分享\n//     title: 'wechat-spa',\n//     desc: 'Wechat SPA',\n//     fullPath: '/home/index',\n//     imgUrl: 'https://www.baidu.com/img/bd_logo1.png',\n//   });\n// }, (err) => {\n//   console.warn(err);\n// });\n\n\n\n// WEBPACK FOOTER //\n// ./src/_common/js/wx_share.js","<script>\nimport 'swiper/dist/css/swiper.css';\nimport * as Util from '../_common/js/util';\nimport * as Api from '../_common/js/api';\nimport * as Cookies from 'js-cookie';\nimport * as Magic from '../_common/js/magic';\nimport * as WxShare from '../_common/js/wx_share';\nimport vueSlider from 'vue-slider-component';\nimport { swiper, swiperSlide } from 'vue-awesome-swiper';\n\nconst Tone = require('tone');\nconst touchIdKeyMap = {}; // touch move can have several threads, each thread only activate one note at most\n// e.g. {0:a4,1:b5}\n\nconst MINI_KEY_LENGTH = 200; // px\nlet extendBtnsTimeout;\n\nlet piano = new Tone.Sampler(\n  {\n    C4: 'C4.[mp3|ogg]',\n    'D#4': 'Ds4.[mp3|ogg]',\n    'F#4': 'Fs4.[mp3|ogg]',\n    A4: 'A4.[mp3|ogg]',\n    C5: 'C5.[mp3|ogg]',\n    'D#5': 'Ds5.[mp3|ogg]',\n    'F#5': 'Fs5.[mp3|ogg]',\n    A5: 'A5.[mp3|ogg]',\n    C6: 'C6.[mp3|ogg]',\n  },\n  {\n    release: 1,\n    // 'baseUrl': '/static/audio/'\n    baseUrl: '//cnbj1.fds.api.xiaomi.com/mbox/audio/',\n  },\n).toMaster();\n\n// var plucky = new Tone.PluckSynth().toMaster()\n\nconst SCREEN_WIDTH = document.documentElement.getBoundingClientRect().width;\nconst SCREEN_HEIGHT = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nlet tonepart = []; // store all the music parts. (ummm,that's why it's named part...)\nlet bouncepart = [];\n\nlet recordStartTime = 0;\n\nlet isLinger = true; // 非播放状态中未开始录音\nlet replayInterval; // 控制progressbar的setinterval\nlet playOffset = 0; // 播放状态的拉条bar初始时间记录\nlet lingerOffset = 0; // 未播放状态的拉条bar初始时间记录\nconst PROGRESS_INTERVAL_TIME = 0.1; // 0.1秒挪一下\nlet tutorOnceEnter = false;\nlet tutorTimeout = [];\nexport default {\n  components: {\n    swiper,\n    swiperSlide,\n    vueSlider,\n  },\n  data() {\n    return {\n      portraitMode: true,\n      activeNote: {},\n      recordPart: [], // current record part\n      recordParts: [], // each new record goes in here.\n      playing: false,\n      generalControllerShow: false,\n      activeSwiperIndex: 3,\n      lastActiveSwiperIndex: 3 - 1,\n      vuetimeline: 0,\n      showExtendBtns: false,\n      alertAppear: false,\n      bouncing: false,\n      tutorSession: 0,\n      handClass: '', // hand or clickhand\n      tutorClass: '', // hand positioning in different session\n      timelineConfig: {\n        value: 0,\n        width: 8,\n        height: '90%',\n        padding: '0',\n        dotSize: 20,\n        eventType: 'auto',\n        min: 0,\n        max: 200,\n        interval: 1,\n        disabled: false,\n        show: true,\n        tooltip: 'always',\n        // tooltip: 'hidden',\n        piecewise: false,\n        reverse: true,\n        style: {\n          display: 'inline-block',\n        },\n        class: 'star-slider',\n        direction: 'vertical',\n        speed: PROGRESS_INTERVAL_TIME,\n        bgStyle: {\n          backgroundColor: 'rgb(110,113,158)',\n          boxShadow: 'inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)',\n        },\n        tooltipDir: 'left',\n        tooltipStyle: {\n          backgroundColor: 'rgb(69, 106, 255)',\n          borderColor: 'rgb(69, 106, 255)',\n          transform: 'rotate(90deg)',\n          transformOrigin: 'right',\n          position: 'relative',\n          left: '-.2rem',\n          top: '0.9rem',\n        },\n        formatter(value) {\n          if (value) {\n            return `${(value / 10).toFixed(1)}s/20s`;\n          }\n          return '0.0s/20s';\n        },\n        processStyle: {\n          backgroundColor: 'rgb(69,106,255)',\n        },\n      },\n    };\n  },\n  watch: {\n    playing(val) {\n      console.log('playing status', val);\n      if (val) {\n        //start progress bar\n        replayInterval = setInterval(() => {\n          this.vuetimeline += 1;\n          if (this.vuetimeline >= 200) {\n            this.toggleReplay();\n            this.vuetimeline = 0;\n          }\n        }, PROGRESS_INTERVAL_TIME * 1000);\n      } else {\n        //stop progress bar\n        clearInterval(replayInterval);\n      }\n    },\n  },\n  computed: {\n    swiper() {\n      return this.$refs.pianoRoll.swiper;\n    },\n    activePartIndex() {\n      return this.PARTNUM - this.activeSwiperIndex - 1;\n    },\n    lastActivePartIndex() {\n      return this.PARTNUM - this.lastActiveSwiperIndex - 1;\n    },\n  },\n  methods: {\n    load() {},\n    toggleReplay() {\n      console.log(1);\n      this.playing = !this.playing;\n      if (this.playing) {\n        if (this.vuetimeline >= 200) {\n          this.vuetimeline = 0;\n        }\n        // this.confirmRecordPart(!isLinger)\n        playOffset = performance.now() - this.vuetimeline * 100;\n        console.log('播放开始');\n        this.confirmRecordPart(0);\n        console.log('kokokoko');\n        recordStartTime = performance.now();\n        console.log(`activeOffsetTime${this.vuetimeline * 100}`);\n        Tone.Transport.start('+0.01', this.vuetimeline * 100 / 1000); // TODO:有问题in case < context.currentTime\n      } else {\n        console.log('播放停了');\n        Tone.Transport.stop(0); // TODO：必须stop才能start。。。有没有自动stop啊..\n        // recordStartTime = performance.now()\n      }\n    },\n    handleNoteStart(noteId) {\n      let noteTime = 0;\n      // console.log('down', e.target.id)\n      piano.triggerAttack(noteId);\n      // console.log('midi no. :', Tone.Frequency(noteId).toMidi())\n      this.$set(this.activeNote, noteId, 1);\n      if (!this.playing) {\n        if (isLinger) {\n          recordStartTime = performance.now();\n          lingerOffset = this.vuetimeline * 100;\n          isLinger = false;\n        }\n        noteTime = performance.now() - recordStartTime + lingerOffset;\n      } else {\n        noteTime = performance.now() - playOffset;\n        // noteTime = this.vuetimeline * 100\n        // console.log('1', this.vuetimeline * 100)\n        // console.log('2', performance.now() - recordStartTime + this.vuetimeline*100)\n      }\n      if (noteTime < 20000) {\n        this.vuetimeline = 10 * noteTime / 1000;\n        this.recordPart.push({\n          note: noteId,\n          time: +(noteTime / 1000).toFixed(4),\n        });\n      } else {\n        this.vuetimeline = 20 * 10; // 颗粒度是0.1s => 200份\n        console.log('cannot record more than 20 seconds');\n      }\n    },\n    handleNoteEnd(noteId) {\n      piano.triggerRelease(noteId);\n      this.$set(this.activeNote, noteId, 0);\n    },\n    touchNoteStartHandler(e) {\n      console.log(e);\n      // 先存起来，防止在该键位touchmove重复\n      touchIdKeyMap[e.changedTouches[0].identifier] = e.target.id; // TODO: 猜测 touchstart只会有一个changetouches///\n      this.handleNoteStart(e.target.id);\n    },\n    touchNoteEndHandler(e) {\n      this.handleNoteEnd(e.target.id);\n      this.handleNoteEnd(touchIdKeyMap[e.changedTouches[0].identifier]); // TODO: 猜测 touchend只会有一个changetouches,记录的正好是该停的\n    },\n    confirmRecordPart(shouldClearTime) {\n      if (this.recordPart.length) {\n        console.log('processing track: ', this.lastActivePartIndex);\n        if (\n          this.recordParts[this.lastActivePartIndex] &&\n          this.recordParts[this.lastActivePartIndex].length\n        ) {\n          // 已在该track录过,merge both\n          this.recordPart = this.recordPart.concat(this.recordParts[this.lastActivePartIndex]);\n        }\n        if (tonepart[this.lastActivePartIndex]) {\n          try {\n            tonepart[this.lastActivePartIndex].dispose(); // 覆盖之前的需要dispose\n          } catch (e) {}\n        }\n        tonepart[this.lastActivePartIndex] = new Tone.Part((time, value) => {\n          // 不能老这new啊，要每次一个数组，每次改动最后一个\n          piano.triggerAttackRelease(value.note, '8n', time);\n        }, this.recordPart).start(0);\n        this.recordParts[this.lastActivePartIndex] = this.recordPart;\n        this.recordPart = [];\n      } else {\n        console.log('啥也没录');\n      }\n      this.lastActiveSwiperIndex = this.activeSwiperIndex;\n      // reinit time\n      if (shouldClearTime) {\n        this.vuetimeline = 0; // this is kind of separate for progress view\n        recordStartTime = 0;\n      }\n      isLinger = true;\n    },\n    clearRecordPart(trackNum) {\n      console.log(`cleaning track ${trackNum}`);\n      if (this.activePartIndex === trackNum) {\n        this.recordPart = [];\n        this.vuetimeline = 0;\n        isLinger = true;\n        this.playing = false;\n        Tone.Transport.stop(0);\n      }\n      if (this.recordParts[trackNum] && this.recordParts[trackNum].length) {\n        this.$set(this.recordParts, trackNum, []);\n        if (tonepart[trackNum]) {\n          try {\n            tonepart[trackNum].dispose(); // dispose掉\n          } catch (e) {}\n          tonepart[trackNum] = undefined; // 同时要从数组中删掉\n        }\n      } else {\n        console.log(`track ${trackNum} has no content`);\n      }\n    },\n    checkBouncibility() {\n      this.confirmRecordPart(0);\n      bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(item => {\n          if (item && item._events.length && item._events[0].value) {\n            item._events.forEach(noteInfo => {\n              bouncepart.push(noteInfo.value);\n            });\n          }\n        });\n        bouncepart.sort((a, b) => 0 + a.time - b.time);\n        return Magic.RealMagic(bouncepart);\n      }\n      return true;\n    },\n    bounceProject() {\n      this.confirmRecordPart(0);\n      console.log(this);\n      console.log(tonepart);\n      bouncepart = [];\n      if (tonepart.length) {\n        tonepart.forEach(item => {\n          if (item && item._events.length && item._events[0].value) {\n            item._events.forEach(noteInfo => {\n              bouncepart.push(noteInfo.value);\n            });\n          }\n        });\n        bouncepart.sort((a, b) => 0 + a.time - b.time);\n        // TODO, semi done\n        this.bouncing = true;\n        this.$store\n          .dispatch('BOUNCE_PROJECT', {\n            record: bouncepart,\n            info: {\n              title: '尚未起名',\n              content: 'default',\n              cover: 'default',\n            },\n          })\n          .then(id => {\n            console.log('successfully bounced');\n            this.bouncing = false;\n            this.$toast('作品已为您存储');\n            this.$router.push({\n              path: '/new-music-box-viewer',\n              query: {\n                id,\n              },\n            });\n          })\n          .catch(err => {\n            this.bouncing = false;\n            this.$toast('非常抱歉，上传作品失败了');\n          });\n      } else {\n        this.$toast('什么都没录呢');\n      }\n    },\n    mapNoteTimeToColor(t) {\n      return Magic.mapNoteTimeToColor(t);\n    },\n    mapNoteMidiToLength(m) {\n      return Magic.mapNoteMidiToLength(m);\n    },\n    adjustTimeline(e) {\n      if (this.playing) {\n        console.log('ccccccccc');\n        this.toggleReplay(); // 现在播放中拉条，直接停，涉及到ref读不到最新值貌似，无法直接继续播放 this is TODO\n      } else {\n        isLinger = true; // 你拉条了肯定是\n      }\n    },\n    onMiniKeyboardScroll(e) {\n      console.log(e.touches[0].clientY);\n    },\n    onMiniKeyboardStart(e) {\n      console.log(e);\n    },\n    keng(e) {\n      // console.log(e)\n      // console.log(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY).style.backgroundColor=\"yellow\")\n      console.log(e); // e.touches is array like object\n      for (let i = 0; i <= e.changedTouches.length - 1; i++) {\n        const a = document.elementFromPoint(\n          e.changedTouches[i].clientX,\n          e.changedTouches[i].clientY,\n        );\n        if (a.classList.contains('white') || a.classList.contains('black')) {\n          if (\n            touchIdKeyMap[e.changedTouches[i].identifier] &&\n            touchIdKeyMap[e.changedTouches[i].identifier] != a.getAttribute('id')\n          ) {\n            // 这个touch已经触发，且和当前不一致\n            console.log(touchIdKeyMap);\n            this.handleNoteStart(a.getAttribute('id'));\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier]);\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id');\n          } else if (!touchIdKeyMap[e.changedTouches[i].identifier]) {\n            console.log(2);\n            this.handleNoteStart(a.getAttribute('id'));\n            touchIdKeyMap[e.changedTouches[i].identifier] = a.getAttribute('id');\n          } else {\n            console.log(3);\n            // 新旧相同什么都不做\n          }\n        } else {\n          console.log('外边');\n          if (touchIdKeyMap[e.changedTouches[i].identifier]) {\n            this.handleNoteEnd(touchIdKeyMap[e.changedTouches[i].identifier]);\n          }\n          touchIdKeyMap[e.changedTouches[i].identifier] = undefined;\n        }\n      }\n    },\n    btnStart(e) {\n      console.log(e);\n      extendBtnsTimeout = setTimeout(() => {\n        // show extend buttons\n        this.showExtendBtns = true;\n      }, 200);\n    },\n    btnEnd(e) {\n      // console.log(e)\n      clearTimeout(extendBtnsTimeout);\n      const a = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n      console.log(a);\n      if (a && a.classList.contains('bounceBtn')) {\n        // 导出\n        if (this.checkBouncibility()) {\n          this.bounceProject();\n        } else {\n          this.alertAppear = true;\n        }\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('pauseBtn'))) {\n        // 播放\n        this.toggleReplay();\n        this.showExtendBtns = false;\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('cancelBtn'))) {\n        // hide extend buttons\n        this.showExtendBtns = false;\n      }\n    },\n    tutorStart() {\n      // 0未开始，1黑屏,2键盘，3track，4时间线，5播放,\n      this.tutorSession = 1;\n      this.$toast('请锁住竖屏使用');\n      tutorOnceEnter = setTimeout(this.tutorProgress, 3000);\n      // setTimeout(()=>{this.tutorSession=2},3000)\n      // setTimeout(()=>{this.tutorSession=3;this.swiper.slidePrev()},5000)\n      // setTimeout(()=>{this.swiper.slideNext()},7000)\n      // setTimeout(()=>{this.tutorSession=4},8500)\n      // setTimeout(()=>{this.vuetimeline=120},9500)\n      // setTimeout(()=>{this.vuetimeline=0},10500)\n      // setTimeout(()=>{this.tutorSession=5},12000)\n      // setTimeout(()=>{this.showExtendBtns = true},13000)\n      // setTimeout(()=>{this.showExtendBtns=false},15000)\n      // setTimeout(()=>{this.tutorSession=0},16000)\n    },\n    tutorProgress() {\n      clearTimeout(tutorOnceEnter);\n      console.log('??????????');\n      this.tutorSession += 1;\n      console.log(this.tutorSession);\n      switch (this.tutorSession) {\n        case 1:\n          this.clearTutorTimeout();\n          this.$toast('请锁住竖屏使用,长按播放按钮保存作品');\n          break;\n        case 2:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor2start';\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'clickhand'; // clickhand\n              this.tutorClass = 'tutor2end';\n            }, 500),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.vuetimeline = 120;\n              this.handClass = 'hand';\n            }, 1500),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.vuetimeline = 0;\n              this.handClass = 'hidehand';\n            }, 2500),\n          );\n          break;\n        case 3:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor3start';\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'clickhand'; // clickhand\n              this.tutorClass = 'tutor3end';\n            }, 500),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'hand'; // clickhand\n              this.tutorClass = 'tutor3end';\n            }, 800),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'hidehand';\n            }, 1000),\n          );\n          break;\n        case 4:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor4start';\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'clickhand'; // clickhand\n              this.tutorClass = 'tutor4end';\n            }, 500),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'hand'; // clickhand\n              this.tutorClass = 'tutor4start';\n              this.showExtendBtns = true;\n            }, 1500),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'hidehand';\n            }, 2500),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.showExtendBtns = false;\n            }, 3000),\n          );\n          break;\n        case 5:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor5start';\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'clickhand'; // clickhand\n              this.tutorClass = 'tutor5end';\n            }, 1200),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.swiper.slidePrev();\n            }, 1500),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.swiper.slideNext();\n              this.handClass = 'hidehand';\n            }, 2500),\n          );\n          break;\n        case 6:\n          this.clearTutorTimeout();\n          this.handClass = 'hand'; // clickhand\n          this.tutorClass = 'tutor6start';\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'clickhand'; // clickhand\n              this.tutorClass = 'tutor6end';\n            }, 500),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'hand'; // clickhand\n              this.tutorClass = 'tutor6end';\n            }, 800),\n          );\n          tutorTimeout.push(\n            setTimeout(() => {\n              this.handClass = 'hidehand';\n            }, 1500),\n          );\n          break;\n        default:\n          this.tutorSession = 0;\n          break;\n      }\n    },\n    clearTutorTimeout() {\n      this.showExtendBtns = false;\n      tutorTimeout.forEach(v => clearTimeout(v));\n      tutorTimeout = [];\n    },\n  },\n  created() {\n    // check cookie to get serviceToken first\n    // if stoken not exist, go auth\n\n    const self = this;\n    Tone.Transport.cancel();\n    tonepart = [];\n    bouncepart = [];\n    // this is very important\n    let docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = `${window.rem}px`;\n\n    this.PARTNUM = 3;\n    this.pianoRollSwiperOption = {\n      initialSlide: this.PARTNUM,\n      // centeredSlides: true,\n      slidesPerView: 3,\n      on: {\n        // slideChange(e){\n        //   console.log('1',e)\n        // },\n        // slideNextTransitionStart(e) {\n        //   console.log('2',e)\n        // },\n        transitionEnd(e) {\n          console.log('3', this.activeIndex); // THIS!!! within swiper...scope.....\n          self.activeSwiperIndex = this.activeIndex;\n          self.confirmRecordPart(!isLinger);\n        },\n      },\n    };\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    // alert(Cookies.get('serviceToken'))\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '寻找你自己的八音盒',\n        fullPath: `${location.origin}${location.pathname}#/new-music-box-maker`,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      });\n    });\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      // TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then(res => {\n          if (res.data.errcode >= 20000) {\n            // 网页内cookie失效，需要重新验证\n            Cookies.remove('serviceToken');\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n              // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n                `${location.origin + location.pathname}#/new-music-box-maker`,\n              )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n            );\n          }\n          // alert(`welcome${res.data.data.realname}`)\n          console.log('get user info success', res.data.data);\n        })\n        .catch(err => {\n          Cookies.remove('serviceToken');\n          location.replace(\n            // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n            // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n              `${location.origin + location.pathname}#/new-music-box-maker`,\n            )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n          );\n        });\n    } else {\n      // 又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\n        // 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect'\n        // `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${location.href}&response_type=code&scope=snsapi_userinfo&state=type&quan,url=${location.href}&connect_redirect=1#wechat_redirect`\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n          `${location.origin + location.pathname}#/new-music-box-maker`,\n        )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n      );\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone(tonepart);\n    next();\n  },\n  mounted() {\n    // this.startRecord();\n    // pointer events以后可以使用\n    this.tutorStart();\n  },\n  updated() {},\n};\n</script>\n\n<template>\n<div id=\"container\">\n  <!-- <v-touch @pan=\"onPan\"> -->\n  <div :class=\"['keys',tutorSession===8?'tutorial-highlight':'']\" @touchmove=\"keng\" @touchstart.stop.prevent=\"touchNoteStartHandler\" @touchend.stop.event=\"touchNoteEndHandler\">\n    <!-- using sharp sign => '#' as object key cause syntax error... -->\n    <!-- <div :class=\"['white', 'a', activeNote.A3?'active-note':'']\" id=\"A3\"></div>\n      <div :class=\"['black', 'b-minor', activeNote.Bb3?'active-note':'']\" id=\"Bb3\"></div>\n      <div :class=\"['white', 'b', activeNote.B3?'active-note':'']\" id=\"B3\"></div> -->\n    <div :class=\"['white', 'c', activeNote.C4?'active-note':'']\" id=\"C4\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db4?'active-note':'']\" id=\"Db4\"></div>\n    <div :class=\"['white', 'd', activeNote.D4?'active-note':'']\" id=\"D4\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb4?'active-note':'']\" id=\"Eb4\"></div>\n    <div :class=\"['white', 'e', activeNote.E4?'active-note':'']\" id=\"E4\"></div>\n    <div :class=\"['white', 'f', activeNote.F4?'active-note':'']\" id=\"F4\"></div>\n    <div :class=\"['black', 'f-sharp', activeNote.Gb4?'active-note':'']\" id=\"Gb4\"></div>\n    <div :class=\"['white', 'g', activeNote.G4?'active-note':'']\" id=\"G4\"></div>\n    <div :class=\"['black', 'a-minor', activeNote.Ab4?'active-note':'']\" id=\"Ab4\"></div>\n    <div :class=\"['white', 'a', activeNote.A4?'active-note':'']\" id=\"A4\"></div>\n    <div :class=\"['black', 'b-minor', activeNote.Bb4?'active-note':'']\" id=\"Bb4\"></div>\n    <div :class=\"['white', 'b', activeNote.B4?'active-note':'']\" id=\"B4\"></div>\n    <div :class=\"['white', 'c', activeNote.C5?'active-note':'']\" id=\"C5\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db5?'active-note':'']\" id=\"Db5\"></div>\n    <div :class=\"['white', 'd', activeNote.D5?'active-note':'']\" id=\"D5\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb5?'active-note':'']\" id=\"Eb5\"></div>\n    <div :class=\"['white', 'e', activeNote.E5?'active-note':'']\" id=\"E5\"></div>\n    <div :class=\"['white', 'f', activeNote.F5?'active-note':'']\" id=\"F5\"></div>\n    <div :class=\"['black', 'f-sharp', activeNote.Gb5?'active-note':'']\" id=\"Gb5\"></div>\n    <div :class=\"['white', 'g', activeNote.G5?'active-note':'']\" id=\"G5\"></div>\n    <div :class=\"['black', 'a-minor', activeNote.Ab5?'active-note':'']\" id=\"Ab5\"></div>\n    <div :class=\"['white', 'a', activeNote.A5?'active-note':'']\" id=\"A5\"></div>\n    <div :class=\"['black', 'b-minor', activeNote.Bb5?'active-note':'']\" id=\"Bb5\"></div>\n    <div :class=\"['white', 'b', activeNote.B5?'active-note':'']\" id=\"B5\"></div>\n    <div :class=\"['white', 'c', activeNote.C6?'active-note':'']\" id=\"C6\"></div>\n    <div :class=\"['black', 'd-minor', activeNote.Db6?'active-note':'']\" id=\"Db6\"></div>\n    <div :class=\"['white', 'd', activeNote.D6?'active-note':'']\" id=\"D6\"></div>\n    <div :class=\"['black', 'e-minor', activeNote.Eb6?'active-note':'']\" id=\"Eb6\"></div>\n    <div :class=\"['white', 'e', activeNote.E6?'active-note':'']\" id=\"E6\"></div>\n    <div :class=\"['white', 'f', activeNote.F6?'active-note':'']\" id=\"F6\"></div>\n  </div>\n  <div :class=\"['keyshadow',tutorSession===8?'tutorial-highlight':'']\"></div>\n  <div class=\"scroll-container\"></div>\n  <div class=\"semi-piano-roll\" :class=\"[(tutorSession===5||tutorSession===6)?'tutorial-highlight':'']\" @touchmove.stop.prevent>\n    <swiper :options=\"pianoRollSwiperOption\" ref=\"pianoRoll\">\n      <!-- slides -->\n      <swiper-slide v-for=\"n in PARTNUM\">\n        <div class=\"current-piano-roll\">\n          <svg :style=\"{height:'90%',padding:timelineConfig.dotSize/2+'px 0'}\">\n            <defs>\n              \t<filter id=\"glowing\" height=\"400%\" width=\"130%\" x=\"-10%\" y=\"-130%\">\n              \t\t<!-- Thicken out the original shape -->\n              \t\t<feMorphology operator=\"dilate\" radius=\"1\" in=\"SourceAlpha\" result=\"thicken\" />\n\n              \t\t<!-- Use a gaussian blur to create the soft blurriness of the glow -->\n              \t\t<feGaussianBlur in=\"thicken\" stdDeviation=\"2\" result=\"blurred\" />\n\n              \t\t<!-- Change the colour -->\n              \t\t<feFlood flood-color=\"rgb(200,200,255)\" result=\"glowColor\" />\n\n              \t\t<!-- Color in the glows -->\n              \t\t<feComposite in=\"glowColor\" in2=\"blurred\" operator=\"in\" result=\"softGlow_colored\" />\n\n              \t\t<!--\tLayer the effects together -->\n              \t\t<feMerge>\n              \t\t\t<feMergeNode in=\"softGlow_colored\"/>\n              \t\t\t<feMergeNode in=\"SourceGraphic\"/>\n              \t\t</feMerge>\n              \t</filter>\n            </defs>\n            <rect v-if=\"activePartIndex===(PARTNUM-n)\" v-for=\"(item,index) in recordPart\"\n              :x=\"2\"\n              :y=\"100*item.time/20 + '%'\"\n              :width=\"mapNoteMidiToLength(item.note)\"\n              height=\"3\"\n              rx=\"2\"\n              ry=\"2\"\n              :fill=\"mapNoteTimeToColor(item.time)\"\n              filter=\"url(#glowing)\" />\n            <rect v-for=\"(item,index) in recordParts[PARTNUM-n]\"\n              :x=\"2\"\n              :y=\"100*item.time/20 + '%'\"\n              :width=\"mapNoteMidiToLength(item.note)\"\n              height=\"3\"\n              rx=\"2\"\n              ry=\"2\"\n              :fill=\"activePartIndex===(PARTNUM-n)?mapNoteTimeToColor(item.time):'rgb(120,120,120)'\"\n              :filter=\"activePartIndex===(PARTNUM-n)?'url(#glowing)':''\" />\n          </svg>\n          <div class=\"temp\" @click=\"clearRecordPart(PARTNUM-n)\"></div>\n        </div>\n      </swiper-slide>\n      <!-- need the bottom two empty slides to fill whole swiper -->\n      <swiper-slide></swiper-slide>\n      <swiper-slide></swiper-slide>\n    </swiper>\n  </div>\n\n  <div class=\"g-controller\">\n    <vue-slider :class=\"[tutorSession===2?'tutorial-highlight':'']\" v-model=\"vuetimeline\" v-bind=\"timelineConfig\" @callback=\"adjustTimeline\" @drag-end=\"\"></vue-slider>\n    <div class=\"btnContainer\" :class=\"[(tutorSession===3||tutorSession===4)?'tutorial-highlight':'']\" @touchstart.stop.prevent=\"btnStart\" @touchend.stop.event=\"btnEnd\">\n      <div :class=\"[playing?'pauseBtn':'playBtn', 'rotate']\" @click=\"toggleReplay\"></div>\n      <div :class=\"[showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']\">\n        <div class='bounceBtn rotate'></div>\n        <div class='cancelBtn'></div>\n      </div>\n    </div>\n  </div>\n  <transition name=\"fade\">\n    <div id=\"alert-mask\" v-show=\"alertAppear\">\n      <div class=\"mb-dialog\">\n        <div class=\"title\">\n          减少些音符才能做成音乐盒，是否继续上传\n        </div>\n        <div class=\"btns\">\n          <span class=\"btn cancel\" @click=\"alertAppear=false\">再调整</span>\n          <span class=\"btn confirm\" @click=\"bounceProject\">任性上传</span>\n        </div>\n      </div>\n    </div>\n  </transition>\n  <!-- </v-touch> -->\n  <div class=\"mask\" v-show=\"bouncing\">\n    <p>存储中...</p>\n  </div>\n  <div class=\"hint-mask\" id=\"tutorial-mask\" v-show=\"tutorSession>0\" @touchend=\"tutorProgress\">\n    <!-- <transition name=\"tutor1\"><div></div></transition> -->\n    <div v-show=\"tutorSession===2\" class=\"hint-text\" id=\"timeline-hint\"><h3>进度条</h3><p>拖动原点改变时间</p></div>\n    <div v-show=\"tutorSession===3\" class=\"hint-text\" id=\"play-hint\"><h3>功能按钮</h3><p>点击播放/暂停</p></div>\n    <div v-show=\"tutorSession===4\" class=\"hint-text\" id=\"longpress-hint\"><h3>功能按钮</h3><p>长按后点击：保存/取消</p></div>\n    <div v-show=\"tutorSession===5\" class=\"hint-text\" id=\"swipe-hint\"><h3>多轨编曲</h3><p>上下滑动切换轨道编曲</p></div>\n    <div v-show=\"tutorSession===6\" class=\"hint-text\" id=\"clear-hint\"><h3>多轨编曲</h3><p>清空轨道</p></div>\n  </div>\n  <div id=\"tutorhand\" :class=\"[tutorClass]\" v-show=\"handClass!='hidehand'\">\n    <div :class=\"[handClass]\"></div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import \"../_common/style/_functions.scss\";\n@import \"../_common/style/_variables.scss\";\n@import \"../_common/style/_mixins.scss\";\n@import \"../_common/style/_reboot.scss\";\n#tutorhand {\n  position: absolute;\n  width: getRem(96);\n  height: getRem(98);\n  // transform:rotate(90deg);\n  // background-color:white;\n  z-index: 500;\n  transition: background 0.05s ease, transform 1s linear;\n  &.tutor2start {\n    top: 0.5rem;\n    right: 0.8rem;\n    transition: none;\n  }\n  &.tutor2end {\n    top: 0.5rem;\n    right: 0.8rem;\n    transform: translateY(5rem);\n  }\n  &.tutor3start {\n    bottom: 0.1rem;\n    right: 0.6rem;\n    transition: none;\n  }\n  &.tutor3end {\n    bottom: 0.1rem;\n    right: 0.6rem;\n  }\n  &.tutor4start {\n    bottom: 0.1rem;\n    right: 0.6rem;\n    transition: none;\n  }\n  &.tutor4end {\n    bottom: 0.1rem;\n    right: 0.6rem;\n  }\n  &.tutor5start {\n    top: 2rem;\n    right: 3.5rem;\n    transition: none;\n  }\n  &.tutor5end {\n    top: 2rem;\n    right: 3.5rem;\n    transform: translateX(1rem);\n  }\n  &.tutor6start {\n    bottom: 0.1rem;\n    right: 3.5rem;\n    transition: none;\n  }\n  &.tutor6end {\n    bottom: 0.1rem;\n    right: 3.5rem;\n  }\n}\n// .longclickhand {transform:rotate(90deg) translateY(1rem);background:url('../assets/tutorial/handlongclick.svg') no-repeat;background-size:contain}\n.hand {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform: rotate(90deg);\n  background: url(\"../assets/tutorial/hand.svg\") no-repeat;\n  background-size: contain;\n}\n.clickhand {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  transform: rotate(90deg);\n  background: url(\"../assets/tutorial/handclick.svg\") no-repeat;\n  background-size: contain;\n}\n#tutorial-mask {\n  .hint-text {\n    color: white;\n    text-align: right;\n  }\n}\n.tutorial-highlight {\n  z-index: 200;\n  pointer-events: none;\n}\n.g-controller {\n  position: absolute;\n  width: getRem(42);\n  height: 100%;\n  padding-top: getRem(44);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  right: 0.5rem;\n  // pointer-events: none;\n  // .timeline {\n  //     height: 90%;\n  //     width: getRem(16);\n  //     background-color: rgb(110,113,158);\n  //     .progress {\n  //         height: 5%;\n  //         background-color: rgb(69,106,255);\n  //     }\n  //     .indicator {\n  //         position: relative;\n  //         width: getRem(42);\n  //         height: getRem(42);\n  //         border-radius: getRem(21);\n  //         border: 4px;\n  //         border-color: yellow;\n  //         background-color: #fff;\n  //         right: getRem(13);\n  //     }\n  // }\n  .btnContainer {\n    position: relative;\n    width: getRem(84);\n    height: getRem(84);\n    margin-top: 0.3rem;\n    .playBtn {\n      z-index: 2;\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      border-radius: getRem(42);\n      background: url(\"../assets/play.svg\") center center no-repeat;\n      background-size: getRem(32);\n      background-color: rgb(69, 106, 255);\n    }\n    .pauseBtn {\n      z-index: 2;\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      border-radius: getRem(42);\n      background: url(\"../assets/pause.svg\") center center no-repeat;\n      background-size: getRem(32);\n      background-color: rgb(69, 106, 255);\n    }\n    .bounceBtn {\n      position: absolute;\n      width: getRem(84);\n      height: getRem(84);\n      border-radius: getRem(42);\n      left: getRem(310);\n      background: url(\"../assets/check.svg\") center center no-repeat;\n      // background-size: getRem(32);\n    }\n    .cancelBtn {\n      position: absolute;\n      width: getRem(84);\n      height: getRem(84);\n      border-radius: getRem(42);\n      background: url(\"../assets/cancel.svg\") center center no-repeat;\n      // background-size: getRem(32);\n    }\n    .extendBtns {\n      // this element is within rotate, everything is opposite\n      position: absolute;\n      height: getRem(84);\n      border-radius: getRem(42);\n      overflow: hidden;\n      right: -1px;\n      z-index: 1;\n      transition: width 1s;\n      background: linear-gradient(\n        to right,\n        rgb(254, 64, 64),\n        rgb(142, 122, 239),\n        rgb(69, 106, 255) 80%\n      );\n    }\n    .extendBtnsShow {\n      width: getRem(690);\n    }\n    .extendBtnsHide {\n      width: getRem(84);\n    }\n  }\n}\n.scroll-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  background: url(\"../assets/pianolid.png\") no-repeat;\n  background-size: getRem(46) 100%;\n  // background-color:black;\n  // transform: rotate(90deg);\n  width: getRem(46);\n  height: 100%;\n  left: getRem(380);\n}\n.keyshadow {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  // background: url('../assets/pianolid.png') no-repeat;\n  background: linear-gradient(\n    to left,\n    rgba(28, 28, 28, 0.92) 0%,\n    rgba(48, 48, 48, 0.65) 10%,\n    rgba(118, 118, 118, 0.1) 40%,\n    rgba(0, 0, 0, 0) 100%\n  );\n  pointer-events: none;\n  // transform: rotate(90deg);\n  width: getRem(388);\n  height: 100%;\n  width: getRem(388);\n  left: 0;\n}\n.temp {\n  width: 0.7rem;\n  height: 0.7rem;\n  border-radius: 0.35rem;\n  margin: 0.5rem 0 0;\n  background: url(\"../assets/delete.svg\") center center no-repeat;\n  background-size: getRem(32);\n  background-color: #8e7aef;\n}\n\n#container {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-color: rgb(19, 19, 21);\n}\nh2 {\n  font-size: 20px;\n  color: #2c3e50;\n}\n\n* {\n  user-select: none;\n  margin: 0;\n  padding: 0;\n}\n\n.container {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n\n.keys {\n  // position: absolute;  //make whole keys appear\n  // 奇葩， adjust white and black heights influence all key layout\n  height: 100%;\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  justify-content: space-between;\n  float: left;\n  /* padding-right:getRem(347); */\n  box-sizing: border-box;\n}\n.semi-piano-roll {\n  top: 0;\n  width: getRem(328);\n  position: fixed;\n  right: 0;\n  height: 100%;\n  // background-color: rgb(19,19,21);\n  .swiper-container {\n    height: 100%;\n  }\n  .current-piano-roll {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    padding-top: getRem(44);\n    padding-left: getRem(18);\n    svg {\n      bottom: getRem(92);\n      height: 100%;\n      width: 100%;\n    }\n  }\n}\n\n.general-controller {\n  display: flex;\n  width: 2.5rem;\n  position: fixed;\n  right: 0;\n  height: 100%;\n  background: linear-gradient(\n    90deg,\n    rgba(40, 40, 40, 0.5) 0%,\n    rgba(40, 40, 40, 0.8) 100%\n  );\n  .funcBtn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: getRem(100);\n    height: getRem(220);\n    border-radius: getRem(10);\n    box-sizing: border-box;\n    &.record {\n      background-color: #b70411;\n      .recordHint {\n        width: getRem(50);\n        height: getRem(50);\n        background-color: white;\n        border-radius: 50%;\n      }\n      &.active {\n        background-color: red;\n        border: 1px solid white;\n      }\n    }\n    &.play {\n      background-color: #098244;\n      .playHint {\n        width: getRem(50);\n        height: getRem(50);\n        background: url(\"../assets/play.svg\") center center;\n        background-size: cover;\n      }\n      .stopHint {\n        width: getRem(45);\n        height: getRem(45);\n        background-color: white;\n        border-radius: 10%;\n      }\n      &.active {\n        background-color: #0aca0a;\n        border: 1px solid white;\n      }\n    }\n    &.undo {\n      background-color: #a4af00;\n      .undoHint {\n        width: getRem(50);\n        height: getRem(50);\n        background: url(\"../assets/undo.svg\") center center;\n        background-size: cover;\n      }\n      &:active {\n        background-color: #e3f300;\n        // border: 1px solid white;\n      }\n    }\n    &.bounce {\n      background-color: black;\n      .bounceHint {\n        width: getRem(50);\n        height: getRem(50);\n        background: url(\"../assets/bounce.svg\") center center;\n        background-size: cover;\n      }\n      &.active {\n        background-color: green;\n        border: 1px solid white;\n      }\n    }\n  }\n}\n.general-controller-enter-active,\n.general-controller-leave-active {\n  transition: all 0.5s ease;\n}\n.general-controller-enter,\n.general-controller-leave-to {\n  transform: translateX(3.5rem);\n}\n\n.progressBar {\n  position: fixed;\n  width: getRem(750);\n}\n\n/* piano keyboard layout css  */\n\n.white {\n  width: getRem(388);\n  height: 5.56%;\n  z-index: 1;\n  // border-left: 1px solid #bbb;\n  // border-bottom: 1px solid #bbb;\n  // border-radius: 0 0 5px 5px;\n  // box-shadow: 1px 0 0 rgba(80, 80, 80, 0.8) inset, 0 0 5px #ccc inset, 0 0 3px rgba(0, 0, 0, 0.2);\n  box-shadow: 0 0 1px rgba(65, 65, 65, 0.5) inset,\n    0 0 2px rgba(211, 211, 211, 0.5) inset;\n  // background: linear-gradient(to left, rgba(28,28,28,.92) 0%, rgba(48,48,48,.65) 10%,rgba(118,118,118,.1) 40%,rgba(0,0,0,0) 100%);\n  background-color: white;\n  &.active-note {\n    box-shadow: 2px 0 3px rgba(0, 0, 0, 0.1) inset,\n      -5px 5px 20px rgba(0, 0, 0, 0.2) inset, 0 0 3px rgba(0, 0, 0, 0.2);\n    // background: linear-gradient(to left, #555 0%, #ddd 40%, #eee 100%);\n    background: linear-gradient(to left, white, rgb(236, 236, 236));\n  }\n}\n\n.black {\n  position: relative;\n  width: getRem(200);\n  height: getRem(50);\n  margin-top: getRem(-50);\n  top: getRem(25);\n  // height: 4.3%; 百分比不好使\n  // margin-top: -4.3%;\n  // top: 2.15%;\n  z-index: 2;\n  border: 2px solid #000;\n  border-radius: getRem(8) 0px 0px getRem(8);\n  // box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -5px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 2px 4px rgba(0, 0, 0, 0.5);\n  // background: linear-gradient(45deg, #222 0%, #555 100%);\n  background: url(\"../assets/blackkey.png\") center center no-repeat;\n  background-size: cover;\n  &.active-note {\n    // box-shadow: -1px -1px 2px rgba(255, 255, 255, 0.2) inset, 0 -2px 2px 3px rgba(0, 0, 0, 0.6) inset, 0 1px 2px rgba(0, 0, 0, 0.5);\n    // background: linear-gradient(to right, #444 0%, #222 100%);\n    background: url(\"../assets/blackkeydown.png\") center center no-repeat;\n    background-size: cover;\n  }\n}\n\n/* mask layout */\n\n.mask {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 100;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  p {\n    font-size: 0.57rem;\n    font-weight: 200;\n    transform: rotate(90deg);\n  }\n}\n.hint-mask {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 100;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  .hint-text {\n    transform: rotate(90deg);\n    text-align: right;\n  }\n  p {\n    font-size: 0.43rem;\n    font-weight: 200;\n  }\n  h3 {\n    font-size: 0.57rem;\n    font-weight: 400;\n  }\n  #timeline-hint {\n    position: absolute;\n    top: 2rem;\n    right: 1rem;\n  }\n  #play-hint {\n    position: absolute;\n    bottom: 2rem;\n    right: 1rem;\n  }\n  #longpress-hint {\n    position: absolute;\n    bottom: 4rem;\n    right: -1rem;\n  }\n  #swipe-hint {\n    position: absolute;\n    top: 2rem;\n    right: 4rem;\n  }\n  #clear-hint {\n    position: absolute;\n    bottom: 2rem;\n    right: 4rem;\n  }\n}\n.fadein {\n  animation: fadein 1s;\n  animation-fill-mode: forwards;\n}\n\n.fadeout {\n  animation: fadeout 1s;\n  animation-fill-mode: forwards;\n}\n@keyframes fadein {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n@keyframes fadeout {\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n}\n\n.hide {\n  display: none;\n}\n\n.rotate {\n  transform: rotate(90deg);\n}\n#alert-mask {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .mb-dialog {\n    position: relative;\n    rotate: 90deg;\n    width: getRem(570);\n    padding-top: getRem(75);\n    border-radius: getRem(50);\n    height: getRem(344);\n    background-color: rgba(255, 255, 255, 0.96);\n    display: flex;\n    flex-direction: column;\n    .title {\n      flex: 1;\n      padding: 0 getRem(77);\n      display: flex;\n      align-items: flex-end;\n      position: relative;\n      width: 100%;\n      font-size: 0.32rem;\n    }\n    .input {\n      flex: 2;\n      flex-direction: column;\n      padding: 0 getRem(77);\n      display: flex;\n      align-items: flex-start;\n      justify-content: center;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-size: 0.5rem;\n      input {\n        background: transparent;\n        border: none;\n        outline: none;\n        width: 100%;\n        height: 1rem;\n        font-size: 0.54rem;\n      }\n      .splitter {\n        position: relative;\n        width: 100%;\n        height: 1px;\n        background-color: gray;\n        padding: 0 getRem(77);\n      }\n    }\n    .btns {\n      flex: 4;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-size: 0.5rem;\n      span.btn {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        flex: 1;\n        display: flex;\n        align-items: center;\n        padding-top: 0.6rem;\n      }\n      .cancel {\n        color: gray;\n        text-align: right;\n        justify-content: flex-start;\n        padding-left: getRem(77);\n      }\n      .confirm {\n        color: blue;\n        text-align: left;\n        justify-content: flex-end;\n        padding-right: getRem(77);\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/NMBMaker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{class:['keys',_vm.tutorSession===8?'tutorial-highlight':''],on:{\"touchmove\":_vm.keng,\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.touchNoteStartHandler($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.touchNoteEndHandler($event)}}},[_c('div',{class:['white', 'c', _vm.activeNote.C4?'active-note':''],attrs:{\"id\":\"C4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db4?'active-note':''],attrs:{\"id\":\"Db4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D4?'active-note':''],attrs:{\"id\":\"D4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb4?'active-note':''],attrs:{\"id\":\"Eb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E4?'active-note':''],attrs:{\"id\":\"E4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F4?'active-note':''],attrs:{\"id\":\"F4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb4?'active-note':''],attrs:{\"id\":\"Gb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G4?'active-note':''],attrs:{\"id\":\"G4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab4?'active-note':''],attrs:{\"id\":\"Ab4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A4?'active-note':''],attrs:{\"id\":\"A4\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb4?'active-note':''],attrs:{\"id\":\"Bb4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B4?'active-note':''],attrs:{\"id\":\"B4\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C5?'active-note':''],attrs:{\"id\":\"C5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db5?'active-note':''],attrs:{\"id\":\"Db5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D5?'active-note':''],attrs:{\"id\":\"D5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb5?'active-note':''],attrs:{\"id\":\"Eb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E5?'active-note':''],attrs:{\"id\":\"E5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F5?'active-note':''],attrs:{\"id\":\"F5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'f-sharp', _vm.activeNote.Gb5?'active-note':''],attrs:{\"id\":\"Gb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'g', _vm.activeNote.G5?'active-note':''],attrs:{\"id\":\"G5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'a-minor', _vm.activeNote.Ab5?'active-note':''],attrs:{\"id\":\"Ab5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'a', _vm.activeNote.A5?'active-note':''],attrs:{\"id\":\"A5\"}}),_vm._v(\" \"),_c('div',{class:['black', 'b-minor', _vm.activeNote.Bb5?'active-note':''],attrs:{\"id\":\"Bb5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'b', _vm.activeNote.B5?'active-note':''],attrs:{\"id\":\"B5\"}}),_vm._v(\" \"),_c('div',{class:['white', 'c', _vm.activeNote.C6?'active-note':''],attrs:{\"id\":\"C6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'd-minor', _vm.activeNote.Db6?'active-note':''],attrs:{\"id\":\"Db6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'd', _vm.activeNote.D6?'active-note':''],attrs:{\"id\":\"D6\"}}),_vm._v(\" \"),_c('div',{class:['black', 'e-minor', _vm.activeNote.Eb6?'active-note':''],attrs:{\"id\":\"Eb6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'e', _vm.activeNote.E6?'active-note':''],attrs:{\"id\":\"E6\"}}),_vm._v(\" \"),_c('div',{class:['white', 'f', _vm.activeNote.F6?'active-note':''],attrs:{\"id\":\"F6\"}})]),_vm._v(\" \"),_c('div',{class:['keyshadow',_vm.tutorSession===8?'tutorial-highlight':'']}),_vm._v(\" \"),_c('div',{staticClass:\"scroll-container\"}),_vm._v(\" \"),_c('div',{staticClass:\"semi-piano-roll\",class:[(_vm.tutorSession===5||_vm.tutorSession===6)?'tutorial-highlight':''],on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();}}},[_c('swiper',{ref:\"pianoRoll\",attrs:{\"options\":_vm.pianoRollSwiperOption}},[_vm._l((_vm.PARTNUM),function(n){return _c('swiper-slide',[_c('div',{staticClass:\"current-piano-roll\"},[_c('svg',{style:({height:'90%',padding:_vm.timelineConfig.dotSize/2+'px 0'})},[_c('defs',[_c('filter',{attrs:{\"id\":\"glowing\",\"height\":\"400%\",\"width\":\"130%\",\"x\":\"-10%\",\"y\":\"-130%\"}},[_c('feMorphology',{attrs:{\"operator\":\"dilate\",\"radius\":\"1\",\"in\":\"SourceAlpha\",\"result\":\"thicken\"}}),_vm._v(\" \"),_c('feGaussianBlur',{attrs:{\"in\":\"thicken\",\"stdDeviation\":\"2\",\"result\":\"blurred\"}}),_vm._v(\" \"),_c('feFlood',{attrs:{\"flood-color\":\"rgb(200,200,255)\",\"result\":\"glowColor\"}}),_vm._v(\" \"),_c('feComposite',{attrs:{\"in\":\"glowColor\",\"in2\":\"blurred\",\"operator\":\"in\",\"result\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMerge',[_c('feMergeNode',{attrs:{\"in\":\"softGlow_colored\"}}),_vm._v(\" \"),_c('feMergeNode',{attrs:{\"in\":\"SourceGraphic\"}})],1)],1)]),_vm._v(\" \"),_vm._l((_vm.recordPart),function(item,index){return (_vm.activePartIndex===(_vm.PARTNUM-n))?_c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.mapNoteTimeToColor(item.time),\"filter\":\"url(#glowing)\"}}):_vm._e()}),_vm._v(\" \"),_vm._l((_vm.recordParts[_vm.PARTNUM-n]),function(item,index){return _c('rect',{attrs:{\"x\":2,\"y\":100*item.time/20 + '%',\"width\":_vm.mapNoteMidiToLength(item.note),\"height\":\"3\",\"rx\":\"2\",\"ry\":\"2\",\"fill\":_vm.activePartIndex===(_vm.PARTNUM-n)?_vm.mapNoteTimeToColor(item.time):'rgb(120,120,120)',\"filter\":_vm.activePartIndex===(_vm.PARTNUM-n)?'url(#glowing)':''}})})],2),_vm._v(\" \"),_c('div',{staticClass:\"temp\",on:{\"click\":function($event){_vm.clearRecordPart(_vm.PARTNUM-n)}}})])])}),_vm._v(\" \"),_c('swiper-slide'),_vm._v(\" \"),_c('swiper-slide')],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"g-controller\"},[_c('vue-slider',_vm._b({class:[_vm.tutorSession===2?'tutorial-highlight':''],on:{\"callback\":_vm.adjustTimeline,\"drag-end\":function($event){}},model:{value:(_vm.vuetimeline),callback:function ($$v) {_vm.vuetimeline=$$v},expression:\"vuetimeline\"}},'vue-slider',_vm.timelineConfig,false)),_vm._v(\" \"),_c('div',{staticClass:\"btnContainer\",class:[(_vm.tutorSession===3||_vm.tutorSession===4)?'tutorial-highlight':''],on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnStart($event)},\"touchend\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"event\",undefined,$event.key)){ return null; }$event.stopPropagation();_vm.btnEnd($event)}}},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.toggleReplay}}),_vm._v(\" \"),_c('div',{class:[_vm.showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']},[_c('div',{staticClass:\"bounceBtn rotate\"}),_vm._v(\" \"),_c('div',{staticClass:\"cancelBtn\"})])])],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertAppear),expression:\"alertAppear\"}],attrs:{\"id\":\"alert-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          减少些音符才能做成音乐盒，是否继续上传\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.alertAppear=false}}},[_vm._v(\"再调整\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.bounceProject}},[_vm._v(\"任性上传\")])])])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bouncing),expression:\"bouncing\"}],staticClass:\"mask\"},[_c('p',[_vm._v(\"存储中...\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession>0),expression:\"tutorSession>0\"}],staticClass:\"hint-mask\",attrs:{\"id\":\"tutorial-mask\"},on:{\"touchend\":_vm.tutorProgress}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===2),expression:\"tutorSession===2\"}],staticClass:\"hint-text\",attrs:{\"id\":\"timeline-hint\"}},[_c('h3',[_vm._v(\"进度条\")]),_c('p',[_vm._v(\"拖动原点改变时间\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===3),expression:\"tutorSession===3\"}],staticClass:\"hint-text\",attrs:{\"id\":\"play-hint\"}},[_c('h3',[_vm._v(\"功能按钮\")]),_c('p',[_vm._v(\"点击播放/暂停\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===4),expression:\"tutorSession===4\"}],staticClass:\"hint-text\",attrs:{\"id\":\"longpress-hint\"}},[_c('h3',[_vm._v(\"功能按钮\")]),_c('p',[_vm._v(\"长按后点击：保存/取消\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===5),expression:\"tutorSession===5\"}],staticClass:\"hint-text\",attrs:{\"id\":\"swipe-hint\"}},[_c('h3',[_vm._v(\"多轨编曲\")]),_c('p',[_vm._v(\"上下滑动切换轨道编曲\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tutorSession===6),expression:\"tutorSession===6\"}],staticClass:\"hint-text\",attrs:{\"id\":\"clear-hint\"}},[_c('h3',[_vm._v(\"多轨编曲\")]),_c('p',[_vm._v(\"清空轨道\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.handClass!='hidehand'),expression:\"handClass!='hidehand'\"}],class:[_vm.tutorClass],attrs:{\"id\":\"tutorhand\"}},[_c('div',{class:[_vm.handClass]})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ac33d9c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBMaker.vue\n// module id = null\n// module chunks = ","<script>\n  export default {\n  // https://vuejs.org/v2/guide/components.html#Props\n  props: {\n    initCount: Number,\n    initActive: Boolean,\n    iconImg: String,\n    onClickCall: {\n      type: Function,\n      default() {\n        return function() {\n          console.log('tap tap in count Button');\n        };\n      },\n    },\n  },\n  computed: {\n    style() {\n      // return 'background-color: ' + this.hovering ? this.color: 'red';\n    },\n  },\n  data() {\n    return {\n      currentActiveCount: 0,\n      currentActive: false,\n    };\n  },\n  watch: {},\n  created() {\n    this.currentActive = this.initActive;\n    this.currentActiveCount = this.currentActive ? this.initCount : this.initCount + 1;\n  },\n  mounted() {},\n  updated() {},\n  methods: {\n    updateButton() {\n      // if (this.currentActive) {\n      //   this.currentActiveCount -= 1;\n      // } else {\n      //   this.currentActiveCount += 1;\n      // }\n      this.currentActive = !this.currentActive;\n      this.onClickCall();\n    },\n  },\n};\n\n</script>\n\n<template>\n  <div class=\"btnContainer\" @click=\"updateButton\">\n    <transition name=\"fade\">\n      <div class=\"active-btn-background\" v-show=\"currentActive\"></div>\n    </transition>\n    <transition name=\"slideDown\">\n      <div class=\"btn active\" v-show=\"currentActive\">\n        <div class=\"\"></div>\n        <p>{{currentActiveCount}}</p>\n      </div>\n    </transition>\n    <transition name=\"slideUp\">\n      <div class=\"btn inactive\" v-show=\"!currentActive\">\n        <div class=\"\"></div>\n        <p>{{currentActiveCount-1}}</p>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../../_common/style/_functions.scss';\n@import '../../_common/style/_variables.scss';\n@import '../../_common/style/_mixins.scss';\n@import '../../_common/style/_reboot.scss';\n.btnContainer{\n  position: relative;width:getRem(92);height:getRem(92);border:1px solid #7D839E;border-radius:50%;overflow: hidden;\n  // -webkit-mask-image: -webkit-radial-gradient(circle, white, black);\n  .active-btn-background {position: absolute;width:100%;height:100%;background-color:#7D839E;border-radius:50%;border:none;overflow: hidden;}\n  .active {\n    // background-color:#7D839E;\n    position: absolute;width: 100%;height:100%;top: 0;left:0;border-radius:50%;display:flex;flex-direction: column;color:white;align-items: center;justify-content: space-around;\n    div {width: getRem(34);height:getRem(24);margin-top:.2rem;background: url('../../assets/viewer/icon-like.png') center center no-repeat;background-size:cover;}\n    p {font-size:.37rem;margin:0 0 .1rem 0;line-height: .37rem;color:white;}\n  }\n  .inactive {\n    // background-color:blue;\n    position: absolute;width: 100%;height:100%;top:0;left:0;border-radius:50%;display:flex;flex-direction: column;color:white;align-items: center;justify-content: space-around;\n    div {width: getRem(34);height:getRem(24);margin-top:.2rem;background: url('../../assets/viewer/icon-like-gray.png') center center no-repeat;background-size:cover;}\n    p {font-size:.37rem;margin:0 0 .1rem 0;line-height: .37rem;color:#7D839E;}\n  }\n}\n//\n.slideDown-enter-active {\n  transition: all .3s ease-out;\n}\n.slideDown-leave-active {\n  transition: all .3s ease-out;\n}\n.slideDown-enter,.slideDown-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(100%);\n  opacity: 0;\n}\n.slideUp-enter-active {\n  transition: all .3s ease-out;\n}\n.slideUp-leave-active {\n  transition: all .3s ease-out;\n}\n.slideUp-enter,.slideUp-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(-100%);\n  opacity: 0;\n}\n.fade-enter-active {\n  transition: all .3s ease-out;\n}\n.fade-leave-active {\n  transition: all .3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/countButton.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btnContainer\",on:{\"click\":_vm.updateButton}},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"active-btn-background\"})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideDown\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentActive),expression:\"currentActive\"}],staticClass:\"btn active\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount))])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slideUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.currentActive),expression:\"!currentActive\"}],staticClass:\"btn inactive\"},[_c('div',{}),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.currentActiveCount-1))])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-55643781\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/countButton.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from \"../_common/js/util\";\nimport * as Api from \"../_common/js/api\";\nimport * as Cookies from \"js-cookie\";\nimport * as Magic from \"../_common/js/magic\";\nimport countButton from \"./common/countButton\";\nimport * as WxShare from \"../_common/js/wx_share\";\n\n// const musicPart;\n\nexport default {\n  components: {\n    countButton\n  },\n  data() {\n    return {\n      // playing: false,\n      loading: true,\n      workIntroAppear: false,\n      controlPanalAppear: false,\n      titleUpdateAppear: false,\n      playing: false,\n      userId: 0,\n      favStatus: false,\n      newWorkTitle: \"\",\n      finalNewWorkTitle: \"\"\n    };\n  },\n  computed: {\n    project() {\n      return this.$store.state.recordProject;\n    },\n    projectInfo() {\n      return this.$store.state.recordProjectInfo;\n    }\n  },\n  methods: {\n    load() {},\n    loadMusicById() {\n      alert(1);\n      console.log(\"hehe\", this.$store.state);\n      const { id } = this.$store.state.route.query;\n      if (id) {\n        // 从id取作品\n        console.log(\"mmm\", id);\n        this.$store.dispatch(\"FETCH_MBOX\", { id }).then(() => {\n          console.log(\"workPart\", this.project);\n          console.log(\"work info\", this.projectInfo);\n          this.favStatus = this.projectInfo.favStatus;\n          // alert('load complete');\n          // this.togglePlay();\n          const fullPath = `${location.origin}${\n            location.pathname\n          }#/new-music-box-viewer?id=${this.$store.state.route.query.id}`;\n          WxShare.prepareShareContent({\n            title: \"MUSIXISE\",\n            desc: `来听${this.projectInfo.userVO.realname}的作品-${\n              this.projectInfo.title\n            }`,\n            // fullPath:location.href.split('#')[0],\n            fullPath,\n            imgUrl: \"http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png\"\n          });\n        });\n      } else {\n        // 不会出现这个情况\n        this.$store.dispatch(\"FETCH_MBOX\", { id: 50 }).then(() => {\n          console.log(\"workPart\", this.project);\n          console.log(\"work info\", this.projectInfo);\n          this.favStatus = this.projectInfo.favStatus;\n          // alert('load complete');\n          // this.togglePlay();\n        });\n      }\n    },\n    togglePlay() {\n      // alert('111')\n      Magic.preview(this.project, !this.playing);\n      this.playing = !this.playing;\n    },\n    toggleFav() {\n      this.favStatus = +!this.favStatus;\n      Api.toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus\n      })\n        .then(() => {})\n        .catch(err => {\n          // alert(JSON.stringify(err))\n        });\n    },\n    updateWorkTitle() {\n      Api.updateWorkTitle({\n        id: this.$store.state.route.query.id,\n        title: this.newWorkTitle\n      });\n      this.finalNewWorkTitle = this.newWorkTitle;\n      const fullPath = `${location.origin}${\n        location.pathname\n      }#/new-music-box-viewer?id=${this.$store.state.route.query.id}`;\n      WxShare.prepareShareContent({\n        title: \"MUSIXISE\",\n        desc: `来听${this.projectInfo.userVO.realname}的作品-${\n          this.newWorkTitle\n        }`,\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl: \"http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png\"\n      });\n      setTimeout(() => {\n        this.titleUpdateAppear = false;\n      }, 300);\n    },\n    redirectToMaker() {\n      this.$router.push({\n        path: \"/new-music-box-maker\"\n        // query: {\n        //   id\n        // }\n      });\n    },\n    redirectToMusixiser(id) {\n      if (id) {\n        this.$router.push({\n          path: \"/musixiser\",\n          query: {\n            id\n          }\n        });\n      }\n    },\n    purchaseItem() {\n      console.log(`you are about to purchase ${this.projectInfo.id}`);\n      // this.$toast('尚未开发购买功能');\n      // WxShare.makeWxOrder({ pid: 1, wid: this.projectInfo.id, amount: 1 })\n      //   .then(res => {\n      //     console.log(\"pay succeed\");\n      //   })\n      //   .catch(err => {\n      //     console.log(\"pay fail\");\n      //   });\n      WxShare.newMakeWxOrder(\n        { pid: 1, wid: this.projectInfo.id, amount: 1 },\n        () => {\n          console.log(\"pay succeed\");\n        },\n        () => {\n          console.log(\"pay fail\");\n        }\n      );\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone();\n    next();\n  },\n  created() {\n    // check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    alert(1);\n    const self = this;\n    const docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = `${window.rem}px`;\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      self.loadMusicById();\n      return;\n    }\n    const fullPath = `${location.origin}${\n      location.pathname\n    }#/new-music-box-viewer?id=${self.$store.state.route.query.id}`;\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: \"MUSIXISE\",\n        desc: \"分享一个八音盒\",\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl: \"https://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png\"\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam(\"code\") || Cookies.get(\"serviceToken\")) {\n      // TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam(\"code\"))\n        .then(res => {\n          if (res.data.errcode >= 20000) {\n            // 网页内cookie失效，需要重新验证\n            Cookies.remove(\"serviceToken\");\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n                fullPath\n              )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            );\n          }\n          self.userId = res.data.data.userId;\n          // alert(`welcome${res.data.data.realname}`)\n          // if (!this.project) {\n          self.loadMusicById();\n          // }\n\n          console.log(\"get user info success\", res.data.data);\n        })\n        .catch(err => {\n          Cookies.remove(\"serviceToken\");\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n              fullPath\n            )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          );\n        });\n    } else {\n      // 又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n          fullPath\n        )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      );\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(() => {\n      this.loading = false;\n    }, 2000);\n    setTimeout(() => {\n      this.workIntroAppear = true;\n    }, 4500);\n    setTimeout(() => {\n      this.controlPanalAppear = true;\n    }, 5500);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {}\n};\n</script>\n\n<template>\n  <div :class=\"['container', loading?'loading':'']\">\n    <div id=\"ground\"></div>\n    <div id=\"spirit\">\n      <div class=\"spirit-part\" id=\"spirit-body\"></div>\n      <div class=\"spirit-part\" id=\"spirit-front-leaf\"></div>\n      <div class=\"spirit-part\" id=\"spirit-back-leaf\"></div>\n      <div class=\"spirit-part\" id=\"spirit-back1\"></div>\n      <div class=\"spirit-part\" id=\"spirit-back2\"></div>\n    </div>\n    <div id=\"mb\" @click=\"togglePlay\">\n      <div :class=\"['mb-part', playing?'playing':'']\" id=\"mb-lid\"></div>\n      <div class=\"mb-part\" id=\"mb-body\">\n        <div id=\"play-btn\" v-show=\"!playing\"></div>\n        <div id=\"pause-btn\" v-show=\"playing\"></div>\n      </div>\n      <div id=\"mb-shiner\" :class=\"[playing?'':'not-playing']\"></div>\n    </div>\n    <transition name=\"fade\">\n      <div id=\"music-aurora\" v-show=\"playing\"></div>\n    </transition>\n    <div id=\"low-leaf1\"></div>\n    <div id=\"low-leaf2\"></div>\n    <div id=\"low-leaf3\"></div>\n    <div id=\"low-leaf4\"></div>\n    <div id=\"mid-leaf1\"></div>\n    <div id=\"mid-leaf2\"></div>\n    <div id=\"mid-leaf3\"></div>\n    <div id=\"mid-leaf4\"></div>\n    <div id=\"top-leaf1\"></div>\n    <div id=\"top-leaf2\"></div>\n    <div id=\"top-leaf3\"></div>\n    <div id=\"top-leaf4\"></div>\n    <div id=\"top-leaf5\"></div>\n    <div id=\"top-leaf6\"></div>\n    <transition name=\"bounce\">\n      <div id=\"work-intro\" v-if=\"workIntroAppear\">\n        <div\n          class=\"title\"\n          @click=\"userId === projectInfo.userId?titleUpdateAppear=true:titleUpdateAppear=false\"\n        >{{finalNewWorkTitle||projectInfo.title}}</div>\n        <div class=\"subtitle\">\n          <span>by</span>\n          <span @click=\"redirectToMusixiser(projectInfo.userVO.userId)\">\n            <img :src=\"projectInfo.userVO.smallAvatar\" alt>\n          </span>\n          <span>{{projectInfo.userVO.realname}}</span>\n        </div>\n        <div v-if=\"userId === projectInfo.userId\" id=\"edit-work\" @click=\"titleUpdateAppear=true\"></div>\n      </div>\n    </transition>\n    <transition name=\"bounce\">\n      <div id=\"control-panal\" v-if=\"controlPanalAppear\">\n        <!-- <div class=\"likeBtn\">\n        <div class=\"active\">\n          <div class=\"\"></div>\n          <p>1</p>\n        </div>\n        <div class=\"inactive\">\n          <div class=\"\"></div>\n          <p>0</p>\n        </div>\n        </div>-->\n        <count-button\n          :initCount=\"projectInfo.collectNum?projectInfo.collectNum:0\"\n          :initActive=\"projectInfo.favStatus?true:false\"\n          iconImg\n          :onClickCall=\"toggleFav\"\n        />\n        <div class=\"purchaseBtn\" @click=\"purchaseItem\">购买</div>\n        <div class=\"makeBtn\" @click=\"redirectToMaker\">编曲</div>\n      </div>\n    </transition>\n    <transition name=\"fade\">\n      <div id=\"title-update-mask\" v-show=\"titleUpdateAppear\">\n        <div class=\"mb-dialog\">\n          <div class=\"title\">作品名称</div>\n          <div class=\"input\">\n            <input v-model=\"newWorkTitle\" type=\"text\" placeholder=\"作品新名称\">\n            <div class=\"splitter\"></div>\n          </div>\n          <div class=\"btns\">\n            <span class=\"btn cancel\" @click=\"titleUpdateAppear=false\">取消</span>\n            <span class=\"btn confirm\" @click=\"updateWorkTitle\">确认</span>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import \"../_common/style/_functions.scss\";\n@import \"../_common/style/_variables.scss\";\n@import \"../_common/style/_mixins.scss\";\n@import \"../_common/style/_reboot.scss\";\n.container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  #spirit {\n    will-change: transform;\n    transition: transform 4.5s ease-out;\n    transform: translateY(0);\n    position: absolute;\n    bottom: 5rem;\n    width: 9.8rem;\n    height: 7.8rem;\n    margin-left: 0.2rem;\n    .spirit-part {\n      position: absolute;\n    }\n    #spirit-body {\n      z-index: 4;\n      left: getRem(220);\n      top: getRem(136);\n      width: getRem(266);\n      height: getRem(368);\n      background: url(\"../assets/viewer/spirit-body.png\") center center\n        no-repeat;\n      background-size: cover;\n    }\n    #spirit-front-leaf {\n      z-index: 5;\n      left: getRem(340);\n      top: getRem(12);\n      width: getRem(398);\n      height: getRem(492);\n      background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/spirit-front-leaf.png\")\n        center center no-repeat;\n      background-size: cover;\n    }\n    #spirit-back-leaf {\n      z-index: 3;\n      width: getRem(462);\n      height: getRem(472);\n      background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/spirit-back-leaf.png\")\n        center center no-repeat;\n      background-size: cover;\n    }\n    #spirit-back1 {\n      z-index: 1;\n      left: getRem(40);\n      top: getRem(16);\n      opacity: 0.6;\n      width: getRem(618);\n      height: getRem(526);\n      background: url(\"../assets/viewer/spirit-back1.png\") center center\n        no-repeat;\n      background-size: cover;\n    }\n    #spirit-back2 {\n      z-index: 2;\n      transform: rotate(-14deg);\n      opacity: 0.3;\n      width: getRem(754);\n      height: getRem(580);\n      background: url(\"../assets/viewer/spirit-back2.png\") center center\n        no-repeat;\n      background-size: cover;\n    }\n  }\n  .not-playing {\n    animation: box-shine 1s linear infinite;\n  }\n  #mb {\n    will-change: transform;\n    transition: transform 4.5s ease-out;\n    transform: translateY(0);\n    position: absolute;\n    bottom: 4.2rem;\n    width: 1.4rem;\n    height: 1.6rem;\n    left: 2.4rem;\n    .mb-part {\n      position: absolute;\n    }\n    #mb-lid {\n      z-index: 2;\n      left: getRem(0);\n      top: getRem(0);\n      transition: 0.5s ease-out;\n      transform: rotate(54deg);\n      width: getRem(48);\n      height: getRem(64);\n      background: url(\"../assets/viewer/mb-lid.png\") center center no-repeat;\n      background-size: cover;\n    }\n    #mb-lid.playing {\n      transform: rotate(0deg) translateX(-0.3rem);\n    }\n    #mb-body {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1;\n      left: getRem(20);\n      top: getRem(50);\n      width: getRem(64);\n      height: getRem(52);\n      background: url(\"../assets/viewer/mb-body.png\") center center no-repeat;\n      background-size: cover;\n      #play-btn {\n        position: relative;\n        margin-top: 0.3rem;\n        margin-left: 0.1rem;\n        width: getRem(12);\n        height: getRem(16);\n        background: url(\"../assets/viewer/audio-play.png\") center center\n          no-repeat;\n        background-size: cover;\n      }\n      #pause-btn {\n        position: relative;\n        margin-top: 0.3rem;\n        margin-left: 0.05rem;\n        width: getRem(16);\n        height: getRem(14);\n        background: url(\"../assets/viewer/audio-pause.png\") center center\n          no-repeat;\n        background-size: cover;\n      }\n    }\n    #mb-shiner {\n      position: absolute;\n      width: 0.8rem;\n      height: 0.3rem;\n      background-color: rgba(252, 245, 141, 0.56);\n      z-index: 1;\n      bottom: 0.6rem;\n      left: 0.3rem;\n      border-radius: 0.4rem/0.2rem;\n    }\n  }\n  #music-aurora {\n    position: absolute;\n    bottom: 4.2rem;\n    left: 1.5rem;\n    width: getRem(577);\n    height: getRem(577);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/music_sprite.png\"); // background:url('http://c.m.163.com/nc/qa/activity/xijing/img/cover_tit_step2.png');\n    background-size: getRem(577) getRem(4039);\n    animation: music-aurora steps(7) 1.5s infinite;\n    pointer-events: none;\n  }\n  #ground {\n    will-change: transform;\n    transition: transform 4.5s ease-out;\n    position: absolute;\n    left: -3rem;\n    bottom: -2.3rem;\n    opacity: 0.4;\n    width: getRem(1522);\n    height: getRem(852);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/ground.png\") center\n      center no-repeat;\n    background-size: cover;\n  }\n  #low-leaf1 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(162);\n    height: getRem(168);\n    opacity: 0.38;\n    left: getRem(-160);\n    bottom: 6.5rem;\n    background: url(\"../assets/viewer/low-leaf1.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #low-leaf2 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(250);\n    height: getRem(300);\n    left: getRem(-106);\n    bottom: 2rem;\n    background: url(\"../assets/viewer/low-leaf2.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #low-leaf3 {\n    z-index: -1;\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(162);\n    height: getRem(365);\n    left: 4rem;\n    bottom: 8.5rem;\n    background: url(\"../assets/viewer/low-leaf3.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #low-leaf4 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(310);\n    height: getRem(336);\n    transform: rotate(-23deg);\n    right: -3.5rem;\n    bottom: getRem(400);\n    background: url(\"../assets/viewer/low-leaf4.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #mid-leaf1 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(557);\n    height: getRem(419);\n    transform: rotate(-10deg);\n    left: -3rem;\n    bottom: getRem(940);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/mid-leaf1.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #mid-leaf2 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(359);\n    height: getRem(415);\n    transform: rotate(-21deg);\n    left: -2.8rem;\n    bottom: getRem(840);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/mid-leaf2.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #mid-leaf3 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(583);\n    height: getRem(546);\n    right: -4.2rem;\n    transform: rotate(33deg);\n    bottom: getRem(820);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/mid-leaf3.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #mid-leaf4 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(384);\n    height: getRem(537);\n    right: -2.6rem;\n    transform: rotate(25deg);\n    bottom: getRem(740);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/mid-leaf4.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf1 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(1226);\n    height: getRem(1232);\n    transform: rotate(56deg) scale(1);\n    right: -10rem;\n    bottom: getRem(1700);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf1.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf2 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(1430);\n    height: getRem(874);\n    opacity: 0.9;\n    transform: rotate(-6deg) scale(0.7);\n    right: -10rem;\n    bottom: getRem(1200);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf2.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf3 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(1250);\n    height: getRem(986);\n    transform: rotate(-2deg) scale(0.7);\n    left: -7rem;\n    bottom: getRem(1870);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf3.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf4 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(918);\n    height: getRem(752);\n    transform: rotate(44deg) scale(0.8);\n    left: -9.5rem;\n    bottom: getRem(1270);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf4.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf5 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(1048);\n    height: getRem(1054);\n    opacity: 0.3;\n    transform: rotate(22deg) scale(0.9);\n    right: -12rem;\n    bottom: getRem(1500);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf1.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf6 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(718);\n    height: getRem(566);\n    opacity: 0.5;\n    transform: rotate(-1deg) scale(1.2);\n    left: -6rem;\n    bottom: getRem(1700);\n    background: url(\"//cdn.cnbj1.fds.api.mi-img.com/mbox/img/top-leaf5.png\")\n      center center no-repeat;\n    background-size: cover;\n  }\n  #work-intro {\n    position: absolute;\n    bottom: 3.4rem;\n    text-align: right;\n    right: 1rem;\n    .title {\n      font-size: 0.6rem;\n      margin-bottom: 0.3rem;\n      color: #7d839e;\n    }\n    .subtitle {\n      display: flex;\n      height: getRem(60);\n      font-size: 0.4rem;\n      align-items: center;\n      color: #7d839e;\n      img {\n        width: getRem(60);\n        height: getRem(60);\n        border-radius: 50%;\n        border: none;\n        margin: 0 0.3rem 0 0.3rem;\n      }\n    }\n    #edit-work {\n      position: absolute;\n      width: getRem(28);\n      height: getRem(28);\n      right: getRem(-34);\n      top: getRem(18);\n      background: url(\"../assets/viewer/edit.svg\") center center no-repeat;\n      background-size: cover;\n    }\n  }\n  #control-panal {\n    position: absolute;\n    width: 100%;\n    bottom: 0rem;\n    display: flex;\n    height: 2.4rem;\n    padding: 0 getRem(50);\n    justify-content: space-between;\n    align-items: center;\n    .purchaseBtn {\n      position: relative;\n      width: getRem(250);\n      height: getRem(92);\n      border: none;\n      border-radius: getRem(46);\n      background-color: #4266f5;\n      font-size: 0.47rem;\n      color: white;\n      text-align: center;\n      line-height: getRem(92);\n    }\n    .makeBtn {\n      position: relative;\n      width: getRem(250);\n      height: getRem(92);\n      border: none;\n      border-radius: getRem(46);\n      background-color: #4266f5;\n      font-size: 0.47rem;\n      color: white;\n      text-align: center;\n      line-height: getRem(92);\n    }\n  }\n  #playBtn {\n    width: 2rem;\n    height: 2rem;\n    background-color: pink;\n  }\n}\n.loading {\n  #spirit {\n    transition: none;\n    transform: translateY(13rem) scale(0.85);\n  }\n  #mb {\n    transition: none;\n    transform: translateY(13rem);\n  }\n  #ground {\n    transition: none;\n    transform: translateY(13rem);\n  }\n  #low-leaf1 {\n    transition: none;\n    transform: translateY(13rem);\n    opacity: 1;\n  }\n  #low-leaf2 {\n    transition: none;\n    transform: translateY(13rem) translateX(2rem);\n  }\n  #low-leaf3 {\n    transition: none;\n    transform: translateY(13rem);\n  }\n  #low-leaf4 {\n    transition: none;\n    transform: translateY(13rem) rotate(0deg);\n  }\n  #mid-leaf1 {\n    transition: none;\n    transform: translateY(12rem) rotate(9deg) scale(0.9);\n    opacity: 0.9;\n  }\n  #mid-leaf2 {\n    transition: none;\n    transform: translateY(14rem) translateX(1.8rem) rotate(-8deg) scale(0.9);\n    opacity: 0.8;\n  }\n  #mid-leaf3 {\n    transition: none;\n    transform: translateY(14rem) rotate(8deg) scale(0.9);\n    opacity: 0.8;\n  }\n  #mid-leaf4 {\n    transition: none;\n    transform: translateY(14rem) rotate(0deg) scale(0.9);\n    opacity: 0.8;\n  }\n  #top-leaf1 {\n    transition: none;\n    transform: translateY(16.5rem) rotate(35deg) scale(0.7);\n    opacity: 1;\n  }\n  #top-leaf2 {\n    transition: none;\n    transform: translateY(14.5rem) translateX(-1rem) rotate(-20deg) scale(0.6);\n    opacity: 0.9;\n  }\n  #top-leaf3 {\n    transition: none;\n    transform: translateY(15rem) translateX(1rem) rotate(13deg) scale(0.6);\n    opacity: 0.95;\n  }\n  #top-leaf4 {\n    transition: none;\n    transform: translateY(13rem) translateX(4.5rem) rotate(52deg) scale(0.7);\n    opacity: 1;\n  }\n  #top-leaf5 {\n    transition: none;\n    transform: translateY(18rem) translateX(-5rem) rotate(12deg) scale(0.7);\n    opacity: 0.3;\n  }\n  #top-leaf6 {\n    transition: none;\n    transform: translateY(14.5rem) translateX(2.5rem) rotate(39deg) scale(1);\n    opacity: 0.5;\n  }\n}\n.bounce-enter-active {\n  transition: all 2s cubic-bezier(0.19, 2, 0.32, 0.91);\n}\n.bounce-leave-active {\n  transition: all 0.8s cubic-bezier(0.19, 1.58, 0.42, 0.91);\n}\n.bounce-enter, .bounce-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(3rem);\n  opacity: 0;\n}\n.fade-enter-active {\n  transition: all 0.3s ease-out;\n}\n.fade-leave-active {\n  transition: all 0.3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n@keyframes music-aurora {\n  0% {\n    background-position: 0 0;\n  }\n  // 50% {\n  //   background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  //   // background-position: 0 getRem(-1590); // background-position: 0 -97.7%\n  // }\n  100% {\n    background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  }\n}\n@keyframes box-shine {\n  0% {\n    box-shadow: 0px 0px 0px 0px rgba(252, 245, 141, 1);\n  }\n  50% {\n    box-shadow: 0px 0px 31px 0px rgba(252, 247, 170, 0.8);\n  }\n  100% {\n    box-shadow: 0px 0px 0px 0px rgba(252, 245, 141, 1);\n  }\n}\n#title-update-mask {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .mb-dialog {\n    position: relative;\n    width: getRem(570);\n    padding-top: getRem(75);\n    border-radius: getRem(50);\n    height: getRem(344);\n    background-color: rgba(255, 255, 255, 0.96);\n    display: flex;\n    flex-direction: column;\n    .title {\n      flex: 1;\n      padding: 0 getRem(77);\n      display: flex;\n      align-items: flex-end;\n      position: relative;\n      width: 100%;\n      font-size: 0.32rem;\n    }\n    .input {\n      flex: 2;\n      flex-direction: column;\n      padding: 0 getRem(77);\n      display: flex;\n      align-items: flex-start;\n      justify-content: center;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-size: 0.5rem;\n      input {\n        background: transparent;\n        border: none;\n        outline: none;\n        width: 100%;\n        height: 1rem;\n        font-size: 0.54rem;\n      }\n      .splitter {\n        position: relative;\n        width: 100%;\n        height: 1px;\n        background-color: gray;\n        padding: 0 getRem(77);\n      }\n    }\n    .btns {\n      flex: 4;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-size: 0.5rem;\n      span.btn {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        flex: 1;\n        display: flex;\n        align-items: center;\n        padding-top: 0.6rem;\n      }\n      .cancel {\n        color: gray;\n        text-align: right;\n        justify-content: flex-start;\n        padding-left: getRem(77);\n      }\n      .confirm {\n        color: blue;\n        text-align: left;\n        justify-content: flex-end;\n        padding-right: getRem(77);\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/NMBViewer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})]),_vm._v(\" \"),_c('div',{class:[_vm.playing?'':'not-playing'],attrs:{\"id\":\"mb-shiner\"}})]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\",on:{\"click\":function($event){_vm.userId === _vm.projectInfo.userId?_vm.titleUpdateAppear=true:_vm.titleUpdateAppear=false}}},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){_vm.redirectToMusixiser(_vm.projectInfo.userVO.userId)}}},[_c('img',{attrs:{\"src\":_vm.projectInfo.userVO.smallAvatar,\"alt\":\"\"}})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.projectInfo.userVO.realname))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"购买\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"编曲\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"作品名称\")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"作品新名称\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"确认\")])])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23da7fb8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NMBViewer.vue\n// module id = null\n// module chunks = ","<script>\n// https://codepen.io/jo-asakura/pen/stFHi\nexport default {\n  props: {\n    progress: Number,\n  },\n  computed: {\n    style() {},\n  },\n  data() {\n    return {};\n  },\n  watch: {},\n  created() {\n    // alert(this.progress)\n  },\n  mounted() {},\n  updated() {},\n  methods: {\n    updateButton() {},\n  },\n};\n</script>\n\n<template>\n  <!-- <div class=\"radial-progress\">\n    <div class=\"circle\">\n      <div class=\"mask full\" :style=\"{transform:`rotate(${progress*1.8}deg)`}\">\n        <div class=\"fill\" :style=\"{transform:`rotate(${progress*1.8}deg)`}\"></div>\n      </div>\n      <div class=\"mask half\">\n        <div class=\"fill\" :style=\"{transform:`rotate(${progress*1.8}deg)`}\"></div>\n        <div class=\"fill fix\" :style=\"{transform:`rotate(${progress*3.6}deg)`}\"></div>\n      </div>      \n    </div>\n  </div> -->\n  <div>\n    <div class=\"pie-wrapper pie-wrapper--solid\">\n      <div class=\"before\" \n      :style=\"{\n        background:progress<=50?'#25252b':'#979797',\n        transform:progress<=50?`rotate(${(100  - progress) / 100 * -360}deg)`:`rotate(${(progress-50) / 100 * 360}deg)`\n        }\" />\n      <!-- <span class=\"label\">{{progress}}<span class=\"smaller\">%</span></span> -->\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import \"../../_common/style/_functions.scss\";\n@import \"../../_common/style/_variables.scss\";\n@import \"../../_common/style/_mixins.scss\";\n@import \"../../_common/style/_reboot.scss\";\n@import \"./pieProgress.scss\";\n\n$big-circle-size: 34px;\n$circle-size: 30px;\n$circle-background: #25252b;\n$circle-color: #979797;\n$transition-length: 0.1s;\n.radial-progress {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: $big-circle-size;\n  height: $big-circle-size;\n  background-color: $circle-background;\n  border-radius: 50%;\n  .circle {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    .mask,\n    .fill {\n      width: $circle-size;\n      height: $circle-size;\n      position: absolute;\n      border-radius: 50%;\n      // transition: -webkit-transform $transition-length;\n      // transition: -ms-transform $transition-length;\n      // transition: transform $transition-length;\n      backface-visibility: hidden;\n    }\n    .mask {\n      clip: rect(0px, $circle-size, $circle-size, $circle-size/2);\n      .fill {\n        clip: rect(0px, $circle-size/2, $circle-size, 0px);\n        background-color: $circle-color;\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/pieProgress.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"pie-wrapper pie-wrapper--solid\"},[_c('div',{staticClass:\"before\",style:({\n      background:_vm.progress<=50?'#25252b':'#979797',\n      transform:_vm.progress<=50?(\"rotate(\" + ((100  - _vm.progress) / 100 * -360) + \"deg)\"):(\"rotate(\" + ((_vm.progress-50) / 100 * 360) + \"deg)\")\n      })})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6a56a6f0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/pieProgress.vue\n// module id = null\n// module chunks = ","<script>\n// TODO: IMPORTANT MEMO: reschedule(clear then schedule, might lead to jump/click)\n// activeJ那块 现找播放行不行\n\nimport * as Util from '../_common/js/util';\nimport * as Api from '../_common/js/api';\nimport * as Cookies from 'js-cookie';\nimport * as Magic from '../_common/js/magic';\nimport * as WxShare from '../_common/js/wx_share';\nimport pieProgress from './common/pieProgress';\nimport Vue from 'vue';\nimport VueKonva from 'vue-konva';\n\nwindow.Tone = require('tone');\nconst musicPart = undefined;\nconst musicScale = [0, 2, 4, 5, 7, 9, 11, 12, 14, 16, 17, 19, 21, 23, 24, 26, 28, 29];\n// const colors = ['#8fd3c7', '#95c631', '#edda28', '#f7943d', '#e43159', '#bf4ea8', '#4d61d9', '#45b5a1', '#8fd3c7', '#95c631', '#edda28', '#f7943d', '#e43159', '#bf4ea8', '#4d61d9', '#45b5a1', '#edda28', '#f7943d']\nconst colors = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18];\ncolors.fill('#9FB2CF', 0, 18);\nconst invalidColors = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18];\ninvalidColors.fill('#7D90AD', 0, 18);\nlet last_i = -1;\nlet last_j = -1;\nwindow.cursorSchedules = [];\nlet aInterval = undefined;\nlet extendBtnsTimeout = undefined;\nconst TIME_PER_NOTE = 0.25;\n// const FULL_NOTE_NUM = 40; //80 notes, then if set 20 per page, it would be 4 pages\nconst FULL_NOTE_NUM = 30; // tempo 180, 20seconds => 120 notes\nconst NOTE_NUM_PER_SECTOR = 10;\n// const MB_DUR = 5; // 20 seconds length\nconst MB_DUR = 5; // 20 seconds length\nconst MIN_TEMPO = 60;\nconst MAX_TEMPO = 180;\nVue.use(VueKonva);\nvar synth = new Tone.Sampler(\n  {\n    C4: 'C4.[mp3|ogg]',\n    'D#4': 'Ds4.[mp3|ogg]',\n    'F#4': 'Fs4.[mp3|ogg]',\n    A4: 'A4.[mp3|ogg]',\n    C5: 'C5.[mp3|ogg]',\n    'D#5': 'Ds5.[mp3|ogg]',\n    'F#5': 'Fs5.[mp3|ogg]',\n    A5: 'A5.[mp3|ogg]',\n    C6: 'C6.[mp3|ogg]',\n  },\n  {\n    release: 1,\n    // 'baseUrl': '/static/audio/'\n    baseUrl: '//cnbj1.fds.api.xiaomi.com/mbox/audio/',\n  },\n).toMaster();\n\nvar pulseOptions = {\n  oscillator: {\n    type: 'triangle',\n  },\n  envelope: {\n    release: 0.07,\n  },\n};\nconst piano = new Tone.PolySynth(18, Tone.Synth, pulseOptions).toMaster();\nexport default {\n  components: {\n    // countButton,\n    pieProgress,\n  },\n  data() {\n    return {\n      NOTE_CATEGORY: 18,\n      ONE_PAGE_NOTE_NUM: 20,\n      NOTE_NUM_PER_SECTOR,\n      tempo: 80,\n      configKonva: {\n        width: 0,\n        height: 0,\n      },\n      configNoteRect: {},\n      activeJ: -1, // highlight timeline\n      sector: 1, // 2*4-1,可以滚动7次，营造处4页的氛围\n      rectArray: [[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], []],\n      alertAppear: false,\n      showExtendBtns: false,\n      playing: false,\n      currentTime: 0,\n    };\n  },\n  filters: {\n    intTime: floatTime => {\n      return Math.floor(floatTime) % 20;\n      // return floatTime\n    },\n  },\n  computed: {\n    tempoLength() {\n      const k = 100 / (MAX_TEMPO - MIN_TEMPO);\n      const b = -(MIN_TEMPO * k);\n      return { height: `${k * this.tempo + b}%` };\n    },\n  },\n  methods: {\n    setupCanvas() {\n      const docElem = document.documentElement;\n      this.configKonva = {\n        width: docElem.getBoundingClientRect().width - 50,\n        height: window.innerHeight,\n      };\n      this.configNoteRect = {\n        width: (docElem.getBoundingClientRect().width - 50) / this.NOTE_CATEGORY,\n        height: window.innerHeight / this.ONE_PAGE_NOTE_NUM,\n        fill: '#fff',\n        stroke: '#000',\n        strokeWidth: 0.5,\n      };\n      this.scheduleCursor();\n    },\n    scheduleCursor() {\n      const fullNoteNumWithinDur = Math.ceil(MB_DUR / (TIME_PER_NOTE * 120 / this.tempo));\n      // const fullNoteNumWithinDur = 10;\n      // console.log('full note num', fullNoteNumWithinDur);\n      // let lastTiming = 0;\n      for (let i = 0; i <= FULL_NOTE_NUM - 1; i++) {\n        if (i <= fullNoteNumWithinDur - 1) {\n          // 在有效范围，已规划 => 要修改\n          Tone.Transport.clear(cursorSchedules[i]);\n          cursorSchedules[i] = Tone.Transport.scheduleRepeat(\n            time => {\n              this.activeJ = i;\n              this.currentTime = i * TIME_PER_NOTE * 120 / this.tempo;\n              // const now = performance.now();\n              // console.log(now - lastTiming);\n              // lastTiming = now;\n              this.rectArray.forEach((noteSeq, noteIndex) => {\n                if (noteSeq[i]) {\n                  synth.triggerAttackRelease(\n                    Tone.Frequency(60 + musicScale[noteIndex], 'midi'),\n                    0.25,\n                  );\n                }\n              });\n              // synth.triggerAttackRelease(Tone.Frequency(60, 'midi'), 0.1);\n            },\n            fullNoteNumWithinDur * TIME_PER_NOTE * 120 / this.tempo,\n            i * TIME_PER_NOTE * 120 / this.tempo,\n          );\n        } else if (i > fullNoteNumWithinDur - 1 && cursorSchedules[i]) {\n          // 不在有效范围，已规划 => 不清除，但禁掉\n          Tone.Transport.clear(cursorSchedules[i]);\n          cursorSchedules[i] = '';\n        } else {\n          // 不在有效范围，未规划 => 储存，但不规划\n        }\n      }\n      console.log(cursorSchedules);\n      console.log(Tone.Transport._scheduledEvents);\n    },\n    setupRect(i, j, sector) {\n      let fill = '';\n      // split NOTE_NUM_PER_SECTOR and this.NOTE_NUM_PER_SECTOR for ANIMATION!!!\n      const index = j + (sector - 2) * NOTE_NUM_PER_SECTOR + 1 * this.NOTE_NUM_PER_SECTOR;\n      const withinDur = index * TIME_PER_NOTE * 120 / this.tempo < MB_DUR;\n      if (index == this.activeJ && this.rectArray[i][index]) {\n        // active current note: lighter color\n        fill = withinDur ? '#6477b1' : '#A9B9FF';\n      } else if (index == this.activeJ && !this.rectArray[i][index]) {\n        // inactive current light blue\n        fill = withinDur ? '#292B3A' : '#2B2E3D';\n      } else if (this.rectArray[i][index]) {\n        // active non-current note\n        fill = withinDur ? colors[i] : '#333740';\n      } else {\n        // incative non-current note\n        fill = withinDur ? `rgba(0,0,0,${0.98 - i * 0.3 / this.NOTE_CATEGORY})` : '#131315';\n      }\n      return {\n        ...this.configNoteRect,\n        x: i * this.configKonva.width / this.NOTE_CATEGORY,\n        y: j * this.configKonva.height / this.ONE_PAGE_NOTE_NUM,\n        fill,\n      };\n    },\n    handleTouchRect(i, j, sector) {\n      // console.log(`trigger ${i},${j+(sector-1)*this.NOTE_NUM_PER_SECTOR}`)\n      // make sound\n      synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], 'midi'), 0.25);\n      // this.rectArray[i][j] = !this.rectArray[i][j] // this is how to assign a two dim array in vue 2.0...\n      const newRow = this.rectArray[i].slice(0);\n      newRow[j + (sector - 1) * this.NOTE_NUM_PER_SECTOR] = !newRow[\n        j + (sector - 1) * this.NOTE_NUM_PER_SECTOR\n      ];\n      this.$set(this.rectArray, i, newRow);\n\n      // update last\n      last_i = i;\n      last_j = j;\n    },\n    handleMoveRect(i, j, sector) {\n      const fullJ = j + (sector - 1) * this.NOTE_NUM_PER_SECTOR;\n      const fullLastJ = last_j + (sector - 1) * this.NOTE_NUM_PER_SECTOR;\n      if (j != last_j) {\n        // take this as real note, store arrange\n        this.handleTouchRect(i, j, sector);\n      } else if (i != last_i && j == last_j) {\n        // take this as testing note, no store, no arrange\n        // make sound\n        synth.triggerAttackRelease(Tone.Frequency(60 + musicScale[i], 'midi'), 0.25);\n        // operate current note view\n        const newRow = this.rectArray[i].slice(0);\n        newRow[fullJ] = !newRow[fullJ];\n        this.$set(this.rectArray, i, newRow);\n\n        // restore last note view\n        const newLastRow = this.rectArray[last_i].slice(0);\n        newLastRow[fullLastJ] = !newLastRow[fullLastJ];\n        this.$set(this.rectArray, last_i, newLastRow);\n\n        // update last\n        last_i = i;\n        last_j = j;\n      } else {\n        // console.log(`ignore ${i},${j}`)\n      }\n    },\n    startloop() {\n      Tone.Transport.start('+0.1');\n      this.playing = true;\n    },\n    stoploop() {\n      Tone.Transport.stop();\n      this.playing = false;\n    },\n    toggleReplay() {\n      if (this.playing) this.stoploop();\n      else this.startloop();\n    },\n    minusTempo() {\n      if (this.tempo > MIN_TEMPO) {\n        this.tempo -= 5;\n        Tone.Transport.seconds = this.activeJ * TIME_PER_NOTE * 120 / this.tempo;\n        Tone.Transport.bpm.rampTo(this.tempo, 0.01);\n        setTimeout(() => {\n          // bpm ramp to, so need a settimeout\n          this.scheduleCursor();\n        }, 200);\n      }\n    },\n    addTempo() {\n      if (this.tempo < MAX_TEMPO) {\n        this.tempo += 5;\n        Tone.Transport.seconds = this.activeJ * TIME_PER_NOTE * 120 / this.tempo;\n        Tone.Transport.bpm.rampTo(this.tempo, 0.01);\n        setTimeout(() => {\n          this.scheduleCursor();\n        }, 200);\n      }\n    },\n    scrolldown() {\n      clearInterval(aInterval);\n      this.sector == FULL_NOTE_NUM / NOTE_NUM_PER_SECTOR - 1\n        ? (this.NOTE_NUM_PER_SECTOR = NOTE_NUM_PER_SECTOR - 2)\n        : (this.NOTE_NUM_PER_SECTOR = 1); // for animation,\n      this.sector <= FULL_NOTE_NUM / NOTE_NUM_PER_SECTOR - 2 ? (this.sector += 1) : ''; // this line is real scroll down\n      // below is for animation\n      aInterval = setInterval(() => {\n        this.NOTE_NUM_PER_SECTOR += 1;\n        if (this.NOTE_NUM_PER_SECTOR == 10) {\n          clearInterval(aInterval);\n        }\n      }, 50);\n    },\n    scrollup() {\n      clearInterval(aInterval);\n      this.sector == 1\n        ? (this.NOTE_NUM_PER_SECTOR = NOTE_NUM_PER_SECTOR + 2)\n        : (this.NOTE_NUM_PER_SECTOR = 20); // for animation,\n      this.sector >= 2 ? (this.sector -= 1) : '';\n      aInterval = setInterval(() => {\n        this.NOTE_NUM_PER_SECTOR -= 1;\n        if (this.NOTE_NUM_PER_SECTOR == 10) {\n          clearInterval(aInterval);\n        }\n      }, 50);\n    },\n    checkBouncibility() {\n      const result = [];\n      for (let i = 0; i <= this.NOTE_CATEGORY - 1; i++) {\n        for (let j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n          if (this.rectArray[i][j]) {\n            result.push({\n              note: Tone.Frequency(60 + musicScale[i], 'midi').toNote(),\n              time: j * TIME_PER_NOTE * 120 / this.tempo,\n            });\n          }\n        }\n      }\n      result.sort((a, b) => 0 + a.time - b.time);\n      return Magic.RealMagic(result);\n    },\n    bounceProject() {\n      // finally get something like [{note:'A4',time:0},{note:'A5',time:0.3227}]\n      const result = [];\n      for (let i = 0; i <= this.NOTE_CATEGORY - 1; i++) {\n        for (let j = 0; j <= FULL_NOTE_NUM - 1; j++) {\n          if (this.rectArray[i][j]) {\n            result.push({\n              note: Tone.Frequency(60 + musicScale[i], 'midi').toNote(),\n              time: j * TIME_PER_NOTE * 120 / this.tempo,\n            });\n          }\n        }\n      }\n      this.$store\n        .dispatch('BOUNCE_PROJECT', {\n          record: result,\n          info: {\n            title: '尚未起名',\n            content: 'default',\n            cover: 'default',\n          },\n        })\n        .then(id => {\n          console.log('successfully bounced');\n          this.bouncing = false;\n          this.$toast('作品已为您存储');\n          this.$router.push({\n            path: '/new-music-box-viewer',\n            query: {\n              id,\n            },\n          });\n        })\n        .catch(err => {\n          this.bouncing = false;\n          this.$toast('非常抱歉，上传作品失败了');\n        });\n    },\n    submitProject() {\n      if (this.checkBouncibility()) {\n        // alert(1);\n        this.bounceProject();\n      } else {\n        // alert(2);\n        this.alertAppear = true;\n      }\n    },\n    clearProject() {},\n    btnStart(e) {\n      console.log(e);\n      extendBtnsTimeout = setTimeout(() => {\n        //show extend buttons\n        this.showExtendBtns = true;\n      }, 200);\n    },\n    btnEnd(e) {\n      // console.log(e)\n      clearTimeout(extendBtnsTimeout);\n      const a = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n      console.log(a);\n      if (a && a.classList.contains('bounceBtn')) {\n        this.submitProject();\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('pauseBtn'))) {\n        //播放\n        // console.log(Tone.Transport.state)\n        this.toggleReplay();\n        this.showExtendBtns = false;\n      } else if (a && (a.classList.contains('playBtn') || a.classList.contains('cancelBtn'))) {\n        //hide extend buttons\n        this.showExtendBtns = false;\n      }\n    },\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone();\n    next();\n  },\n  created() {\n    this.setupCanvas();\n\n    // regular setup\n    const self = this;\n    Tone.Transport.cancel();\n    // this is very important\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) return;\n    // alert(Cookies.get('serviceToken'))\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '划拉划拉八音盒',\n        fullPath: `${location.origin}${location.pathname}#/new-music-box-roll`,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      });\n    });\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then(res => {\n          if (res.data.errcode >= 20000) {\n            // 网页内cookie失效，需要重新验证\n            Cookies.remove('serviceToken');\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n                location.origin + location.pathname + '#/new-music-box-roll',\n              )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n            );\n          }\n          console.log('get user info success', res.data.data);\n        })\n        .catch(err => {\n          Cookies.remove('serviceToken');\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n              location.origin + location.pathname + '#/new-music-box-roll',\n            )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n          );\n        });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n          location.origin + location.pathname + '#/new-music-box-roll',\n        )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n      );\n    }\n  },\n  mounted() {},\n  updated() {},\n};\n</script>\n\n<template>\n<div class=\"\">\n  <div class=\"roll\">\n    <v-stage :config=\"configKonva\">\n      <v-layer>\n        <template v-for='i in NOTE_CATEGORY'>\n            <v-rect v-for='j in ONE_PAGE_NOTE_NUM'\n            :key=\"`${i}${j}`\"\n            @touchstart=\"handleTouchRect(i-1,j-1,sector)\"\n            @touchmove=\"handleMoveRect(i-1,j-1,sector)\"\n            :config=\"setupRect(i-1,j-1,sector)\" />\n          </template>\n      </v-layer>\n    </v-stage>\n  </div>\n\n  <div class=\"control-panal\">\n    <div>    \n      <div @touchstart=\"scrollup\" id=\"scrollup\" class=\"rotate\"></div>\n      <div @touchstart=\"scrolldown\" id=\"scrolldown\"></div>\n    </div>\n    <div>\n      <div @touchstart=\"minusTempo\" id=\"minustempo\" class=\"rotate\"></div>\n      <div id=\"tempo-indicator\">\n        <div id=\"tempo-progress\" :style=\"tempoLength\"></div>\n        <p id=\"tempo-num\">{{this.tempo}} bpm</p>\n      </div>\n      <div @touchstart=\"addTempo\" id=\"addtempo\" class=\"rotate\"></div>\n    </div>\n    <div style=\"position:relative;display:flex;align-items:center;justify-content:center;transform:rotate(90deg);\">\n      <pie-progress :progress=\"100*currentTime/5\" />\n      <p style=\"position:absolute;font-size:12px;\">{{currentTime|intTime}}</p>\n      </div>\n    <div class=\"btnContainer\" @touchstart.stop.prevent=\"btnStart\" @touchend.stop.prevent=\"btnEnd\">\n      <div :class=\"[playing?'pauseBtn':'playBtn', 'rotate']\" @click=\"toggleReplay\"></div>\n      <div :class=\"[showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']\">\n        <div class='bounceBtn rotate'></div>\n        <div class='cancelBtn'></div>\n      </div>\n    </div>\n  </div>\n  \n  <transition name=\"fade\">\n    <div id=\"alert-mask\" v-show=\"alertAppear\">\n      <div class=\"mb-dialog\">\n        <div class=\"title\">\n          减少些音符才能做成音乐盒，是否继续上传\n        </div>\n        <div class=\"btns\">\n          <span class=\"btn cancel\" @click=\"alertAppear=false\">再调整</span>\n          <span class=\"btn confirm\" @click=\"bounceProject\">任性上传</span>\n        </div>\n      </div>\n    </div>\n  </transition>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import \"../_common/style/_functions.scss\";\n@import \"../_common/style/_variables.scss\";\n@import \"../_common/style/_mixins.scss\";\n@import \"../_common/style/_reboot.scss\";\n.roll {\n  position: absolute;\n  right: 0;\n}\n.control-panal {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  width: 50px;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: black;\n  color: white;\n  #scrollup {\n    width: 34px;\n    height: 34px;\n    background: url(\"../assets/left.png\") center center;\n    background-size: contain;\n    margin-bottom: 20px;\n  }\n  #scrolldown {\n    width: 34px;\n    height: 34px;\n    background: url(\"../assets/left.png\") center center;\n    background-size: contain;\n    transform: rotate(270deg);\n  }\n  #tempo-indicator {\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 18px;\n    height: 154px;\n    border-radius: 9px;\n    border: 1px solid #25252b;\n    background-color: #25252b;\n    #tempo-progress {\n      position: absolute;\n      top: 0;\n      width: 16px;\n      // height:140px;\n      background-color: rgba(255, 255, 255, 0.2);\n      border-radius: 9px;\n      display: flex;\n      align-items: center;\n      // border:solid 1px transparent;\n    }\n    #tempo-num {\n      position: absolute;\n      width: 60px;\n      left: -22px;\n      transform: rotate(90deg);\n      color: white;\n      font-size: 14px;\n    }\n  }\n  #minustempo {\n    margin-top: 50px;\n    margin-bottom: 10px;\n    width: 20px;\n    height: 20px;\n    background: url(\"../assets/minus.png\") center center;\n    background-size: contain;\n  }\n  #addtempo {\n    width: 20px;\n    height: 20px;\n    margin-top: 10px;\n    background: url(\"../assets/plus.png\") center center;\n    background-size: contain;\n  }\n}\n\n.fadein {\n  animation: fadein 1s;\n  animation-fill-mode: forwards;\n}\n\n.fadeout {\n  animation: fadeout 1s;\n  animation-fill-mode: forwards;\n}\n@keyframes fadein {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n@keyframes fadeout {\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n}\n.btnContainer {\n  position: relative;\n  width: getRem(84);\n  height: getRem(84);\n  margin-top: 0.3rem;\n  .playBtn {\n    z-index: 2;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: getRem(42);\n    background: url(\"../assets/play.svg\") center center no-repeat;\n    background-size: getRem(32);\n    background-color: rgb(69, 106, 255);\n  }\n  .pauseBtn {\n    z-index: 2;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: getRem(42);\n    background: url(\"../assets/pause.svg\") center center no-repeat;\n    background-size: getRem(32);\n    background-color: rgb(69, 106, 255);\n  }\n  .bounceBtn {\n    position: absolute;\n    width: getRem(84);\n    height: getRem(84);\n    border-radius: getRem(42);\n    left: getRem(310);\n    background: url(\"../assets/check.svg\") center center no-repeat;\n    // background-size: getRem(32);\n  }\n  .cancelBtn {\n    position: absolute;\n    width: getRem(84);\n    height: getRem(84);\n    border-radius: getRem(42);\n    left: getRem(600);\n    background: url(\"../assets/cancel.svg\") center center no-repeat;\n    // background-size: getRem(32);\n  }\n  .extendBtns {\n    // this element is within rotate, everything is opposite\n    position: absolute;\n    height: getRem(84);\n    border-radius: getRem(42);\n    overflow: hidden;\n    left: 0px;\n    z-index: 1;\n    transition: width 1s;\n    background: linear-gradient(\n      to left,\n      rgb(254, 64, 64),\n      rgb(142, 122, 239),\n      rgb(69, 106, 255) 80%\n    );\n  }\n  .extendBtnsShow {\n    width: getRem(690);\n  }\n  .extendBtnsHide {\n    width: getRem(84);\n  }\n}\n.rotate {\n  transform: rotate(90deg);\n}\n#alert-mask {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .mb-dialog {\n    position: relative;\n    transform: rotate(90deg);\n    width: getRem(570);\n    padding-top: getRem(75);\n    border-radius: getRem(50);\n    height: getRem(344);\n    background-color: rgba(255, 255, 255, 0.96);\n    display: flex;\n    flex-direction: column;\n    .title {\n      flex: 1;\n      padding: 0 getRem(77);\n      display: flex;\n      align-items: flex-end;\n      position: relative;\n      width: 100%;\n      font-size: 0.32rem;\n    }\n    .input {\n      flex: 2;\n      flex-direction: column;\n      padding: 0 getRem(77);\n      display: flex;\n      align-items: flex-start;\n      justify-content: center;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-size: 0.5rem;\n      input {\n        background: transparent;\n        border: none;\n        outline: none;\n        width: 100%;\n        height: 1rem;\n        font-size: 0.54rem;\n      }\n      .splitter {\n        position: relative;\n        width: 100%;\n        height: 1px;\n        background-color: gray;\n        padding: 0 getRem(77);\n      }\n    }\n    .btns {\n      flex: 4;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-size: 0.5rem;\n      span.btn {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        flex: 1;\n        display: flex;\n        align-items: center;\n        padding-top: 0.6rem;\n      }\n      .cancel {\n        color: gray;\n        text-align: right;\n        justify-content: flex-start;\n        padding-left: getRem(77);\n      }\n      .confirm {\n        color: blue;\n        text-align: left;\n        justify-content: flex-end;\n        padding-right: getRem(77);\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MBRollMaker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('div',{staticClass:\"roll\"},[_c('v-stage',{attrs:{\"config\":_vm.configKonva}},[_c('v-layer',[_vm._l((_vm.NOTE_CATEGORY),function(i){return _vm._l((_vm.ONE_PAGE_NOTE_NUM),function(j){return _c('v-rect',{key:(\"\" + i + j),attrs:{\"config\":_vm.setupRect(i-1,j-1,_vm.sector)},on:{\"touchstart\":function($event){_vm.handleTouchRect(i-1,j-1,_vm.sector)},\"touchmove\":function($event){_vm.handleMoveRect(i-1,j-1,_vm.sector)}}})})})],2)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"control-panal\"},[_c('div',[_c('div',{staticClass:\"rotate\",attrs:{\"id\":\"scrollup\"},on:{\"touchstart\":_vm.scrollup}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"scrolldown\"},on:{\"touchstart\":_vm.scrolldown}})]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"rotate\",attrs:{\"id\":\"minustempo\"},on:{\"touchstart\":_vm.minusTempo}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"tempo-indicator\"}},[_c('div',{style:(_vm.tempoLength),attrs:{\"id\":\"tempo-progress\"}}),_vm._v(\" \"),_c('p',{attrs:{\"id\":\"tempo-num\"}},[_vm._v(_vm._s(this.tempo)+\" bpm\")])]),_vm._v(\" \"),_c('div',{staticClass:\"rotate\",attrs:{\"id\":\"addtempo\"},on:{\"touchstart\":_vm.addTempo}})]),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"relative\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"center\",\"transform\":\"rotate(90deg)\"}},[_c('pie-progress',{attrs:{\"progress\":100*_vm.currentTime/5}}),_vm._v(\" \"),_c('p',{staticStyle:{\"position\":\"absolute\",\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm._f(\"intTime\")(_vm.currentTime)))])],1),_vm._v(\" \"),_c('div',{staticClass:\"btnContainer\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnStart($event)},\"touchend\":function($event){$event.stopPropagation();$event.preventDefault();_vm.btnEnd($event)}}},[_c('div',{class:[_vm.playing?'pauseBtn':'playBtn', 'rotate'],on:{\"click\":_vm.toggleReplay}}),_vm._v(\" \"),_c('div',{class:[_vm.showExtendBtns?'extendBtnsShow':'extendBtnsHide','extendBtns']},[_c('div',{staticClass:\"bounceBtn rotate\"}),_vm._v(\" \"),_c('div',{staticClass:\"cancelBtn\"})])])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertAppear),expression:\"alertAppear\"}],attrs:{\"id\":\"alert-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"\\n          减少些音符才能做成音乐盒，是否继续上传\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.alertAppear=false}}},[_vm._v(\"再调整\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.bounceProject}},[_vm._v(\"任性上传\")])])])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0c05d5a7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MBRollMaker.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from '../_common/js/util';\nimport * as Api from '../_common/js/api';\nimport * as Cookies from 'js-cookie';\nimport * as Magic from '../_common/js/magic';\nimport countButton from './common/countButton';\nimport * as WxShare from '../_common/js/wx_share';\nimport infiniteScroll from 'vue-infinite-scroll';\n\nlet musicPart = undefined;\n\nexport default {\n  directives: {\n    infiniteScroll,\n  },\n  components: {\n    countButton,\n  },\n  data() {\n    return {\n      // playing: false,\n      loading: true,\n      playing: false,\n      userId: 0,\n      isMe: false,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: '',\n      busy: true,\n    };\n  },\n  computed: {\n    musixiserInfo() {\n      return this.$store.state.musixiserInfo;\n    },\n    musixiserWorksObj() {\n      return this.$store.state.musixiserWorksObj;\n    },\n  },\n  methods: {\n    loadMusixiserById() {\n      console.log('my id: ', this.userId);\n      const id = this.userId;\n      this.$store.dispatch('FETCH_MUSIXISER', {\n        id,\n      });\n      this.busy = false;\n      // this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n      //   id,\n      //   page:1\n      // })\n    },\n    loadMore() {\n      //will call automatically when enter!\n      const id = this.userId;\n      // alert(id)\n      this.busy = true;\n      console.log('1111111', this.musixiserWorksObj.current);\n      this.$store\n        .dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n          id,\n          page: this.musixiserWorksObj.current ? this.musixiserWorksObj.current + 1 : 1,\n        })\n        .then(() => {\n          console.log('2222222', this.musixiserWorksObj);\n          if (this.musixiserWorksObj.content.length < this.musixiserWorksObj.total) {\n            this.busy = false;\n          }\n        });\n    },\n    togglePlay() {\n      // alert('111')\n      Magic.preview(this.project);\n      this.playing = !this.playing;\n    },\n    toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      Api.toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus,\n      });\n    },\n    redirectToWork(id) {\n      this.$router.push({\n        path: '/new-music-box-viewer',\n        query: {\n          id,\n        },\n      });\n    },\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone();\n    next();\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      this.userId = this.$store.state.route.query.id || 149;\n      self.loadMusixiserById();\n      return;\n    }\n    const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${\n      self.$store.state.route.query.id\n    }`;\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '我的地盘你就dê听我的',\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then(res => {\n          if (res.data.errcode >= 20000) {\n            // 网页内cookie失效，需要重新验证\n            Cookies.remove('serviceToken');\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n                fullPath,\n              )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n            );\n          }\n          self.userId = this.$store.state.route.query.id || res.data.data.userId;\n          self.isMe = self.userId == res.data.data.userId;\n          self.loadMusixiserById();\n\n          console.log('get user info success', res.data.data);\n        })\n        .catch(err => {\n          Cookies.remove('serviceToken');\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n              fullPath,\n            )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n          );\n        });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n          fullPath,\n        )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n      );\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(() => {\n      this.loading = false;\n    }, 2000);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {},\n};\n\n</script>\n\n<template>\n<div class=\"container\">\n  <!-- <div class=\"\">\n    {{musixiserInfo.realname}}\n  </div> -->\n  <div class=\"worklist\" v-infinite-scroll=\"loadMore\" infinite-scroll-disabled=\"busy\" infinite-scroll-distance=\"10\">\n    <div class=\"work\" v-for=\"item in musixiserWorksObj.content\" @click=\"redirectToWork(item.id)\">\n      <img class=\"cover\" :src=\"item.cover=='default'?item.userVO.smallAvatar:item.cover\" alt=\"\">\n      <div class=\"detail\">\n        <div class=\"hairline\"></div>\n        <div class=\"line line1\">\n          <p class=\"title\">{{ item.title }}</p>\n          <p class=\"date\">{{ item.createdDate }}</p>\n        </div>\n        <div class=\"line line2\">\n          <p class=\"creator\">{{ item.userVO.realname }}</p>\n          <p class=\"likes\">收藏人数: {{item.collectNum}}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"emptysection\" v-show=\"!loading && musixiserWorksObj.content.length==0\">\n    <div>\n      <p class=\"emptytitle\">暂无作品</p>\n      <img src=\"../assets/oops.png\" style=\"width:6rem;\"alt=\"\">\n    </div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n\n.container {position:absolute;height:100%;width:100%;background-color:#404249;}\n.worklist {\n  position:relative;padding:getRem(20);background-color:#404249;\n}\n.hairline {height:1px;background:#979797;transform: scaleY(0.5);}\n.work {\n  position:relative;display:flex;height:getRem(174);margin-bottom:getRem(30);\n  .cover {position:relative;width:getRem(174);height:getRem(174);margin-top:getRem(18);}\n  .detail {\n    flex:1;padding-left:getRem(30);\n    .line {display:flex;justify-content: space-between;}\n    .line1 {padding-top:getRem(40);padding-bottom:getRem(60);line-height:getRem(30);}\n    .line2 {padding-bottom:getRem(30);line-height:getRem(30);}\n    .title {font-size:getRem(28);color:#8c8c92;}\n    .date {font-size:getRem(20);color:#6D6E75;}\n    .creator {font-size:getRem(24);color:#6D6E75;}\n    .likes {font-size:getRem(20);color:rgba(255,255,255,.3);}\n  }\n}\n.emptysection {\n  position: relative;height:100%;color:white;display:flex;align-items:center;justify-content:center;\n  .emptytitle {font-size:1.4rem;font-weight:200;}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MusixiserDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"worklist\",attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.musixiserWorksObj.content),function(item){return _c('div',{staticClass:\"work\",on:{\"click\":function($event){_vm.redirectToWork(item.id)}}},[_c('img',{staticClass:\"cover\",attrs:{\"src\":item.cover=='default'?item.userVO.smallAvatar:item.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"hairline\"}),_vm._v(\" \"),_c('div',{staticClass:\"line line1\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(item.createdDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"line line2\"},[_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(item.userVO.realname))]),_vm._v(\" \"),_c('p',{staticClass:\"likes\"},[_vm._v(\"收藏人数: \"+_vm._s(item.collectNum))])])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && _vm.musixiserWorksObj.content.length==0),expression:\"!loading && musixiserWorksObj.content.length==0\"}],staticClass:\"emptysection\"},[_vm._m(0,false,false)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"emptytitle\"},[_vm._v(\"暂无作品\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"6rem\"},attrs:{\"src\":require(\"../assets/oops.png\"),\"alt\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-051f4e98\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MusixiserDetail.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from '../_common/js/util';\nimport * as Api from '../_common/js/api';\nimport * as Cookies from 'js-cookie';\nimport * as Magic from '../_common/js/magic';\nimport countButton from './common/countButton';\nimport * as WxShare from '../_common/js/wx_share';\nimport infiniteScroll from 'vue-infinite-scroll';\n\nlet musicPart = undefined;\n\nexport default {\n  directives: {\n    infiniteScroll,\n  },\n  components: {\n    countButton,\n  },\n  data() {\n    return {\n      // playing: false,\n      loading: true,\n      playing: false,\n      userId: 0,\n      isMe: false,\n      favStatus: false,\n      newWorkTitle: '',\n      finalNewWorkTitle: '',\n      busy: true,\n    };\n  },\n  computed: {\n    musixiserInfo() {\n      return this.$store.state.musixiserInfo;\n    },\n    favWorksObj() {\n      return this.$store.state.favWorksObj;\n    },\n  },\n  methods: {\n    loadMusixiserById() {\n      console.log('my id: ', this.userId);\n      const id = this.userId;\n      this.$store.dispatch('FETCH_MUSIXISER', {\n        id,\n      });\n      this.busy = false;\n      // this.$store.dispatch('FETCH_WORKS_FROM_MUSIXISER', {\n      //   id,\n      //   page:1\n      // })\n    },\n    loadMore() {\n      //will call automatically when enter!\n      const id = this.userId;\n      // alert(id)\n      this.busy = true;\n      console.log('1111111', this.favWorksObj.current);\n      this.$store\n        .dispatch('FETCH_FAV_WORKS', {\n          id,\n          page: this.favWorksObj.current ? this.favWorksObj.current + 1 : 1,\n        })\n        .then(() => {\n          console.log('2222222', this.favWorksObj);\n          if (this.favWorksObj.content.length < this.favWorksObj.total) {\n            this.busy = false;\n          }\n        });\n    },\n    togglePlay() {\n      // alert('111')\n      Magic.preview(this.project);\n      this.playing = !this.playing;\n    },\n    toggleFav() {\n      // this.favStatus = +!this.favStatus;\n      Api.toggleFavSong({\n        workId: this.$store.state.route.query.id,\n        status: this.favStatus,\n      });\n    },\n    redirectToWork(id) {\n      if (id) {\n        this.$router.push({\n          path: '/new-music-box-viewer',\n          query: {\n            id,\n          },\n        });\n      }\n    },\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone();\n    next();\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + 'px';\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      this.userId = this.$store.state.route.query.id || 149;\n      self.loadMusixiserById();\n      return;\n    }\n    const fullPath = `${location.origin}${location.pathname}#/new-music-box-viewer?id=${\n      self.$store.state.route.query.id\n    }`;\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: 'MUSIXISE',\n        desc: '我的地盘你就dê听我的',\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl: 'http://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png',\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam('code') || Cookies.get('serviceToken')) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam('code'))\n        .then(res => {\n          if (res.data.errcode >= 20000) {\n            // 网页内cookie失效，需要重新验证\n            Cookies.remove('serviceToken');\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n                fullPath,\n              )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n            );\n          }\n          self.userId = this.$store.state.route.query.id || res.data.data.userId;\n          self.isMe = self.userId == res.data.data.userId;\n          self.loadMusixiserById();\n\n          console.log('get user info success', res.data.data);\n        })\n        .catch(err => {\n          Cookies.remove('serviceToken');\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n              fullPath,\n            )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n          );\n        });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n          fullPath,\n        )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`,\n      );\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(() => {\n      this.loading = false;\n    }, 2000);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {},\n};\n\n</script>\n\n<template>\n<div class=\"container\">\n  <!-- <div class=\"\">\n    {{musixiserInfo.realname}}\n  </div> -->\n  <div class=\"worklist\" v-infinite-scroll=\"loadMore\" infinite-scroll-disabled=\"busy\" infinite-scroll-distance=\"10\">\n    <div class=\"work\" v-for=\"item in favWorksObj.content\" @click=\"redirectToWork(item.id)\">\n      <img class=\"cover\" :src=\"item.cover=='default'?item.user.smallAvatar:item.cover\" alt=\"\">\n      <div class=\"detail\">\n        <div class=\"hairline\"></div>\n        <div class=\"line line1\">\n          <p class=\"title\">{{ item.title }}</p>\n          <p class=\"date\">{{ item.createdDate }}</p>\n        </div>\n        <div class=\"line line2\">\n          <p class=\"creator\">{{ item.user.realname }}</p>\n          <p class=\"likes\">收藏人数: {{item.collectNum}}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"emptysection\" v-show=\"!loading && favWorksObj.content.length==0\">\n    <div>\n      <p class=\"emptytitle\">暂无作品</p>\n      <img src=\"../assets/oops.png\" style=\"width:6rem;\"alt=\"\">\n    </div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import '../_common/style/_functions.scss';\n@import '../_common/style/_variables.scss';\n@import '../_common/style/_mixins.scss';\n@import '../_common/style/_reboot.scss';\n\n.container {position:absolute;height:100%;width:100%;background-color:#404249;}\n.worklist {\n  position:relative;padding:getRem(20);background-color:#404249;\n}\n.hairline {height:1px;background:#979797;transform: scaleY(0.5);}\n.work {\n  position:relative;display:flex;height:getRem(174);margin-bottom:getRem(30);\n  .cover {position:relative;width:getRem(174);height:getRem(174);margin-top:getRem(18);}\n  .detail {\n    flex:1;padding-left:getRem(30);\n    .line {display:flex;justify-content: space-between;}\n    .line1 {padding-top:getRem(40);padding-bottom:getRem(60);line-height:getRem(30);}\n    .line2 {padding-bottom:getRem(30);line-height:getRem(30);}\n    .title {font-size:getRem(28);color:#8c8c92;}\n    .date {font-size:getRem(20);color:#6D6E75;}\n    .creator {font-size:getRem(24);color:#6D6E75;}\n    .likes {font-size:getRem(20);color:rgba(255,255,255,.3);}\n  }\n}\n.emptysection {\n  position: relative;height:100%;color:white;display:flex;align-items:center;justify-content:center;\n  .emptytitle {font-size:1.4rem;font-weight:200;}\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MyFav.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"worklist\",attrs:{\"infinite-scroll-disabled\":\"busy\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.favWorksObj.content),function(item){return _c('div',{staticClass:\"work\",on:{\"click\":function($event){_vm.redirectToWork(item.id)}}},[_c('img',{staticClass:\"cover\",attrs:{\"src\":item.cover=='default'?item.user.smallAvatar:item.cover,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"hairline\"}),_vm._v(\" \"),_c('div',{staticClass:\"line line1\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_vm._v(_vm._s(item.createdDate))])]),_vm._v(\" \"),_c('div',{staticClass:\"line line2\"},[_c('p',{staticClass:\"creator\"},[_vm._v(_vm._s(item.user.realname))]),_vm._v(\" \"),_c('p',{staticClass:\"likes\"},[_vm._v(\"收藏人数: \"+_vm._s(item.collectNum))])])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && _vm.favWorksObj.content.length==0),expression:\"!loading && favWorksObj.content.length==0\"}],staticClass:\"emptysection\"},[_vm._m(0,false,false)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"emptytitle\"},[_vm._v(\"暂无作品\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"6rem\"},attrs:{\"src\":require(\"../assets/oops.png\"),\"alt\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-66845376\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MyFav.vue\n// module id = null\n// module chunks = ","<script>\n// window.Tone = require('tone')\nimport * as Util from \"../_common/js/util\";\nimport * as Api from \"../_common/js/api\";\nimport * as Cookies from \"js-cookie\";\nimport * as Magic from \"../_common/js/magic\";\nimport countButton from \"./common/countButton\";\nimport * as WxShare from \"../_common/js/wx_share\";\nlet musicPart = undefined;\n\nexport default {\n  components: {\n    countButton\n  },\n  data() {\n    return {\n      searching: false,\n      loading: false,\n      recommendations: {}\n    };\n  },\n  computed: {},\n  methods: {\n    load() {\n      Api.getRecommendations().then(res => {\n        console.log(\"index:\", res);\n      });\n    },\n    search() {}\n  },\n  beforeRouteLeave(to, from, next) {\n    Magic.clearTone();\n    next();\n  },\n  created() {\n    //check cookie to get serviceToken first\n    // if stoken not exist, go auth\n    const self = this;\n    var docElem = document.documentElement;\n    window.rem = docElem.getBoundingClientRect().width / 10;\n    docElem.style.fontSize = window.rem + \"px\";\n\n    const inWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());\n    if (!inWechat) {\n      self.loadMusicById();\n      return;\n    }\n    const fullPath = `${location.origin}${\n      location.pathname\n    }#/new-music-box-viewer?id=${self.$store.state.route.query.id}`;\n    WxShare.prepareShareConfig().then(() => {\n      WxShare.prepareShareContent({\n        title: \"MUSIXISE\",\n        desc: \"分享一个八音盒\",\n        // fullPath:location.href.split('#')[0],\n        fullPath,\n        imgUrl: \"https://oaeyej2ty.bkt.clouddn.com/Ocrg2srw_icon33@2x.png\"\n      });\n    });\n    // alert(Cookies.get('serviceToken'))\n    if (Util.getUrlParam(\"code\") || Cookies.get(\"serviceToken\")) {\n      //TODO:ajax call to get info\n      Api.getUserInfo(Util.getUrlParam(\"code\"))\n        .then(res => {\n          if (res.data.errcode >= 20000) {\n            // 网页内cookie失效，需要重新验证\n            Cookies.remove(\"serviceToken\");\n            location.replace(\n              // will publish to node project m-musixise, under '/music-box' path\n              `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n                fullPath\n              )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n            );\n          }\n          self.userId = res.data.data.userId;\n          // alert(`welcome${res.data.data.realname}`)\n          // if (!this.project) {\n          self.loadMusicById();\n          // }\n\n          console.log(\"get user info success\", res.data.data);\n        })\n        .catch(err => {\n          Cookies.remove(\"serviceToken\");\n          location.replace(\n            `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n              fullPath\n            )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n          );\n        });\n    } else {\n      //又没有微信给的auth code又没有token存在cookie，只得验证\n      location.replace(\n        `https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=${encodeURIComponent(\n          fullPath\n        )}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect`\n      );\n    }\n  },\n  mounted() {\n    // this.startRecord();\n    setTimeout(() => {\n      this.loading = false;\n    }, 2000);\n    setTimeout(() => {\n      this.workIntroAppear = true;\n    }, 4500);\n    setTimeout(() => {\n      this.controlPanalAppear = true;\n    }, 5500);\n    // setTimeout(()=>{this.playing = true},6000)\n  },\n  updated() {}\n};\n</script>\n\n<template>\n  <div :class=\"['container', loading?'loading':'']\">\n    <div id=\"ground\"></div>\n    <div id=\"spirit\">\n      <div class=\"spirit-part\" id=\"spirit-body\"></div>\n      <div class=\"spirit-part\" id=\"spirit-front-leaf\"></div>\n      <div class=\"spirit-part\" id=\"spirit-back-leaf\"></div>\n      <div class=\"spirit-part\" id=\"spirit-back1\"></div>\n      <div class=\"spirit-part\" id=\"spirit-back2\"></div>\n    </div>\n    <div id=\"mb\" @click=\"togglePlay\">\n      <div :class=\"['mb-part', playing?'playing':'']\" id=\"mb-lid\"></div>\n      <div class=\"mb-part\" id=\"mb-body\">\n        <div id=\"play-btn\" v-show=\"!playing\"></div>\n        <div id=\"pause-btn\" v-show=\"playing\"></div>\n      </div>\n    </div>\n    <transition name=\"fade\">\n      <div id=\"music-aurora\" v-show=\"playing\"></div>\n    </transition>\n    <div id=\"low-leaf1\"></div>\n    <div id=\"low-leaf2\"></div>\n    <div id=\"low-leaf3\"></div>\n    <div id=\"low-leaf4\"></div>\n    <div id=\"mid-leaf1\"></div>\n    <div id=\"mid-leaf2\"></div>\n    <div id=\"mid-leaf3\"></div>\n    <div id=\"mid-leaf4\"></div>\n    <div id=\"top-leaf1\"></div>\n    <div id=\"top-leaf2\"></div>\n    <div id=\"top-leaf3\"></div>\n    <div id=\"top-leaf4\"></div>\n    <div id=\"top-leaf5\"></div>\n    <div id=\"top-leaf6\"></div>\n    <transition name=\"bounce\">\n      <div id=\"work-intro\" v-if=\"workIntroAppear\">\n        <div class=\"title\">{{finalNewWorkTitle||projectInfo.title}}</div>\n        <div class=\"subtitle\">\n          <span>by</span>\n          <span>\n            <img :src=\"projectInfo.owner.smallAvatar\" alt>\n          </span>\n          <span>{{projectInfo.owner.nickName}}</span>\n        </div>\n        <div v-if=\"userId === projectInfo.userId\" id=\"edit-work\" @click=\"titleUpdateAppear=true\"></div>\n      </div>\n    </transition>\n    <transition name=\"bounce\">\n      <div id=\"control-panal\" v-if=\"controlPanalAppear\">\n        <!-- <div class=\"likeBtn\">\n        <div class=\"active\">\n          <div class=\"\"></div>\n          <p>1</p>\n        </div>\n        <div class=\"inactive\">\n          <div class=\"\"></div>\n          <p>0</p>\n        </div>\n        </div>-->\n        <count-button\n          :initCount=\"projectInfo.collectNum?projectInfo.collectNum:0\"\n          :initActive=\"projectInfo.favStatus?true:false\"\n          iconImg\n          :onClickCall=\"toggleFav\"\n        />\n        <div class=\"purchaseBtn\" @click=\"purchaseItem\">购买</div>\n        <div class=\"makeBtn\" @click=\"redirectToMaker\">编曲</div>\n      </div>\n    </transition>\n    <transition name=\"fade\">\n      <div id=\"title-update-mask\" v-show=\"titleUpdateAppear\">\n        <div class=\"mb-dialog\">\n          <div class=\"title\">作品名称</div>\n          <div class=\"input\">\n            <input v-model=\"newWorkTitle\" type=\"text\" placeholder=\"作品新名称\">\n            <div class=\"splitter\"></div>\n          </div>\n          <div class=\"btns\">\n            <span class=\"btn cancel\" @click=\"titleUpdateAppear=false\">取消</span>\n            <span class=\"btn confirm\" @click=\"updateWorkTitle\">确认</span>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n@import \"../_common/style/_functions.scss\";\n@import \"../_common/style/_variables.scss\";\n@import \"../_common/style/_mixins.scss\";\n@import \"../_common/style/_reboot.scss\";\n.container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  #spirit {\n    will-change: transform;\n    transition: transform 4.5s ease-out;\n    transform: translateY(0);\n    position: absolute;\n    bottom: 5rem;\n    width: 9.8rem;\n    height: 7.8rem;\n    margin-left: 0.2rem;\n    .spirit-part {\n      position: absolute;\n    }\n    #spirit-body {\n      z-index: 4;\n      left: getRem(220);\n      top: getRem(136);\n      width: getRem(266);\n      height: getRem(368);\n      background: url(\"../assets/viewer/spirit-body.png\") center center\n        no-repeat;\n      background-size: cover;\n    }\n    #spirit-front-leaf {\n      z-index: 5;\n      left: getRem(340);\n      top: getRem(12);\n      width: getRem(398);\n      height: getRem(492);\n      background: url(\"../assets/viewer/spirit-front-leaf.png\") center center\n        no-repeat;\n      background-size: cover;\n    }\n    #spirit-back-leaf {\n      z-index: 3;\n      width: getRem(462);\n      height: getRem(472);\n      background: url(\"../assets/viewer/spirit-back-leaf.png\") center center\n        no-repeat;\n      background-size: cover;\n    }\n    #spirit-back1 {\n      z-index: 1;\n      left: getRem(40);\n      top: getRem(16);\n      opacity: 0.6;\n      width: getRem(618);\n      height: getRem(526);\n      background: url(\"../assets/viewer/spirit-back1.png\") center center\n        no-repeat;\n      background-size: cover;\n    }\n    #spirit-back2 {\n      z-index: 2;\n      transform: rotate(-14deg);\n      opacity: 0.3;\n      width: getRem(754);\n      height: getRem(580);\n      background: url(\"../assets/viewer/spirit-back2.png\") center center\n        no-repeat;\n      background-size: cover;\n    }\n  }\n  #mb {\n    will-change: transform;\n    transition: transform 4.5s ease-out;\n    transform: translateY(0);\n    position: absolute;\n    bottom: 4.2rem;\n    width: 1.4rem;\n    height: 1.6rem;\n    left: 2.4rem;\n    .mb-part {\n      position: absolute;\n    }\n    #mb-lid {\n      z-index: 2;\n      left: getRem(0);\n      top: getRem(0);\n      transition: 0.5s ease-out;\n      transform: rotate(54deg);\n      width: getRem(48);\n      height: getRem(64);\n      background: url(\"../assets/viewer/mb-lid.png\") center center no-repeat;\n      background-size: cover;\n    }\n    #mb-lid.playing {\n      transform: rotate(0deg) translateX(-0.3rem);\n    }\n    #mb-body {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1;\n      left: getRem(20);\n      top: getRem(50);\n      width: getRem(64);\n      height: getRem(52);\n      background: url(\"../assets/viewer/mb-body.png\") center center no-repeat;\n      background-size: cover;\n      #play-btn {\n        position: relative;\n        margin-top: 0.3rem;\n        margin-left: 0.1rem;\n        width: getRem(12);\n        height: getRem(16);\n        background: url(\"../assets/viewer/audio-play.png\") center center\n          no-repeat;\n        background-size: cover;\n      }\n      #pause-btn {\n        position: relative;\n        margin-top: 0.3rem;\n        margin-left: 0.05rem;\n        width: getRem(16);\n        height: getRem(14);\n        background: url(\"../assets/viewer/audio-pause.png\") center center\n          no-repeat;\n        background-size: cover;\n      }\n    }\n  }\n  #music-aurora {\n    position: absolute;\n    bottom: 4.2rem;\n    left: 1.5rem;\n    width: getRem(577);\n    height: getRem(577);\n    background: url(\"../assets/viewer/music_sprite.png\"); // background:url('http://c.m.163.com/nc/qa/activity/xijing/img/cover_tit_step2.png');\n    background-size: getRem(577) getRem(4039);\n    animation: music-aurora steps(7) 1.5s infinite;\n    pointer-events: none;\n  }\n  #ground {\n    will-change: transform;\n    transition: transform 4.5s ease-out;\n    position: absolute;\n    left: -3rem;\n    bottom: -2.3rem;\n    opacity: 0.4;\n    width: getRem(1522);\n    height: getRem(852);\n    background: url(\"../assets/viewer/ground.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #low-leaf1 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(162);\n    height: getRem(168);\n    opacity: 0.38;\n    left: getRem(-160);\n    bottom: 6.5rem;\n    background: url(\"../assets/viewer/low-leaf1.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #low-leaf2 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(250);\n    height: getRem(300);\n    left: getRem(-106);\n    bottom: 2rem;\n    background: url(\"../assets/viewer/low-leaf2.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #low-leaf3 {\n    z-index: -1;\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(162);\n    height: getRem(365);\n    left: 4rem;\n    bottom: 8.5rem;\n    background: url(\"../assets/viewer/low-leaf3.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #low-leaf4 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(310);\n    height: getRem(336);\n    transform: rotate(-23deg);\n    right: -3.5rem;\n    bottom: getRem(400);\n    background: url(\"../assets/viewer/low-leaf4.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #mid-leaf1 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(557);\n    height: getRem(419);\n    transform: rotate(-10deg);\n    left: -3rem;\n    bottom: getRem(940);\n    background: url(\"../assets/viewer/mid-leaf1.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #mid-leaf2 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(359);\n    height: getRem(415);\n    transform: rotate(-21deg);\n    left: -2.8rem;\n    bottom: getRem(840);\n    background: url(\"../assets/viewer/mid-leaf2.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #mid-leaf3 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(583);\n    height: getRem(546);\n    right: -4.2rem;\n    transform: rotate(33deg);\n    bottom: getRem(820);\n    background: url(\"../assets/viewer/mid-leaf3.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #mid-leaf4 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(384);\n    height: getRem(537);\n    right: -2.6rem;\n    transform: rotate(25deg);\n    bottom: getRem(740);\n    background: url(\"../assets/viewer/mid-leaf4.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf1 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(1226);\n    height: getRem(1232);\n    transform: rotate(56deg) scale(1);\n    right: -10rem;\n    bottom: getRem(1700);\n    background: url(\"../assets/viewer/top-leaf1.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf2 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(1430);\n    height: getRem(874);\n    opacity: 0.9;\n    transform: rotate(-6deg) scale(0.7);\n    right: -10rem;\n    bottom: getRem(1200);\n    background: url(\"../assets/viewer/top-leaf2.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf3 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(1250);\n    height: getRem(986);\n    transform: rotate(-2deg) scale(0.7);\n    left: -7rem;\n    bottom: getRem(1870);\n    background: url(\"../assets/viewer/top-leaf3.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf4 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(918);\n    height: getRem(752);\n    transform: rotate(44deg) scale(0.8);\n    left: -9.5rem;\n    bottom: getRem(1270);\n    background: url(\"../assets/viewer/top-leaf4.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf5 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(1048);\n    height: getRem(1054);\n    opacity: 0.3;\n    transform: rotate(22deg) scale(0.9);\n    right: -12rem;\n    bottom: getRem(1500);\n    background: url(\"../assets/viewer/top-leaf1.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #top-leaf6 {\n    will-change: transform;\n    transition: transform 4.5s ease-out, opacity 4.5s ease-out;\n    position: absolute;\n    width: getRem(718);\n    height: getRem(566);\n    opacity: 0.5;\n    transform: rotate(-1deg) scale(1.2);\n    left: -6rem;\n    bottom: getRem(1700);\n    background: url(\"../assets/viewer/top-leaf5.png\") center center no-repeat;\n    background-size: cover;\n  }\n  #work-intro {\n    position: absolute;\n    bottom: 3.4rem;\n    text-align: right;\n    right: 1rem;\n    .title {\n      font-size: 0.6rem;\n      margin-bottom: 0.3rem;\n      color: #7d839e;\n    }\n    .subtitle {\n      display: flex;\n      height: getRem(60);\n      font-size: 0.4rem;\n      align-items: center;\n      color: #7d839e;\n      img {\n        width: getRem(60);\n        height: getRem(60);\n        border-radius: 50%;\n        border: none;\n        margin: 0 0.3rem 0 0.3rem;\n      }\n    }\n    #edit-work {\n      position: absolute;\n      width: getRem(28);\n      height: getRem(28);\n      right: getRem(-34);\n      top: getRem(18);\n      background: url(\"../assets/viewer/edit.svg\") center center no-repeat;\n      background-size: cover;\n    }\n  }\n  #control-panal {\n    position: absolute;\n    width: 100%;\n    bottom: 0rem;\n    display: flex;\n    height: 2.4rem;\n    padding: 0 getRem(50);\n    justify-content: space-between;\n    align-items: center;\n    .purchaseBtn {\n      position: relative;\n      width: getRem(250);\n      height: getRem(92);\n      border: none;\n      border-radius: getRem(46);\n      background-color: #4266f5;\n      font-size: 0.47rem;\n      color: white;\n      text-align: center;\n      line-height: getRem(92);\n    }\n    .makeBtn {\n      position: relative;\n      width: getRem(250);\n      height: getRem(92);\n      border: none;\n      border-radius: getRem(46);\n      background-color: #4266f5;\n      font-size: 0.47rem;\n      color: white;\n      text-align: center;\n      line-height: getRem(92);\n    }\n  }\n  #playBtn {\n    width: 2rem;\n    height: 2rem;\n    background-color: pink;\n  }\n}\n.loading {\n  #spirit {\n    transition: none;\n    transform: translateY(13rem) scale(0.85);\n  }\n  #mb {\n    transition: none;\n    transform: translateY(13rem);\n  }\n  #ground {\n    transition: none;\n    transform: translateY(13rem);\n  }\n  #low-leaf1 {\n    transition: none;\n    transform: translateY(13rem);\n    opacity: 1;\n  }\n  #low-leaf2 {\n    transition: none;\n    transform: translateY(13rem) translateX(2rem);\n  }\n  #low-leaf3 {\n    transition: none;\n    transform: translateY(13rem);\n  }\n  #low-leaf4 {\n    transition: none;\n    transform: translateY(13rem) rotate(0deg);\n  }\n  #mid-leaf1 {\n    transition: none;\n    transform: translateY(12rem) rotate(9deg) scale(0.9);\n    opacity: 0.9;\n  }\n  #mid-leaf2 {\n    transition: none;\n    transform: translateY(14rem) translateX(1.8rem) rotate(-8deg) scale(0.9);\n    opacity: 0.8;\n  }\n  #mid-leaf3 {\n    transition: none;\n    transform: translateY(14rem) rotate(8deg) scale(0.9);\n    opacity: 0.8;\n  }\n  #mid-leaf4 {\n    transition: none;\n    transform: translateY(14rem) rotate(0deg) scale(0.9);\n    opacity: 0.8;\n  }\n  #top-leaf1 {\n    transition: none;\n    transform: translateY(16.5rem) rotate(35deg) scale(0.7);\n    opacity: 1;\n  }\n  #top-leaf2 {\n    transition: none;\n    transform: translateY(14.5rem) translateX(-1rem) rotate(-20deg) scale(0.6);\n    opacity: 0.9;\n  }\n  #top-leaf3 {\n    transition: none;\n    transform: translateY(15rem) translateX(1rem) rotate(13deg) scale(0.6);\n    opacity: 0.95;\n  }\n  #top-leaf4 {\n    transition: none;\n    transform: translateY(13rem) translateX(4.5rem) rotate(52deg) scale(0.7);\n    opacity: 1;\n  }\n  #top-leaf5 {\n    transition: none;\n    transform: translateY(18rem) translateX(-5rem) rotate(12deg) scale(0.7);\n    opacity: 0.3;\n  }\n  #top-leaf6 {\n    transition: none;\n    transform: translateY(14.5rem) translateX(2.5rem) rotate(39deg) scale(1);\n    opacity: 0.5;\n  }\n}\n.bounce-enter-active {\n  transition: all 2s cubic-bezier(0.19, 2, 0.32, 0.91);\n}\n.bounce-leave-active {\n  transition: all 0.8s cubic-bezier(0.19, 1.58, 0.42, 0.91);\n}\n.bounce-enter, .bounce-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(3rem);\n  opacity: 0;\n}\n.fade-enter-active {\n  transition: all 0.3s ease-out;\n}\n.fade-leave-active {\n  transition: all 0.3s ease-out;\n}\n.fade-enter, .fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n@keyframes music-aurora {\n  0% {\n    background-position: 0 0;\n  }\n  // 50% {\n  //   background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  //   // background-position: 0 getRem(-1590); // background-position: 0 -97.7%\n  // }\n  100% {\n    background-position: 0 getRem(-4039); // background-position: 0 -97.7%\n  }\n}\n#title-update-mask {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .mb-dialog {\n    position: relative;\n    width: getRem(570);\n    padding-top: getRem(75);\n    border-radius: getRem(50);\n    height: getRem(344);\n    background-color: rgba(255, 255, 255, 0.96);\n    display: flex;\n    flex-direction: column;\n    .title {\n      flex: 1;\n      padding: 0 getRem(77);\n      display: flex;\n      align-items: flex-end;\n      position: relative;\n      width: 100%;\n      font-size: 0.32rem;\n    }\n    .input {\n      flex: 2;\n      flex-direction: column;\n      padding: 0 getRem(77);\n      display: flex;\n      align-items: flex-start;\n      justify-content: center;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-size: 0.5rem;\n      input {\n        background: transparent;\n        border: none;\n        outline: none;\n        width: 100%;\n        height: 1rem;\n        font-size: 0.54rem;\n      }\n      .splitter {\n        position: relative;\n        width: 100%;\n        height: 1px;\n        background-color: gray;\n        padding: 0 getRem(77);\n      }\n    }\n    .btns {\n      flex: 4;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-size: 0.5rem;\n      span.btn {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        flex: 1;\n        display: flex;\n        align-items: center;\n        padding-top: 0.6rem;\n      }\n      .cancel {\n        color: gray;\n        text-align: right;\n        justify-content: flex-start;\n        padding-left: getRem(77);\n      }\n      .confirm {\n        color: blue;\n        text-align: left;\n        justify-content: flex-end;\n        padding-right: getRem(77);\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Recommend.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['container', _vm.loading?'loading':'']},[_c('div',{attrs:{\"id\":\"ground\"}}),_vm._v(\" \"),_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mb\"},on:{\"click\":_vm.togglePlay}},[_c('div',{class:['mb-part', _vm.playing?'playing':''],attrs:{\"id\":\"mb-lid\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mb-part\",attrs:{\"id\":\"mb-body\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"id\":\"play-btn\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"pause-btn\"}})])]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"id\":\"music-aurora\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"low-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"mid-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf1\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf2\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf3\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf4\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf5\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"top-leaf6\"}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.workIntroAppear)?_c('div',{attrs:{\"id\":\"work-intro\"}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.finalNewWorkTitle||_vm.projectInfo.title))]),_vm._v(\" \"),_c('div',{staticClass:\"subtitle\"},[_c('span',[_vm._v(\"by\")]),_vm._v(\" \"),_c('span',[_c('img',{attrs:{\"src\":_vm.projectInfo.owner.smallAvatar,\"alt\":\"\"}})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.projectInfo.owner.nickName))])]),_vm._v(\" \"),(_vm.userId === _vm.projectInfo.userId)?_c('div',{attrs:{\"id\":\"edit-work\"},on:{\"click\":function($event){_vm.titleUpdateAppear=true}}}):_vm._e()]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"bounce\"}},[(_vm.controlPanalAppear)?_c('div',{attrs:{\"id\":\"control-panal\"}},[_c('count-button',{attrs:{\"initCount\":_vm.projectInfo.collectNum?_vm.projectInfo.collectNum:0,\"initActive\":_vm.projectInfo.favStatus?true:false,\"iconImg\":\"\",\"onClickCall\":_vm.toggleFav}}),_vm._v(\" \"),_c('div',{staticClass:\"purchaseBtn\",on:{\"click\":_vm.purchaseItem}},[_vm._v(\"购买\")]),_vm._v(\" \"),_c('div',{staticClass:\"makeBtn\",on:{\"click\":_vm.redirectToMaker}},[_vm._v(\"编曲\")])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.titleUpdateAppear),expression:\"titleUpdateAppear\"}],attrs:{\"id\":\"title-update-mask\"}},[_c('div',{staticClass:\"mb-dialog\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"作品名称\")]),_vm._v(\" \"),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newWorkTitle),expression:\"newWorkTitle\"}],attrs:{\"type\":\"text\",\"placeholder\":\"作品新名称\"},domProps:{\"value\":(_vm.newWorkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newWorkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"splitter\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('span',{staticClass:\"btn cancel\",on:{\"click\":function($event){_vm.titleUpdateAppear=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('span',{staticClass:\"btn confirm\",on:{\"click\":_vm.updateWorkTitle}},[_vm._v(\"确认\")])])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"spirit\"}},[_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-body\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-front-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back-leaf\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back1\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spirit-part\",attrs:{\"id\":\"spirit-back2\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-324355b7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Recommend.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport Router from 'vue-router';\nimport HelloWorld from '@/components/HelloWorld';\n// import MBMaker from '@/components/MBMaker';\n\n// import MBAuthor from '@/components/MBAuthor';\nimport NMBMaker from '@/components/NMBMaker';\n// import MBViewer from '@/components/MBViewer';\nimport NMBViewer from '@/components/NMBViewer';\nimport MBRoll from '@/components/MBRollMaker';\nimport MusixiserDetail from '@/components/MusixiserDetail';\nimport MyFav from '@/components/MyFav';\nimport Recommend from '@/components/Recommend';\n\nVue.use(Router);\n\nexport default new Router({\n  // mode: 'history', // avoid hash in url\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: HelloWorld,\n    },\n    {\n      path: '/new-music-box-maker',\n      name: 'NMBMaker',\n      component: NMBMaker,\n    },\n    {\n      path: '/new-music-box-roll',\n      name: 'MBRoll',\n      component: MBRoll,\n    },\n    {\n      path: '/new-music-box-viewer',\n      name: 'NMBViewer',\n      component: NMBViewer,\n    },\n    {\n      path: '/musixiser',\n      name: 'MusixiserDetail',\n      component: MusixiserDetail,\n    },\n    {\n      path: '/myfav',\n      name: 'MyFav',\n      component: MyFav,\n    },\n    {\n      path: '/recommend',\n      name: 'Recommend',\n      component: Recommend,\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport { sync } from 'vuex-router-sync';\n// import VueTouch from 'vue-touch';\nimport 'vue2-toast/lib/toast.css';\nimport Toast from 'vue2-toast';\nimport { createStore } from './store';\nimport App from './App';\nimport router from './router';\n\n// Vue.use(VueTouch, { name: 'v-touch' });\nVue.use(Toast, { defaultType: 'center', duration: 2500, wordWrap: false, width: 'auto' });\nVue.config.productionTip = false;\nconst store = createStore();\nsync(store, router);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  template: '<App/>',\n  components: { App },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","module.exports = __webpack_public_path__ + \"static/img/oops.7bb4a06.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/oops.png\n// module id = SpEx\n// module chunks = 1"],"sourceRoot":""}