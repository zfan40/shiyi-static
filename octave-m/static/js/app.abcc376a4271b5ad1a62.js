webpackJsonp([1],{"/y6Y":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjNweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMjMgMTgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUxLjMgKDU3NTQ0KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Db21iaW5lZCBTaGFwZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJtYWluMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkFydGJvYXJkLTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04MDguMDAwMDAwLCAtMTA0LjAwMDAwMCkiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik04MjYuMDE4MzExLDExNi4wMDMzMzEgQzgyOS4xNDg5NDYsMTEyLjg3MjY5NSA4MzAuMDM4MDM4LDEwOS4zNjkxOCA4MjguNDM4MDQzLDEwNy4wOTg5ODQgQzgyNi40OTIzNTEsMTA0LjMzODI4NyA4MjEuODI1NTk0LDEwNC40MDI4NzcgODE5LjgxMDA3NiwxMDguMzg0NTQxIEw4MTkuMzYzOTc0LDEwOS4yNjU4MTcgTDgxOC45MTc4NzMsMTA4LjM4NDU0MSBDODE2LjkwMjM1NSwxMDQuNDAyODc3IDgxMi4yMzU1OTgsMTA0LjMzODI4NyA4MTAuMjg5OTA2LDEwNy4wOTg5ODQgQzgwOC42ODk5MTEsMTA5LjM2OTE4IDgwOS41NzkwMDMsMTEyLjg3MjY5NSA4MTIuNzA5NjM4LDExNi4wMDMzMzEgQzgxNC4xMDI5NjEsMTE3LjM5NjY1NCA4MTYuMzM1MTYsMTE4LjczNDAxMSA4MTkuMzYzOTc0LDExOS45OTY4MTEgQzgyMi4zOTI3ODksMTE4LjczNDAxMSA4MjQuNjI0OTg3LDExNy4zOTY2NTQgODI2LjAxODMxMSwxMTYuMDAzMzMxIFogTTgyOS4yNTU0MzQsMTA2LjUyMjkwMSBDODMxLjE4MjQ1MywxMDkuMjU3MTAzIDgzMC4xNjM0OTUsMTEzLjI3MjM2IDgyNi43MjU0MTgsMTE2LjcxMDQzNyBDODI1LjE5NDYwMiwxMTguMjQxMjUzIDgyMi43OTE1MTQsMTE5LjY2ODU3MSA4MTkuNTU0MjA0LDEyMS4wMDAzOTIgTDgxOS4zNjM5NzQsMTIxLjA3ODY1MiBMODE5LjE3Mzc0NSwxMjEuMDAwMzkyIEM4MTUuOTM2NDM0LDExOS42Njg1NzEgODEzLjUzMzM0NywxMTguMjQxMjUzIDgxMi4wMDI1MzEsMTE2LjcxMDQzNyBDODA4LjU2NDQ1NCwxMTMuMjcyMzYgODA3LjU0NTQ5NiwxMDkuMjU3MTAzIDgwOS40NzI1MTUsMTA2LjUyMjkwMSBDODExLjY5NzQxNywxMDMuMzY2MDQgODE2Ljc5Njc4NCwxMDMuMjUwOTAyIDgxOS4zNjM5NzQsMTA3LjE2MDgwNSBDODIxLjkzMTE2NSwxMDMuMjUwOTAyIDgyNy4wMzA1MzIsMTAzLjM2NjA0IDgyOS4yNTU0MzQsMTA2LjUyMjkwMSBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},"0UjG":function(t,e){},"3xfo":function(t,e){},"7SH3":function(t,e){},"7XeL":function(t,e){},BESS:function(t,e){},Gmqj:function(t,e){},"K8+z":function(t,e){},"M+BT":function(t,e){t.exports="data:image/png;base64,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"},NHnr:function(t,e,i){"use strict";function o(t){var e=at.get("serviceToken");return e?(ct.headers.Authorization=""+e,rt.get("//api.octave-love.com/api/v1/user/getInfo",ct)):!(e||!t)&&new $.a(function(e,i){rt.post("//api.octave-love.com/api/v1/user/oauth/wechat/callback?code="+t,"",ct).then(function(t){20001===t.data.errcode&&i(20001);var e=t.data.data.id_token;return ct.headers.Authorization=""+e,at.set("serviceToken",e,{expires:7}),rt.get("//api.octave-love.com/api/v1/user/getInfo",ct)},function(){i()}).then(function(t){e(t)}).catch(function(t){i(t)})})}function n(t,e){var i=this;return new $.a(function(o,n){var s=MidiConvert.create();console.log("record",t),t.reduce(function(t,e){return t.note(Tone.Frequency(e.note).toMidi(),e.time,1)},s.track(0).patch(32));for(var a={headers:{"Content-Type":"multipart/form-data",processData:!1,Authorization:ct.headers.Authorization}},r=s.encode(),c=new Uint8Array(r.length),u=0;u<r.length;u++)c[u]=r.charCodeAt(u);var d=new Blob([c],{type:"audio/midi;charset=binary"}),l=new FileReader;l.onload=function(){var t=et()(K.a.mark(function t(s){var r,c,u,d;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData,r.append("fname","output.mid"),r.append("data",s.target.result),c="",t.prev=4,t.next=7,rt.post("//api.octave-love.com/api/v1/uploadAudio",r,a);case 7:c=t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0),n(t.t0);case 14:return u=""+c.data.data,d=st()({},e,{url:u}),console.log(u),t.abrupt("return",rt.post("//api.octave-love.com/api/v1/work/create",ot()(d),ct).then(function(t){o(t.data.data)}).catch(function(t){n(t)}));case 18:case"end":return t.stop()}},t,i,[[4,10]])}));return function(e){return t.apply(this,arguments)}}(),l.readAsDataURL(d)})}function s(t){return rt.get("//api.octave-love.com/api/v1/work/detail/"+t,ct)}function a(t){return rt.get("//api.octave-love.com/api/v1/user/detail/"+t,ct)}function r(t,e){return rt.get("//api.octave-love.com/api/v1/work/getListByUid/"+t+"?page="+e+"&size=14",ct)}function c(t,e){return rt.get("//api.octave-love.com/api/v1/favorite/getWorkList/"+t+"?page="+e+"&size=14",ct)}function u(t){var e=t.workId,i=t.status;return rt.post("//api.octave-love.com/api/v1/favorite/create",ot()({workId:e,status:i}),ct)}function d(t){var e=t.id,i=t.title,o=t.cover,n=t.content;return rt.put("//api.octave-love.com/api/v1/work/updateWork/"+e,ot()({title:i,cover:o,content:n}),ct)}function l(){return rt.post("//api.octave-love.com/api/v1/home","",ct)}function p(t){var e=t.pid,i=t.wid,o=t.amount,n=t.addressId,s=t.message;return rt.post("//api.octave-love.com/api/v1/shop/orders/create",ot()({pid:e,wid:i,amount:o,addressId:n,message:s}),ct)}function v(t){var e=t.orderId;return rt.post("//api.octave-love.com/api/v1/shop/pay/unifiedorder?orderId="+e,"",ct)}function h(t){return rt.get("//api.octave-love.com/api/v1/shop/orders/myOrderList?page="+t+"&size=14",ct)}function f(t){return rt.post("//api.octave-love.com/api/v1/shop/address/create",ot()(t),ct)}function m(t){var e=t.media_id;return rt.post("//api.octave-love.com/api/v1/wechat/saveMedia?media_id="+e,"",ct)}function g(){return rt.get("//api.octave-love.com/api/v1/admin/shop/products",ct)}function w(t){var e=t.page,i=t.size;return rt.get("//api.octave-love.com//api/v1/admin/works?page="+e+"&size="+i,ct)}function y(t){i("Gmqj")}function k(t){var e=new RegExp("[?|&]"+t+"=([^&]+)"),i=location.search.match(e);return i&&i[1]}function A(t){i("eTTF")}function T(t){i("7XeL")}function _(t){i("PV+0")}function C(t){i("xyZm")}function b(t){console.log("== Enter RealMagic =="),console.log(ot()(t));var e={};t.forEach(function(t){var i=parseInt(2*me.Frequency(t.note).toFrequency(),10);e[i]||(e[i]=[]),e[i].push(t.time)});var i=fe()(e),o=ve()(e),n=[],s=[];if(i.length>18)return console.log("音种类超过18个，这个做不了"),!1;if(o.forEach(function(t){var e=[];t.forEach(function(i,o){var n=[],s=!1,a=!1;if(0===o)e.push(1);else{for(var r=o;r>=1&&!s;){if(r-=1,i-t[r]>=ge&&-1===n.indexOf(e[r])){e.push(e[r]),a=!0;break}if(-1===n.indexOf(e[r])&&(n.push(e[r]),[].concat(jt()(new le.a(e))).length===[].concat(jt()(new le.a(n))).length)){s=!0;break}}(0===r&&!a||s)&&e.push(Math.max.apply(Math,e)+1)}}),s.push(e)}),console.log(i),console.log(o),console.log("hehe",s),s.forEach(function(t,e){for(var o=0;o<=Math.max.apply(Math,jt()(t))-1;)n.push(i[e]),o+=1}),n.length<18)for(var a=n[n.length-1];n.length<18;)n.push(a);else if(n.length>18)return console.log("所需音片儿超过18个"),!1;return!0}function I(t){var e=[151,255,241],i=[137,228,217],o=[143,123,242],n=[0,0,0];return t<0||t>20||t<=10&&(n=[e[0]+t*(i[0]-e[0])/10,e[1]+t*(i[1]-e[1])/10,e[2]+t*(i[2]-e[2])/10]),n=[i[0]+t*(o[0]-i[0])/10,i[1]+t*(o[1]-i[1])/10,i[2]+t*(o[2]-i[2])/10],"rgb("+Math.floor(n[0])+","+Math.floor(n[1])+","+Math.floor(n[2])+")"}function x(t){return""+((me.Frequency(t).toMidi()-50)/70*60+.2)}function M(t){if(t&&t.length&&t.forEach(function(t){try{t.dispose()}catch(t){}}),we)try{we.dispose()}catch(t){}}function E(t,e){if(console.log("current state",me.Transport.state),e){if(ye||(console.log("pp"),ke.triggerAttack("E6",0,0),ye=!0),we)try{we.dispose()}catch(t){}we=new me.Part(function(t,e){ke.triggerAttackRelease(me.Frequency(e.midi,"midi"),"2n",t)},t).start(0,0),we.loop=!0;var i=t[t.length-1];i.time>=20?we.loopEnd=i.time+i.duration+2:we.loopEnd=21,me.Transport.start("+0.01",0)}else me.Transport.stop(0)}function N(t,e){ye||(console.log("ppp"),ke.triggerAttack("E6",0,0),ye=!0),MidiConvert.load(t,function(t){console.log("dasdsad",t),E(t.tracks.reduce(function(t,e){return t.concat(e.notes)},[]),e)})}function O(t){i("3xfo")}function S(t){i("YKqf")}function D(t){i("BESS")}function P(t){i("K8+z")}function j(t){i("RiuW")}function R(t){i("dPGL")}function W(t){i("gZ7m")}function L(t){i("Qp/N")}function B(t){i("Z/is")}function U(t){i("0UjG")}function z(t){i("Z++l")}function F(t){i("7SH3")}function G(t){i("PcRd")}function Y(t){var e="string"==typeof t?+new Date(t.replace(" ","T")):t,i=(new Date).getTime(),o=i-e;if(!(o<0)){var n=o/31104e6,s=o/2592e6,a=o/6048e5,r=o/864e5,c=o/36e5,u=o/6e4;return n>=1?parseInt(n)+"年前":s>=1?parseInt(s)+"月前":a>=1?parseInt(a)+"周前":r>=1?parseInt(r)+"天前":c>=1?parseInt(c)+"小时前":u>=1?parseInt(u)+"分钟前":"刚刚"}}Object.defineProperty(e,"__esModule",{value:!0});var q=i("7+uW"),H=i("9JMe"),X=(i("e195"),i("1BT9")),Z=i.n(X),Q=i("NYxO"),V=i("Xxa5"),K=i.n(V),J=i("//Fk"),$=i.n(J),tt=i("exGp"),et=i.n(tt),it=i("mvHQ"),ot=i.n(it),nt=i("Dd8w"),st=i.n(nt),at=i("lbHh"),rt=i("mtWM");rt.interceptors.response.use(function(t){return"0"!==t.data.errcode?(alert(t.data.resmsg),$.a.reject(t)):t});var ct={headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"eyJhbGciOiJIUzI1NiJ9.eyJ1aWQiOjIzOSwic3ViIjoiMjM5IiwiZXhwIjoxNTU1MjIyNzcxLCJpYXQiOjE1NTI2MzA3NzEsImp0aSI6IjE1NTI2MzA3NzE2MzgifQ.J1WNccABxwadbcjF-GsCLUhBhyROpcxP52g6JXW0vKI"}},ut=this,dt={BOUNCE_PROJECT:function(t,e){t.commit,t.state;return n(e.record,e.info)},FETCH_MBOX:function(){var t=et()(K.a.mark(function t(e,i){var o=e.commit,n=(e.state,i.id);return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new $.a(function(t,e){s(n).then(function(e){console.log("xxi",e.data.data.url),console.log("xxi",e.data.data.userId),a(e.data.data.userId).then(function(i){console.log("work musixiser info: ",i.data.data),e.data.data.userVO=i.data.data,MidiConvert.load(e.data.data.url,function(i){console.log("midi",i);var n=i.tracks.reduce(function(t,e){return t.concat(e.notes)},[]);o("SET_ID_PROJECT",{record:n,info:e.data.data}),t()})})})}));case 1:case"end":return t.stop()}},t,ut)}));return function(e,i){return t.apply(this,arguments)}}(),FETCH_MUSIXISER:function(t,e){var i=t.commit,o=(t.state,e.id);return new $.a(function(t,e){a(o).then(function(e){console.log("musixiser info: ",e.data.data),i("SET_MUSIXISER",{musixiserInfo:e.data.data}),t()})})},FETCH_WORKS_FROM_MUSIXISER:function(t,e){var i=t.commit,o=(t.state,e.id),n=e.page;return new $.a(function(t,e){r(o,n).then(function(e){console.log("works list: ",e.data.data),i("PUSH_MUSIXISER_WORKS",{musixiserWorksObj:e.data.data}),t()})})},FETCH_FAV_WORKS:function(t,e){var i=t.commit,o=(t.state,e.id),n=e.page;return new $.a(function(t,e){c(o,n).then(function(e){console.log("works list: ",e.data.data),i("PUSH_FAV_WORKS",{favWorksObj:e.data.data}),t()})})},FETCH_PRODUCTLIST:function(t,e){var i=t.commit;t.state,e.id,e.page;return new $.a(function(t,e){g().then(function(e){console.log("product list: ",e.data.data.list),i("PUSH_PRODUCTLIST",{productList:e.data.data.list}),t()})})},FETCH_ORDERS:function(t,e){var i=t.commit,o=(t.state,e.page);return new $.a(function(t,e){h(o).then(function(e){i("PUSH_ORDERS",{orders:e.data.data}),t()})})},FETCH_STACKS:function(t,e){var i=t.commit,o=(t.state,e.page),n=e.size;return new $.a(function(t,e){w({page:o,size:n}).then(function(e){i("PUSH_STACKS",{stacks:e.data.list}),t()})})}},lt={SET_USER_INFO:function(t,e){var i=e.type;t.activeType=i},SET_WORK_INFO:function(t,e){var i=e.type,o=e.ids;t.lists[i]=o},SET_MUSIXISER_INFO:function(t,e){e.items.forEach(function(e){e&&q.a.set(t.items,e.id,e)})},SET_BOUNCE_PROJECT:function(t,e){var i=e.record;t.recordProject=i},SET_ID_PROJECT:function(t,e){var i=e.record,o=e.info;t.recordProject=i,t.recordProjectInfo=o},SET_MUSIXISER:function(t,e){var i=e.musixiserInfo;t.musixiserInfo=i},PUSH_MUSIXISER_WORKS:function(t,e){var i=e.musixiserWorksObj;console.log("ccccc",i.current),1==+i.current?t.musixiserWorksObj.content=i.list:t.musixiserWorksObj.content=t.musixiserWorksObj.content.concat(i.list),t.musixiserWorksObj.total=i.total,t.musixiserWorksObj.size=i.size,t.musixiserWorksObj.current=i.current},PUSH_FAV_WORKS:function(t,e){var i=e.favWorksObj;console.log("xxxxxxx",i),1==+i.current?t.favWorksObj.content=i.list:t.favWorksObj.content=t.favWorksObj.content.concat(i.list),t.favWorksObj.total=i.total,t.favWorksObj.size=i.size,t.favWorksObj.current=i.current},SAVE_ORDER_INFO:function(t,e){var i=e.work,o=e.product,n=e.address;t.orderToCreate.wid=i?i.id:t.orderToCreate.wid,t.orderToCreate.pid=o?o.id:t.orderToCreate.pid,t.orderToCreate.address=n||t.orderToCreate.address,t.targetProduct=o||t.targetProduct,t.targetWork=i||t.targetWork},PUSH_PRODUCTLIST:function(t,e){var i=e.productList;t.productList=i,t.targetProduct=i[0]},PUSH_ORDERS:function(t,e){var i=e.orders;console.log("xxxxxxx",i),1==+i.current?t.orders.content=i.list:t.orders.content=t.orders.content.concat(i.list),t.orders.total=i.total,t.orders.size=i.size,t.orders.current=i.current},OPERATE_WORK:function(t,e){var i=e.work;t.operatingWorkId=i.id},PLAY_WORK:function(t,e){var i=e.work;t.playingWorkId=i.id},LOCAL_UPDATE_LIST_FAV:function(t,e){var i=e.type,o=e.item;console.log(o),t[i].content.forEach(function(t){t.id==o.id&&(t.favStatus=o.favStatus,t.collectNum=t.favStatus?t.collectNum+1:t.collectNum-1)})},LOCAL_UPDATE_ORDER_STATUS:function(t,e){var i=e.orderId,o=e.status;t.orders.content.forEach(function(t){t.orderId==i&&(t.status=o)})},PUSH_STACKS:function(t,e){var i=e.stacks;console.log("来自mutation",i)}},pt={activeIds:function(t){var e=t.activeType,i=t.itemsPerPage,o=t.lists,n=Number(t.route.params.page)||1;if(e){var s=(n-1)*i,a=n*i;return o[e].slice(s,a)}return[]},activeItems:function(t,e){return e.activeIds.map(function(e){return t.items[e]}).filter(function(t){return t})}};q.a.use(Q.a);var vt={name:"app",data:function(){return{transitionName:"fade",screenOrientation:""}},created:function(){function t(){clearTimeout(a),a=setTimeout(e,300)}function e(){o.rem=n.getBoundingClientRect().width/10,n.style.fontSize=o.rem+"px"}var i=this,o=window,n=document.documentElement,s="addEventListener",a=void 0;e(),n.setAttribute("data-dpr",o.devicePixelRatio),o[s]("resize",t),o[s]("pageshow",function(e){e.persisted&&t()}),180!==window.orientation&&0!==window.orientation||(this.screenOrientation="portrait"),90!==window.orientation&&-90!==window.orientation||(this.screenOrientation="landscape"),o[s]("orientationchange",function(){console.log(screen.orientation),console.log(window.orientation),180!==window.orientation&&0!==window.orientation||(i.screenOrientation="portrait"),90!==window.orientation&&-90!==window.orientation||(i.screenOrientation="landscape")}),this.$store.dispatch("FETCH_PRODUCTLIST",{})},beforeRouteUpdate:function(t,e,i){}},ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("transition",{attrs:{name:t.transitionName}},[i("router-view",{attrs:{screenOrientation:t.screenOrientation}})],1)],1)},ft=[],mt={render:ht,staticRenderFns:ft},gt=mt,wt=i("VU/8"),yt=y,kt=wt(vt,gt,!1,yt,null,null),At=kt.exports,Tt=i("/ocq"),_t={name:"hello",data:function(){return{msg:"Welcome to Your Vue.js App"}},methods:{redirectTo:function(t){this.$router.push(t)}},created:function(){var t=document.documentElement;window.rem=t.getBoundingClientRect().width/10,t.style.fontSize=window.rem+"px",/micromessenger/.test(navigator.userAgent.toLowerCase())&&(k("code")||at.get("serviceToken")?o(k("code")).then(function(t){t.data.errcode>=2e4&&(at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect")),alert("welcome"+t.data.data.realname),console.log("get user info success",t.data.data)}).catch(function(t){at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect"))}},Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app"},[i("div",{staticClass:"m-logo"}),t._v(" "),i("div",{staticClass:"redirect-button",attrs:{id:"mb-maker"},on:{touchstart:function(e){return t.redirectTo("/new-music-box-maker")}}},[t._v("\n      去编曲\n  ")])])},bt=[],It={render:Ct,staticRenderFns:bt},xt=It,Mt=i("VU/8"),Et=A,Nt=Mt(_t,xt,!1,Et,"data-v-0a687a94",null),Ot=Nt.exports,St=i("BO1k"),Dt=i.n(St),Pt=i("Gu7T"),jt=i.n(Pt),Rt=i("J0ux"),Wt={name:"vue-swing",props:["config"],data:function(){return{stack:null,cards:[],observer:null}},mounted:function(){var t=this;this.stack=Rt.Stack(this.config||{}),Array.prototype.slice.call(this.$el.children).forEach(function(e){t.cards.push(t.stack.createCard(e))}),this.observer=new MutationObserver(function(e){var i=[],o=[];e.forEach(function(t){var e=t.addedNodes,n=t.removedNodes;i.push.apply(i,jt()(e)),o.push.apply(o,jt()(n))}),i.forEach(function(e){var i=o.indexOf(e);if(-1!==i)return void o.splice(i,1);null==t.stack.getCard(e)&&t.cards.push(t.stack.createCard(e))}),o.forEach(function(e){var i=t.stack.getCard(e);null!=i&&(t.cards.splice(t.cards.indexOf(i),1),t.stack.destroyCard(i))})}),this.observer.observe(this.$el,{childList:!0});var e=["throwout","throwoutend","throwoutdown","throwoutleft","throwoutright","throwoutup","throwin","throwinend","dragstart","dragmove","dragend","destroyCard"],i=!0,o=!1,n=void 0;try{for(var s,a=Dt()(e);!(i=(s=a.next()).done);i=!0){var r=s.value;!function(e){t.stack.on(e,function(i){t.$emit(e,i)})}(r)}}catch(t){o=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw n}}},beforeDestroy:function(){this.observer.disconnect()},Card:Rt.Card,Direction:Rt.Direction,Stack:Rt.Stack},Lt=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._t("default")],2)},Bt=[],Ut={render:Lt,staticRenderFns:Bt},zt=Ut,Ft=i("VU/8"),Gt=T,Yt=Ft(Wt,zt,!1,Gt,null,null),qt=Yt.exports,Ht={props:{workInfo:{type:Object},playingStatus:{type:Boolean,default:!1},showAuthor:{type:Boolean,default:!0},maskOn:{type:Boolean,default:!1},onPlayWork:Function,onPurchaseWork:Function,onShareWork:Function,onHideWork:Function,onDeleteWork:Function,onToggleLike:Function,onLongPress:{type:Function,default:function(){console.log("longpress")}},onTapMask:Function},computed:{},data:function(){return{}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{gotoWork:function(t){this.$router.push({path:"/new-music-box-viewer",query:{id:t}})},gotoMusixiser:function(t){this.$router.push({path:"/musixiser",query:{id:t}})}}},Xt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"card"},[o("div",{staticClass:"preview-bg"},[o("img",{staticClass:"cover",attrs:{src:t.workInfo.cover||"https://cdn4.buysellads.net/uu/1/3386/1525189887-61450.png",alt:""}}),t._v(" "),o("div",{staticClass:"dark-mask"}),t._v(" "),o("p",{staticClass:"work-content"},[t._v(t._s(t.workInfo.content))]),t._v(" "),t.playingStatus?t._e():o("img",{staticClass:"playBtn",attrs:{src:i("sHdO"),alt:""},on:{touchend:t.onPlayWork}}),t._v(" "),t.playingStatus?o("img",{staticClass:"playBtn",attrs:{src:i("oB2d"),alt:""},on:{touchend:t.onPlayWork}}):t._e()]),t._v(" "),o("div",{staticClass:"detail"},[o("div",{staticClass:"basic-info",on:{click:function(e){return t.gotoMusixiser(t.workInfo.userId)}}},[o("p",{staticClass:"title",on:{click:function(e){return t.gotoWork(t.workInfo.id)}}},[t._v(t._s(t.workInfo.title))]),t._v(" "),o("div",{staticStyle:{display:"flex","align-items":"center"}},[o("img",{staticClass:"avatar",attrs:{src:t.workInfo.userVO.smallAvatar,alt:""}}),t._v(" "),o("p",{staticClass:"song-title"},[t._v(t._s(t.workInfo.userVO.realname))]),t._v(" "),o("p",{staticClass:"update-info"},[t._v(" · 更新于"+t._s(t._f("getDateDiff")(t.workInfo.lastModifiedDate||t.workInfo.createdDate)))])])]),t._v(" "),o("div",{staticClass:"like-info"},[o("div",{staticClass:"likes",on:{click:function(e){return t.onToggleLike(t.workInfo)}}},[t.workInfo.favStatus?t._e():o("img",{attrs:{src:i("/y6Y"),alt:""}}),t._v(" "),t.workInfo.favStatus?o("img",{attrs:{src:i("XZIM"),alt:""}}):t._e(),t._v(" "),o("p",[t._v(t._s(t.workInfo.collectNum))])])])])])},Zt=[],Qt={render:Xt,staticRenderFns:Zt},Vt=Qt,Kt=i("VU/8"),Jt=_,$t=Kt(Ht,Vt,!1,Jt,"data-v-0adc9897",null),te=$t.exports,ee={name:"Square",data:function(){return{cards:[],userId:0,config:{allowedDirections:[qt.Direction.UP,qt.Direction.DOWN,qt.Direction.LEFT,qt.Direction.RIGHT],minThrowOutDistance:250,maxThrowOutDistance:300}}},components:{Card:te,VueSwing:qt},computed:{musixiserWorksObj:function(){return this.$store.state.musixiserWorksObj},operatingWorkId:function(){return this.$store.state.operatingWorkId},playingWorkId:function(){return this.$store.state.playingWorkId}},methods:{loadWorks:function(){var t=this;console.log("my id: ",this.userId);var e=this.userId;this.$store.dispatch("FETCH_WORKS_FROM_MUSIXISER",{id:e,page:this.musixiserWorksObj.current?this.musixiserWorksObj.current+1:1}).then(function(){console.log("2222222",t.musixiserWorksObj),+t.musixiserWorksObj.content.length<+t.musixiserWorksObj.total&&(t.busy=!1)})},onThrowout:function(t){var e=t.target;t.throwDirection;console.log("Threw out "+e.textContent+"!")},add:function(){this.cards.push(""+(this.cards.length+1))},remove:function(){var t=this;this.swing(),setTimeout(function(){t.cards.pop()},100)}},beforeRouteLeave:function(t,e,i){Magic.clearTone(),i()},created:function(){var t=this,e=this,i=document.documentElement;if(window.rem=i.getBoundingClientRect().width/10,i.style.fontSize=window.rem+"px",!/micromessenger/.test(navigator.userAgent.toLowerCase()))return this.userId=this.$store.state.route.query.id||239,void e.loadWorks();var o=""+location.origin+location.pathname+"#/new-music-box-viewer?id="+e.$store.state.route.query.id;WxShare.prepareShareConfig().then(function(){WxShare.prepareShareContent({title:"MUSIXISE",desc:"我的地盘你就dê听我的",fullPath:o,imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),Util.getUrlParam("code")||Cookies.get("serviceToken")?Api.getUserInfo(Util.getUrlParam("code")).then(function(i){i.data.errcode>=2e4&&(Cookies.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(o)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")),e.userId=t.$store.state.route.query.id||i.data.data.userId,e.isMe=e.userId==i.data.data.userId,e.loadMusixiserById(),console.log("get user info success",i.data.data)}).catch(function(t){Cookies.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(o)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(o)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}},ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("vue-swing",{ref:"vueswing",attrs:{config:t.config},on:{throwout:t.onThrowout}},t._l(t.musixiserWorksObj.content,function(t){return i("card",{key:t.id,attrs:{workInfo:t}})}),1),t._v(" "),i("card")],1)},oe=[],ne={render:ie,staticRenderFns:oe},se=ne,ae=i("VU/8"),re=C,ce=ae(ee,se,!1,re,null,null),ue=ce.exports,de=(i("v2ns"),i("lHA8")),le=i.n(de),pe=i("gRE1"),ve=i.n(pe),he=i("fZjL"),fe=i.n(he),me=i("ZnLv");me.Transport.cancel();var ge=1,we=void 0,ye=!1,ke=new me.Sampler({B3:"B3.[mp3|ogg]",E4:"E4.[mp3|ogg]",G4:"G4.[mp3|ogg]",B4:"B4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",E5:"E5.[mp3|ogg]",G5:"G5.[mp3|ogg]",B5:"B5.[mp3|ogg]","C#6":"Cs6.[mp3|ogg]"},{release:1,baseUrl:"//cnbj1.fds.api.xiaomi.com/mbox/audio/mbox/"}).toMaster(),Ae=i("mtWM"),Te=i.n(Ae),_e=i("fxnj"),Ce=i.n(_e),be=(i("N+Om"),this),Ie={headers:{Accept:"application/json","Content-Type":"application/json"}},xe=function(){return new $.a(function(t,e){Te.a.post("//api.octave-love.com/api/v1/wechat/getTicket?url="+encodeURIComponent(window.location.href.split("#")[0]),"",Ie).then(function(e){Ce.a.config({debug:!1,appId:e.data.data.appId,timestamp:e.data.data.timestamp,nonceStr:e.data.data.nonceStr,signature:e.data.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","chooseWXPay","openAddress","chooseImage","uploadImage"]}),Ce.a.ready(function(){t(Ce.a)})},function(){e("配置wx.config失败")})})},Me=function(t){var e=t.title,i=t.desc,o=t.fullPath,n=t.imgUrl,s=o;Ce.a.onMenuShareTimeline({title:e,link:s,imgUrl:n,success:function(){},cancel:function(){}}),Ce.a.onMenuShareAppMessage({title:e,desc:i,link:s,imgUrl:n,success:function(){},cancel:function(){}})},Ee=function(){var t=et()(K.a.mark(function t(e,i,o){var n,s,a,r=e.pid,c=e.wid,u=e.amount,d=e.address,l=e.message;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("------------"),t.next=3,f(d);case 3:return n=t.sent,console.log("==========="),console.log(n),t.next=8,p({pid:r,wid:c,amount:u,addressId:n.data.data,message:l});case 8:s=t.sent,a=s.data.data,Ne({orderId:a},i,o);case 11:case"end":return t.stop()}},t,be)}));return function(e,i,o){return t.apply(this,arguments)}}(),Ne=function(){var t=et()(K.a.mark(function t(e,i,o){var n,s,a=e.orderId;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v({orderId:a});case 2:n=t.sent,s=n.data.data,console.log(s.nonceStr),console.log(s.signType),console.log(s.package),console.log(s.timeStamp),console.log(s.appId),console.log(s.paySign),console.log("sdsd"),Ce.a.chooseWXPay({appId:s.appId,timestamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign,success:function(t){console.log(t),i(t)},fail:function(){o()},cancel:function(){o()}});case 12:case"end":return t.stop()}},t,be)}));return function(e,i,o){return t.apply(this,arguments)}}(),Oe=function(t,e){Ce.a.openAddress({success:function(e){t(e)},cancel:function(){e()}})},Se=function(t,e){Ce.a.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){var o=i.localIds[0];Ce.a.uploadImage({localId:o,isShowProgressTips:1,success:function(){function e(t){return i.apply(this,arguments)}var i=et()(K.a.mark(function e(i){var o,n;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.serverId,e.next=3,m({media_id:o});case 3:n=e.sent,console.log("file derived",n),t(n.data.data);case 6:case"end":return e.stop()}},e,this)}));return e}(),fail:function(t){e()}})}})},De=i("GDE4"),Pe=i.n(De),je=i("7QTg"),Re=i("ZnLv"),We={},Le=void 0,Be=new Re.Sampler({C4:"C4.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",A4:"A4.[mp3|ogg]",C5:"C5.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A5:"A5.[mp3|ogg]",C6:"C6.[mp3|ogg]"},{release:1,baseUrl:"//cnbj1.fds.api.xiaomi.com/mbox/audio/"}).toMaster(),Ue=(document.documentElement.getBoundingClientRect().width,Math.max(document.documentElement.clientHeight,window.innerHeight||0),[]),ze=[],Fe=0,Ge=!0,Ye=void 0,qe=0,He=0,Xe=!1,Ze=[],Qe={components:{swiper:je.swiper,swiperSlide:je.swiperSlide,vueSlider:Pe.a},props:["screenOrientation"],data:function(){return{portraitMode:!0,activeNote:{},recordPart:[],recordParts:[],playing:!1,generalControllerShow:!1,activeSwiperIndex:3,lastActiveSwiperIndex:2,vuetimeline:0,showExtendBtns:!1,alertAppear:!1,bouncing:!1,tutorSession:0,handClass:"",tutorClass:"",timelineConfig:{value:0,width:8,height:.9*window.innerHeight-20+"px",padding:"0",dotSize:20,eventType:"auto",min:0,max:200,interval:1,disabled:!1,show:!0,tooltip:"always",piecewise:!1,reverse:!0,style:{display:"inline-block"},class:"star-slider",direction:"vertical",speed:.1,bgStyle:{backgroundColor:"rgb(110,113,158)",boxShadow:"inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)"},tooltipDir:"left",tooltipStyle:{backgroundColor:"rgb(69, 106, 255)",borderColor:"rgb(69, 106, 255)",transform:"rotate(90deg)",transformOrigin:"right",position:"relative",left:"-.2rem",top:"0.9rem"},formatter:function(t){return t?(t/10).toFixed(1)+"s/20s":"0.0s/20s"},processStyle:{backgroundColor:"rgb(69,106,255)"}}}},watch:{playing:function(t){var e=this;console.log("playing status",t),t?Ye=setInterval(function(){e.vuetimeline+=1,e.vuetimeline>=200&&(e.toggleReplay(),e.vuetimeline=0)},100):clearInterval(Ye)},screenOrientation:function(){var t=this;console.log("update"),this.$nextTick(function(){return t.$refs.timeline.refresh()})}},computed:{swiper:function(){return this.$refs.pianoRoll.swiper},activePartIndex:function(){return this.PARTNUM-this.activeSwiperIndex-1},lastActivePartIndex:function(){return this.PARTNUM-this.lastActiveSwiperIndex-1}},methods:{load:function(){},toggleReplay:function(){console.log(1),this.playing=!this.playing,this.playing?(this.vuetimeline>=200&&(this.vuetimeline=0),qe=performance.now()-100*this.vuetimeline,console.log("播放开始"),this.confirmRecordPart(0),console.log("kokokoko"),Fe=performance.now(),console.log("activeOffsetTime"+100*this.vuetimeline),Re.Transport.start("+0.01",100*this.vuetimeline/1e3)):(console.log("播放停了"),Re.Transport.stop(0))},handleNoteStart:function(t){var e=0;Be.triggerAttack(t),this.$set(this.activeNote,t,1),this.playing?e=performance.now()-qe:(Ge&&(Fe=performance.now(),He=100*this.vuetimeline,Ge=!1),e=performance.now()-Fe+He),e<2e4?(this.vuetimeline=10*e/1e3,this.recordPart.push({note:t,time:+(e/1e3).toFixed(4)})):(this.vuetimeline=200,console.log("cannot record more than 20 seconds"))},handleNoteEnd:function(t){Be.triggerRelease(t),this.$set(this.activeNote,t,0)},touchNoteStartHandler:function(t){console.log(t),We[t.changedTouches[0].identifier]=t.target.id,this.handleNoteStart(t.target.id)},touchNoteEndHandler:function(t){this.handleNoteEnd(t.target.id),this.handleNoteEnd(We[t.changedTouches[0].identifier])},confirmRecordPart:function(t){if(this.recordPart.length){if(console.log("processing track: ",this.lastActivePartIndex),this.recordParts[this.lastActivePartIndex]&&this.recordParts[this.lastActivePartIndex].length&&(this.recordPart=this.recordPart.concat(this.recordParts[this.lastActivePartIndex])),Ue[this.lastActivePartIndex])try{Ue[this.lastActivePartIndex].dispose()}catch(t){}Ue[this.lastActivePartIndex]=new Re.Part(function(t,e){Be.triggerAttackRelease(e.note,"8n",t)},this.recordPart).start(0),this.recordParts[this.lastActivePartIndex]=this.recordPart,this.recordPart=[]}else console.log("啥也没录");this.lastActiveSwiperIndex=this.activeSwiperIndex,t&&(this.vuetimeline=0,Fe=0),Ge=!0},clearRecordPart:function(t){if(console.log("cleaning track "+t),this.activePartIndex===t&&(this.recordPart=[],this.vuetimeline=0,Ge=!0,this.playing=!1,Re.Transport.stop(0)),this.recordParts[t]&&this.recordParts[t].length){if(this.$set(this.recordParts,t,[]),Ue[t]){try{Ue[t].dispose()}catch(t){}Ue[t]=void 0}}else console.log("track "+t+" has no content")},checkBouncibility:function(){return this.confirmRecordPart(0),ze=[],!Ue.length||(Ue.forEach(function(t){t&&t._events.length&&t._events[0].value&&t._events.forEach(function(t){ze.push(t.value)})}),ze.sort(function(t,e){return 0+t.time-e.time}),b(ze))},bounceProject:function(){var t=this;this.confirmRecordPart(0),console.log(this),console.log(Ue),ze=[],Ue.length?(Ue.forEach(function(t){t&&t._events.length&&t._events[0].value&&t._events.forEach(function(t){ze.push(t.value)})}),ze.sort(function(t,e){return 0+t.time-e.time}),this.bouncing=!0,this.$store.dispatch("BOUNCE_PROJECT",{record:ze,info:{title:"尚未起名",content:"default",cover:""}}).then(function(e){console.log("successfully bounced"),t.bouncing=!1,t.$toast("作品已为您存储"),t.$router.push({path:"/new-music-box-viewer",query:{id:e}})}).catch(function(e){t.bouncing=!1,t.$toast("非常抱歉，上传作品失败了")})):this.$toast("什么都没录呢")},mapNoteTimeToColor:function(t){return I(t)},mapNoteMidiToLength:function(t){return x(t)},adjustTimeline:function(t){this.playing?(console.log("ccccccccc"),this.toggleReplay()):Ge=!0},onMiniKeyboardScroll:function(t){console.log(t.touches[0].clientY)},onMiniKeyboardStart:function(t){console.log(t)},removeNoteInRecordPart:function(t){this.recordPart.splice(t,1)},keng:function(t){console.log(t);for(var e=0;e<=t.changedTouches.length-1;e++){var i=document.elementFromPoint(t.changedTouches[e].clientX,t.changedTouches[e].clientY);i.classList.contains("white")||i.classList.contains("black")?We[t.changedTouches[e].identifier]&&We[t.changedTouches[e].identifier]!=i.getAttribute("id")?(console.log(We),this.handleNoteStart(i.getAttribute("id")),this.handleNoteEnd(We[t.changedTouches[e].identifier]),We[t.changedTouches[e].identifier]=i.getAttribute("id")):We[t.changedTouches[e].identifier]?console.log(3):(console.log(2),this.handleNoteStart(i.getAttribute("id")),We[t.changedTouches[e].identifier]=i.getAttribute("id")):(console.log("外边"),We[t.changedTouches[e].identifier]&&this.handleNoteEnd(We[t.changedTouches[e].identifier]),We[t.changedTouches[e].identifier]=void 0)}},btnStart:function(t){var e=this;console.log(t),Le=setTimeout(function(){e.showExtendBtns=!0},200)},btnEnd:function(t){clearTimeout(Le);var e=document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY);console.log(e),e&&e.classList.contains("bounceBtn")?this.checkBouncibility()?this.bounceProject():this.alertAppear=!0:e&&(e.classList.contains("playBtn")||e.classList.contains("pauseBtn"))?(this.toggleReplay(),this.showExtendBtns=!1):e&&(e.classList.contains("playBtn")||e.classList.contains("cancelBtn"))&&(this.showExtendBtns=!1)},tutorStart:function(){this.tutorSession=1,this.$toast("请锁住竖屏使用"),Xe=setTimeout(this.tutorProgress,3e3)},tutorProgress:function(){var t=this;switch(clearTimeout(Xe),console.log("??????????"),this.tutorSession+=1,console.log(this.tutorSession),this.tutorSession){case 1:this.clearTutorTimeout(),this.$toast("请锁住竖屏使用,长按播放按钮保存作品");break;case 2:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor2start",Ze.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor2end"},500)),Ze.push(setTimeout(function(){t.vuetimeline=120,t.handClass="hand"},1500)),Ze.push(setTimeout(function(){t.vuetimeline=0,t.handClass="hidehand"},2500));break;case 3:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor3start",Ze.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor3end"},500)),Ze.push(setTimeout(function(){t.handClass="hand",t.tutorClass="tutor3end"},800)),Ze.push(setTimeout(function(){t.handClass="hidehand"},1e3));break;case 4:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor4start",Ze.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor4end"},500)),Ze.push(setTimeout(function(){t.handClass="hand",t.tutorClass="tutor4start",t.showExtendBtns=!0},1500)),Ze.push(setTimeout(function(){t.handClass="hidehand"},2500)),Ze.push(setTimeout(function(){t.showExtendBtns=!1},3e3));break;case 5:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor5start",Ze.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor5end"},1200)),Ze.push(setTimeout(function(){t.swiper.slidePrev()},1500)),Ze.push(setTimeout(function(){t.swiper.slideNext(),t.handClass="hidehand"},2500));break;case 6:this.clearTutorTimeout(),this.handClass="hand",this.tutorClass="tutor6start",Ze.push(setTimeout(function(){t.handClass="clickhand",t.tutorClass="tutor6end"},500)),Ze.push(setTimeout(function(){t.handClass="hand",t.tutorClass="tutor6end"},800)),Ze.push(setTimeout(function(){t.handClass="hidehand"},1500));break;default:this.tutorSession=0}},clearTutorTimeout:function(){this.showExtendBtns=!1,Ze.forEach(function(t){return clearTimeout(t)}),Ze=[]}},created:function(){var t=this;Re.Transport.cancel(),Ue=[],ze=[];var e=document.documentElement;window.rem=e.getBoundingClientRect().width/10,e.style.fontSize=window.rem+"px",this.PARTNUM=3,this.pianoRollSwiperOption={initialSlide:this.PARTNUM,slidesPerView:3,on:{transitionEnd:function(e){console.log("3",this.activeIndex),t.activeSwiperIndex=this.activeIndex,t.confirmRecordPart(!Ge)}}},/micromessenger/.test(navigator.userAgent.toLowerCase())&&(xe().then(function(){Me({title:"MUSIXISE",desc:"寻找你自己的八音盒",fullPath:""+location.origin+location.pathname+"#/new-music-box-maker",imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),k("code")||at.get("serviceToken")?o(k("code")).then(function(t){t.data.errcode>=2e4&&(at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(location.origin+location.pathname+"#/new-music-box-maker")+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")),console.log("get user info success",t.data.data)}).catch(function(t){at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(location.origin+location.pathname+"#/new-music-box-maker")+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(location.origin+location.pathname+"#/new-music-box-maker")+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))},beforeRouteLeave:function(t,e,i){M(Ue),i()},mounted:function(){this.tutorStart()},updated:function(){}},Ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"container"}},[i("div",{class:["keys",8===t.tutorSession?"tutorial-highlight":""],on:{touchmove:t.keng,touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.touchNoteStartHandler(e)},touchend:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"event",void 0,e.key,void 0)?null:(e.stopPropagation(),t.touchNoteEndHandler(e))}}},[i("div",{class:["white","c",t.activeNote.C4?"active-note":""],attrs:{id:"C4"}}),t._v(" "),i("div",{class:["black","d-minor",t.activeNote.Db4?"active-note":""],attrs:{id:"Db4"}}),t._v(" "),i("div",{class:["white","d",t.activeNote.D4?"active-note":""],attrs:{id:"D4"}}),t._v(" "),i("div",{class:["black","e-minor",t.activeNote.Eb4?"active-note":""],attrs:{id:"Eb4"}}),t._v(" "),i("div",{class:["white","e",t.activeNote.E4?"active-note":""],attrs:{id:"E4"}}),t._v(" "),i("div",{class:["white","f",t.activeNote.F4?"active-note":""],attrs:{id:"F4"}}),t._v(" "),i("div",{class:["black","f-sharp",t.activeNote.Gb4?"active-note":""],attrs:{id:"Gb4"}}),t._v(" "),i("div",{class:["white","g",t.activeNote.G4?"active-note":""],attrs:{id:"G4"}}),t._v(" "),i("div",{class:["black","a-minor",t.activeNote.Ab4?"active-note":""],attrs:{id:"Ab4"}}),t._v(" "),i("div",{class:["white","a",t.activeNote.A4?"active-note":""],attrs:{id:"A4"}}),t._v(" "),i("div",{class:["black","b-minor",t.activeNote.Bb4?"active-note":""],attrs:{id:"Bb4"}}),t._v(" "),i("div",{class:["white","b",t.activeNote.B4?"active-note":""],attrs:{id:"B4"}}),t._v(" "),i("div",{class:["white","c",t.activeNote.C5?"active-note":""],attrs:{id:"C5"}}),t._v(" "),i("div",{class:["black","d-minor",t.activeNote.Db5?"active-note":""],attrs:{id:"Db5"}}),t._v(" "),i("div",{class:["white","d",t.activeNote.D5?"active-note":""],attrs:{id:"D5"}}),t._v(" "),i("div",{class:["black","e-minor",t.activeNote.Eb5?"active-note":""],attrs:{id:"Eb5"}}),t._v(" "),i("div",{class:["white","e",t.activeNote.E5?"active-note":""],attrs:{id:"E5"}}),t._v(" "),i("div",{class:["white","f",t.activeNote.F5?"active-note":""],attrs:{id:"F5"}}),t._v(" "),i("div",{class:["black","f-sharp",t.activeNote.Gb5?"active-note":""],attrs:{id:"Gb5"}}),t._v(" "),i("div",{class:["white","g",t.activeNote.G5?"active-note":""],attrs:{id:"G5"}}),t._v(" "),i("div",{class:["black","a-minor",t.activeNote.Ab5?"active-note":""],attrs:{id:"Ab5"}}),t._v(" "),i("div",{class:["white","a",t.activeNote.A5?"active-note":""],attrs:{id:"A5"}}),t._v(" "),i("div",{class:["black","b-minor",t.activeNote.Bb5?"active-note":""],attrs:{id:"Bb5"}}),t._v(" "),i("div",{class:["white","b",t.activeNote.B5?"active-note":""],attrs:{id:"B5"}}),t._v(" "),i("div",{class:["white","c",t.activeNote.C6?"active-note":""],attrs:{id:"C6"}}),t._v(" "),i("div",{class:["black","d-minor",t.activeNote.Db6?"active-note":""],attrs:{id:"Db6"}}),t._v(" "),i("div",{class:["white","d",t.activeNote.D6?"active-note":""],attrs:{id:"D6"}}),t._v(" "),i("div",{class:["black","e-minor",t.activeNote.Eb6?"active-note":""],attrs:{id:"Eb6"}}),t._v(" "),i("div",{class:["white","e",t.activeNote.E6?"active-note":""],attrs:{id:"E6"}}),t._v(" "),i("div",{class:["white","f",t.activeNote.F6?"active-note":""],attrs:{id:"F6"}})]),t._v(" "),i("div",{class:["keyshadow",8===t.tutorSession?"tutorial-highlight":""]}),t._v(" "),i("div",{staticClass:"scroll-container"}),t._v(" "),i("div",{staticClass:"semi-piano-roll",class:[5===t.tutorSession||6===t.tutorSession?"tutorial-highlight":""],on:{touchmove:function(t){t.stopPropagation(),t.preventDefault()}}},[i("swiper",{ref:"pianoRoll",attrs:{options:t.pianoRollSwiperOption}},[t._l(t.PARTNUM,function(e){return i("swiper-slide",[i("div",{staticClass:"current-piano-roll"},[i("svg",{style:{height:"90%",padding:t.timelineConfig.dotSize/2+"px 0"}},[i("defs",[i("filter",{attrs:{id:"glowing",height:"400%",width:"130%",x:"-10%",y:"-130%"}},[i("feMorphology",{attrs:{operator:"dilate",radius:"1",in:"SourceAlpha",result:"thicken"}}),t._v(" "),i("feGaussianBlur",{attrs:{in:"thicken",stdDeviation:"2",result:"blurred"}}),t._v(" "),i("feFlood",{attrs:{"flood-color":"rgb(200,200,255)",result:"glowColor"}}),t._v(" "),i("feComposite",{attrs:{in:"glowColor",in2:"blurred",operator:"in",result:"softGlow_colored"}}),t._v(" "),i("feMerge",[i("feMergeNode",{attrs:{in:"softGlow_colored"}}),t._v(" "),i("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)]),t._v(" "),t._l(t.recordPart,function(o,n){return t.activePartIndex===t.PARTNUM-e?i("rect",{attrs:{x:2,y:100*o.time/20+"%",width:t.mapNoteMidiToLength(o.note),height:"3",rx:"2",ry:"2",fill:t.mapNoteTimeToColor(o.time),filter:"url(#glowing)"},on:{click:function(e){return t.removeNoteInRecordPart(n)}}}):t._e()}),t._v(" "),t._l(t.recordParts[t.PARTNUM-e],function(o,n){return i("rect",{attrs:{x:2,y:100*o.time/20+"%",width:t.mapNoteMidiToLength(o.note),height:"3",rx:"2",ry:"2",fill:t.activePartIndex===t.PARTNUM-e?t.mapNoteTimeToColor(o.time):"rgb(120,120,120)",filter:t.activePartIndex===t.PARTNUM-e?"url(#glowing)":""}})})],2),t._v(" "),i("div",{staticClass:"temp",on:{click:function(i){return t.clearRecordPart(t.PARTNUM-e)}}})])])}),t._v(" "),i("swiper-slide"),t._v(" "),i("swiper-slide")],2)],1),t._v(" "),i("div",{staticClass:"g-controller"},[i("vue-slider",t._b({ref:"timeline",class:[2===t.tutorSession?"tutorial-highlight":""],attrs:{show:"portrait"===t.screenOrientation},on:{callback:t.adjustTimeline,"drag-end":function(t){}},model:{value:t.vuetimeline,callback:function(e){t.vuetimeline=e},expression:"vuetimeline"}},"vue-slider",t.timelineConfig,!1)),t._v(" "),i("div",{staticClass:"btnContainer",class:[3===t.tutorSession||4===t.tutorSession?"tutorial-highlight":""],on:{touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.btnStart(e)},touchend:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"event",void 0,e.key,void 0)?null:(e.stopPropagation(),t.btnEnd(e))}}},[i("div",{class:[t.playing?"pauseBtn":"playBtn","rotate"],on:{click:t.toggleReplay}}),t._v(" "),i("div",{class:[t.showExtendBtns?"extendBtnsShow":"extendBtnsHide","extendBtns"]},[i("div",{staticClass:"bounceBtn rotate"}),t._v(" "),i("div",{staticClass:"cancelBtn"})])])],1),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.alertAppear,expression:"alertAppear"}],attrs:{id:"alert-mask"}},[i("div",{staticClass:"mb-dialog"},[i("div",{staticClass:"title"},[t._v("减少些音符才能做成音乐盒，是否继续上传")]),t._v(" "),i("div",{staticClass:"btns"},[i("span",{staticClass:"btn cancel",on:{click:function(e){t.alertAppear=!1}}},[t._v("再调整")]),t._v(" "),i("span",{staticClass:"btn confirm",on:{click:t.bounceProject}},[t._v("任性上传")])])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.bouncing,expression:"bouncing"}],staticClass:"mask"},[i("p",[t._v("存储中...")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.tutorSession>0,expression:"tutorSession>0"}],staticClass:"hint-mask",attrs:{id:"tutorial-mask"},on:{touchend:t.tutorProgress}},[i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.tutorSession,expression:"tutorSession===2"}],staticClass:"hint-text",attrs:{id:"timeline-hint"}},[i("h3",[t._v("进度条")]),t._v(" "),i("p",[t._v("拖动原点改变时间")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.tutorSession,expression:"tutorSession===3"}],staticClass:"hint-text",attrs:{id:"play-hint"}},[i("h3",[t._v("功能按钮")]),t._v(" "),i("p",[t._v("点击播放/暂停")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4===t.tutorSession,expression:"tutorSession===4"}],staticClass:"hint-text",attrs:{id:"longpress-hint"}},[i("h3",[t._v("功能按钮")]),t._v(" "),i("p",[t._v("长按后点击：保存/取消")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:5===t.tutorSession,expression:"tutorSession===5"}],staticClass:"hint-text",attrs:{id:"swipe-hint"}},[i("h3",[t._v("多轨编曲")]),t._v(" "),i("p",[t._v("上下滑动切换轨道编曲")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:6===t.tutorSession,expression:"tutorSession===6"}],staticClass:"hint-text",attrs:{id:"clear-hint"}},[i("h3",[t._v("多轨编曲")]),t._v(" "),i("p",[t._v("清空轨道")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"hidehand"!=t.handClass,expression:"handClass!='hidehand'"}],class:[t.tutorClass],attrs:{id:"tutorhand"}},[i("div",{class:[t.handClass]})])],1)},Ke=[],Je={render:Ve,staticRenderFns:Ke},$e=Je,ti=i("VU/8"),ei=O,ii=ti(Qe,$e,!1,ei,"data-v-2de7ceab",null),oi=ii.exports,ni={props:{initCount:Number,initActive:Boolean,iconImg:String,onClickCall:{type:Function,default:function(){return function(){console.log("tap tap in count Button")}}}},computed:{style:function(){}},data:function(){return{currentActiveCount:0,currentActive:!1}},watch:{},created:function(){this.currentActive=this.initActive,this.currentActiveCount=this.currentActive?this.initCount:this.initCount+1},mounted:function(){},updated:function(){},methods:{updateButton:function(){this.currentActive=!this.currentActive,this.onClickCall()}}},si=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btnContainer",on:{click:t.updateButton}},[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.currentActive,expression:"currentActive"}],staticClass:"active-btn-background"})]),t._v(" "),i("transition",{attrs:{name:"slideDown"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.currentActive,expression:"currentActive"}],staticClass:"btn active"},[i("div",{}),t._v(" "),i("p",[t._v(t._s(t.currentActiveCount))])])]),t._v(" "),i("transition",{attrs:{name:"slideUp"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.currentActive,expression:"!currentActive"}],staticClass:"btn inactive"},[i("div",{}),t._v(" "),i("p",[t._v(t._s(t.currentActiveCount-1))])])])],1)},ai=[],ri={render:si,staticRenderFns:ai},ci=ri,ui=i("VU/8"),di=S,li=ui(ni,ci,!1,di,"data-v-2e8cb9b0",null),pi=li.exports,vi={components:{CountButton:pi},data:function(){return{loading:!0,workIntroAppear:!1,controlPanalAppear:!1,workUpdateAppear:!1,playing:!1,userId:0,favStatus:!1,newWorkTitle:"",newMessage:"",newCover:"",finalNewWorkTitle:""}},computed:{project:function(){return this.$store.state.recordProject},projectInfo:function(){return this.$store.state.recordProjectInfo}},methods:{load:function(){},loadMusicById:function(){var t=this;console.log("hehe",this.$store.state);var e=this.$store.state.route.query.id;e&&(console.log("mmm",e),this.$store.dispatch("FETCH_MBOX",{id:e}).then(function(){console.log("workPart",t.project),console.log("work info",t.projectInfo),t.favStatus=t.projectInfo.favStatus,t.newWorkTitle=t.projectInfo.title,t.newMessage=t.projectInfo.content,t.newCover=t.projectInfo.cover;var e=""+location.origin+location.pathname+"#/new-music-box-viewer?id="+t.$store.state.route.query.id;Me({title:"MUSIXISE",desc:"来听"+t.projectInfo.userVO.realname+"的作品-"+t.projectInfo.title,fullPath:e,imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}))},togglePlay:function(){E(this.project,!this.playing),this.playing=!this.playing},toggleFav:function(){this.favStatus=+!this.favStatus,u({workId:this.$store.state.route.query.id,status:this.favStatus}).then(function(){}).catch(function(t){})},uploadPic:function(){var t=this;Se(function(e){console.log("url:",e),t.newCover=e},function(){})},updateWork:function(){var t=this;d({id:this.$store.state.route.query.id,title:this.newWorkTitle,cover:this.newCover,content:this.newMessage}),this.finalNewWorkTitle=this.newWorkTitle;var e=""+location.origin+location.pathname+"#/new-music-box-viewer?id="+this.$store.state.route.query.id;Me({title:"MUSIXISE",desc:"来听"+this.projectInfo.userVO.realname+"的作品-"+this.newWorkTitle,fullPath:e,imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"}),setTimeout(function(){t.workUpdateAppear=!1},300)},redirectToMaker:function(){this.$router.push({path:"/new-music-box-maker"})},redirectToMusixiser:function(t){t&&this.$router.push({path:"/musixiser",query:{id:t}})},positionWindow:function(){window.scroll(0,0)},purchaseItem:function(){console.log("you are about to purchase "+this.projectInfo.id),this.$store.commit("SAVE_ORDER_INFO",{work:st()({},this.projectInfo,{title:this.newWorkTitle,content:this.newMessage})}),this.$router.push({path:"/product-list",query:{}})}},beforeRouteLeave:function(t,e,i){M(),i()},created:function(){var t=this,e=document.documentElement;if(window.rem=e.getBoundingClientRect().width/10,e.style.fontSize=window.rem+"px",!/micromessenger/.test(navigator.userAgent.toLowerCase()))return void t.loadMusicById();var i=""+location.origin+location.pathname+"#/new-music-box-viewer?id="+t.$store.state.route.query.id;xe().then(function(){Me({title:"MUSIXISE",desc:"分享一个八音盒",fullPath:i,imgUrl:"https://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),k("code")||at.get("serviceToken")?o(k("code")).then(function(e){e.data.errcode>=2e4&&(at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")),t.userId=e.data.data.userId,t.loadMusicById(),console.log("get user info success",e.data.data)}).catch(function(t){at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},mounted:function(){var t=this;setTimeout(function(){t.loading=!1},2e3),setTimeout(function(){t.workIntroAppear=!0},4500),setTimeout(function(){t.controlPanalAppear=!0},5500)},updated:function(){}},hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["container",t.loading?"loading":""]},[i("div",{attrs:{id:"ground"}}),t._v(" "),t._m(0),t._v(" "),i("div",{attrs:{id:"mb"},on:{click:t.togglePlay}},[i("div",{class:["mb-part",t.playing?"playing":""],attrs:{id:"mb-lid"}}),t._v(" "),i("div",{staticClass:"mb-part",attrs:{id:"mb-body"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],attrs:{id:"play-btn"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],attrs:{id:"pause-btn"}})]),t._v(" "),i("div",{class:[t.playing?"":"not-playing"],attrs:{id:"mb-shiner"}})]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],attrs:{id:"music-aurora"}})]),t._v(" "),i("div",{attrs:{id:"low-leaf1"}}),t._v(" "),i("div",{attrs:{id:"low-leaf2"}}),t._v(" "),i("div",{attrs:{id:"low-leaf3"}}),t._v(" "),i("div",{attrs:{id:"low-leaf4"}}),t._v(" "),i("div",{attrs:{id:"mid-leaf1"}}),t._v(" "),i("div",{attrs:{id:"mid-leaf2"}}),t._v(" "),i("div",{attrs:{id:"mid-leaf3"}}),t._v(" "),i("div",{attrs:{id:"mid-leaf4"}}),t._v(" "),i("div",{attrs:{id:"top-leaf1"}}),t._v(" "),i("div",{attrs:{id:"top-leaf2"}}),t._v(" "),i("div",{attrs:{id:"top-leaf3"}}),t._v(" "),i("div",{attrs:{id:"top-leaf4"}}),t._v(" "),i("div",{attrs:{id:"top-leaf5"}}),t._v(" "),i("div",{attrs:{id:"top-leaf6"}}),t._v(" "),i("transition",{attrs:{name:"bounce"}},[t.workIntroAppear?i("div",{attrs:{id:"work-intro"}},[i("div",{staticClass:"title",on:{click:function(e){t.userId===t.projectInfo.userId?t.workUpdateAppear=!0:t.workUpdateAppear=!1}}},[t._v(t._s(t.finalNewWorkTitle||t.projectInfo.title))]),t._v(" "),i("div",{staticClass:"subtitle"},[i("span",[t._v("by")]),t._v(" "),i("span",{on:{click:function(e){return t.redirectToMusixiser(t.projectInfo.userVO.userId)}}},[i("img",{attrs:{src:t.projectInfo.userVO.smallAvatar,alt:""}})]),t._v(" "),i("span",[t._v(t._s(t.projectInfo.userVO.realname))])]),t._v(" "),t.userId===t.projectInfo.userId?i("div",{attrs:{id:"edit-work"},on:{click:function(e){t.workUpdateAppear=!0}}}):t._e()]):t._e()]),t._v(" "),i("transition",{attrs:{name:"bounce"}},[t.controlPanalAppear?i("div",{attrs:{id:"control-panal"}},[i("count-button",{attrs:{initCount:t.projectInfo.collectNum?t.projectInfo.collectNum:0,initActive:!!t.projectInfo.favStatus,iconImg:"",onClickCall:t.toggleFav}}),t._v(" "),i("div",{staticClass:"purchaseBtn",on:{click:t.purchaseItem}},[t._v("购买")]),t._v(" "),i("div",{staticClass:"makeBtn",on:{click:t.redirectToMaker}},[t._v("编曲")])],1):t._e()]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.workUpdateAppear,expression:"workUpdateAppear"}],attrs:{id:"work-update-mask"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.workUpdateAppear=!1}}},[i("div",{staticClass:"mb-dialog"},[i("div",{staticClass:"dialog-sector"},[i("div",{staticClass:"title"},[t._v("配图")]),t._v(" "),i("img",{staticClass:"work-cover",attrs:{src:t.newCover||"http://via.placeholder.com/150",alt:""},on:{click:t.uploadPic}})]),t._v(" "),i("div",{staticClass:"splitter"}),t._v(" "),i("div",{staticClass:"dialog-sector"},[i("div",{staticClass:"title"},[t._v("曲名")]),t._v(" "),i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkTitle,expression:"newWorkTitle"}],attrs:{type:"text",placeholder:"ss"},domProps:{value:t.newWorkTitle},on:{blur:t.positionWindow,input:function(e){e.target.composing||(t.newWorkTitle=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"splitter"}),t._v(" "),i("div",{staticClass:"dialog-sector"},[i("div",{staticClass:"title"},[t._v("留言")]),t._v(" "),i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage,expression:"newMessage"}],attrs:{type:"text",placeholder:"留言"},domProps:{value:t.newMessage},on:{blur:t.positionWindow,input:function(e){e.target.composing||(t.newMessage=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"splitter"})]),t._v(" "),i("div",{staticClass:"confirm-btn",on:{click:t.updateWork}},[t._v("保存")])])])],1)},fi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"spirit"}},[i("div",{staticClass:"spirit-part",attrs:{id:"spirit-body"}}),t._v(" "),i("div",{staticClass:"spirit-part",attrs:{id:"spirit-front-leaf"}}),t._v(" "),i("div",{staticClass:"spirit-part",attrs:{id:"spirit-back-leaf"}}),t._v(" "),i("div",{staticClass:"spirit-part",attrs:{id:"spirit-back1"}}),t._v(" "),i("div",{staticClass:"spirit-part",attrs:{id:"spirit-back2"}})])}],mi={render:hi,staticRenderFns:fi},gi=mi,wi=i("VU/8"),yi=D,ki=wi(vi,gi,!1,yi,"data-v-ef7f3e58",null),Ai=ki.exports,Ti={tempo:160,rectArray:[[0,0,1],[1,0,0],[0,0,0],[0,0,0],[1,1,1],[1,1,0],[0,1],[1],[1],[1],[0],[0],[0],[0],[1],[0],[0,0,0],[0,0,0]],keyboardMode:"whitekey"},_i={whitekey:{musicScale:[0,2,4,5,7,9,11,12,14,16,17,19,21,23,24,26,28,29],initKey:60,img:""},fullkey:{musicScale:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],initKey:60,img:""}},Ci={props:{progress:Number},computed:{style:function(){}},data:function(){return{}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{updateButton:function(){}}},bi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"pie-wrapper pie-wrapper--solid"},[i("div",{staticClass:"before",style:{background:t.progress<=50?"#25252b":"#979797",transform:t.progress<=50?"rotate("+(100-t.progress)/100*-360+"deg)":"rotate("+(t.progress-50)/100*360+"deg)"}})])])},Ii=[],xi={render:bi,staticRenderFns:Ii},Mi=xi,Ei=i("VU/8"),Ni=P,Oi=Ei(Ci,Mi,!1,Ni,"data-v-f49f988e",null),Si=Oi.exports,Di=i("rc1w"),Pi=i.n(Di);q.a.use(Pi.a),window.Tone=i("ZnLv");var ji=-1,Ri=-1;window.cursorSchedules=[];var Wi=void 0,Li=void 0,Bi=new Tone.Sampler({C4:"C4.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",A4:"A4.[mp3|ogg]",C5:"C5.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A5:"A5.[mp3|ogg]",C6:"C6.[mp3|ogg]"},{release:1,baseUrl:"//cnbj1.fds.api.xiaomi.com/mbox/audio/"}).toMaster(),Ui={components:{pieProgress:Si},data:function(){return{scales:_i,NOTE_CATEGORY:_i.whitekey.musicScale.length,ONE_PAGE_NOTE_NUM:20,NOTE_NUM_PER_SECTOR:10,MB_DUR:20,tempo:140,controlWidth:0,configKonva:{width:0,height:0},configNoteRect:{},activeJ:-1,sector:1,rectArray:Array(18).fill([]),alertAppear:!1,alertAppear2:!1,showExtendBtns:!1,playing:!1,fullloop:!0,keyboardMode:"whitekey",currentTime:0}},filters:{intTime:function(t){return Math.floor(t)%20},toNote:function(t){return Tone.Frequency(t,"midi").toNote()}},computed:{tempoLength:function(){var t=100/120;return{height:t*this.tempo-50+"%"}}},methods:{setupCanvas:function(){var t=document.documentElement;this.controlWidth=t.getBoundingClientRect().width-50,this.configKonva={width:this.NOTE_CATEGORY<=18?this.controlWidth:36*this.NOTE_CATEGORY,height:window.innerHeight},this.configNoteRect={width:this.NOTE_CATEGORY<=18?this.controlWidth/this.NOTE_CATEGORY:36,height:window.innerHeight/this.ONE_PAGE_NOTE_NUM,fill:"#fff",stroke:"#000",strokeWidth:.5},this.scheduleCursor()},scheduleCursor:function(){var t=this,e=Math.ceil(20/(30/this.tempo)),i=(this.sector-1)*this.NOTE_NUM_PER_SECTOR,o=i+this.ONE_PAGE_NOTE_NUM<=e?i+this.ONE_PAGE_NOTE_NUM:e;console.log(e),console.log(i,o);for(var n=0;n<=119;n++)!function(n){t.fullloop&&n<=e-1||!t.fullloop&&n>=i&&n<=o-1?(Tone.Transport.clear(cursorSchedules[n]),cursorSchedules[n]=Tone.Transport.scheduleRepeat(function(e){t.activeJ=n,t.currentTime=.25*n*120/t.tempo,t.rectArray.forEach(function(e,i){e[n]&&Bi.triggerAttackRelease(Tone.Frequency(_i[t.keyboardMode].initKey+_i[t.keyboardMode].musicScale[i],"midi"),.25)})},t.fullloop?.25*e*120/t.tempo:.25*(o-i)*120/t.tempo,.25*n*120/t.tempo)):cursorSchedules[n]&&(t.fullloop&&n>e-1||!t.fullloop&&(n<i||n>o-1))&&(Tone.Transport.clear(cursorSchedules[n]),cursorSchedules[n]="")}(n);console.log(cursorSchedules),console.log(Tone.Transport._scheduledEvents)},setupRect:function(t,e,i){var o="",n=e+10*(i-2)+1*this.NOTE_NUM_PER_SECTOR,s=.25*n*120/this.tempo<20;return o=n==this.activeJ&&this.rectArray[t][n]?s?"#6477b1":"#A9B9FF":n!=this.activeJ||this.rectArray[t][n]?this.rectArray[t][n]?s?"#9FB2CF":"#333740":s?"rgba(0,0,0,"+(.9-.22*t/this.NOTE_CATEGORY)+")":"#131315":s?"#292B3A":"#2B2E3D",st()({},this.configNoteRect,{x:t*this.configKonva.width/this.NOTE_CATEGORY,y:e*this.configKonva.height/this.ONE_PAGE_NOTE_NUM,fill:o})},handleTouchRect:function(t,e,i){Bi.triggerAttackRelease(Tone.Frequency(_i[this.keyboardMode].initKey+_i[this.keyboardMode].musicScale[t],"midi"),.25);var o=this.rectArray[t].slice(0);o[e+(i-1)*this.NOTE_NUM_PER_SECTOR]=!o[e+(i-1)*this.NOTE_NUM_PER_SECTOR],this.$set(this.rectArray,t,o),ji=t,Ri=e},handleMoveRect:function(t,e,i){var o=e+(i-1)*this.NOTE_NUM_PER_SECTOR,n=Ri+(i-1)*this.NOTE_NUM_PER_SECTOR;if(e!=Ri)this.handleTouchRect(t,e,i);else if(t!=ji&&e==Ri){Bi.triggerAttackRelease(Tone.Frequency(_i[this.keyboardMode].initKey+_i[this.keyboardMode].musicScale[t],"midi"),.25);var s=this.rectArray[t].slice(0);s[o]=!s[o],this.$set(this.rectArray,t,s);var a=this.rectArray[ji].slice(0);a[n]=!a[n],this.$set(this.rectArray,ji,a),ji=t,Ri=e}},startloop:function(){console.log(this.rectArray),"running"!==Tone.context.state&&Tone.context.resume(),Tone.Transport.start("+0.1",(this.sector-1)*this.NOTE_NUM_PER_SECTOR*.25*120/this.tempo),this.playing=!0},stoploop:function(){Tone.Transport.stop(),this.playing=!1},toggleReplay:function(){this.playing?this.stoploop():this.startloop()},minusTempo:function(){var t=this;this.tempo>60&&(this.tempo-=5,Tone.Transport.seconds=.25*this.activeJ*120/this.tempo,Tone.Transport.bpm.rampTo(this.tempo,.01),setTimeout(function(){t.scheduleCursor()},200))},addTempo:function(){var t=this;this.tempo<180&&(this.tempo+=5,Tone.Transport.seconds=.25*this.activeJ*120/this.tempo,Tone.Transport.bpm.rampTo(this.tempo,.01),setTimeout(function(){t.scheduleCursor()},200))},scrolldown:function(){var t=this;clearInterval(Wi),11==this.sector?this.NOTE_NUM_PER_SECTOR=8:this.NOTE_NUM_PER_SECTOR=1,this.sector<=10&&(this.sector+=1),Wi=setInterval(function(){t.NOTE_NUM_PER_SECTOR+=1,10==t.NOTE_NUM_PER_SECTOR&&clearInterval(Wi)},50)},scrollup:function(){var t=this;clearInterval(Wi),1==this.sector?this.NOTE_NUM_PER_SECTOR=12:this.NOTE_NUM_PER_SECTOR=20,this.sector>=2&&(this.sector-=1),Wi=setInterval(function(){t.NOTE_NUM_PER_SECTOR-=1,10==t.NOTE_NUM_PER_SECTOR&&clearInterval(Wi)},50)},scrollToBegin:function(){clearInterval(Wi),this.sector=1},updateLoop:function(){this.fullloop=!this.fullloop,this.scheduleCursor(),this.playing&&(this.stoploop(),this.startloop())},clearNotes:function(){this.rectArray=Array(_i[this.keyboardMode].musicScale.length).fill([])},updateKeyboard:function(){this.keyboardMode="whitekey"==this.keyboardMode?"fullkey":"whitekey",this.rectArray=Array(_i[this.keyboardMode].musicScale.length).fill([]),this.NOTE_CATEGORY=_i[this.keyboardMode].musicScale.length,this.setupCanvas(),this.alertAppear2=!1},checkBouncibility:function(){for(var t=[],e=0;e<=this.NOTE_CATEGORY-1;e++)for(var i=0;i<=119;i++)this.rectArray[e][i]&&t.push({note:Tone.Frequency(_i[this.keyboardMode].initKey+_i[this.keyboardMode].musicScale[e],"midi").toNote(),time:.25*i*120/this.tempo});return t.sort(function(t,e){return 0+t.time-e.time}),b(t)},bounceProject:function(){for(var t=this,e=[],i=0;i<=this.NOTE_CATEGORY-1;i++)for(var o=0;o<=119;o++)this.rectArray[i][o]&&e.push({note:Tone.Frequency(_i[this.keyboardMode].initKey+_i[this.keyboardMode].musicScale[i],"midi").toNote(),time:.25*o*120/this.tempo});this.$store.dispatch("BOUNCE_PROJECT",{record:e,info:{title:"尚未起名",content:"default",cover:""}}).then(function(e){console.log("successfully bounced"),t.bouncing=!1,t.$toast("作品已为您存储"),cursorSchedules.forEach(function(t){return Tone.Transport.clear(t)}),t.$router.push({path:"/new-music-box-viewer",query:{id:e}})}).catch(function(e){t.bouncing=!1,t.$toast("非常抱歉，上传作品失败了")})},submitProject:function(){this.checkBouncibility()?this.bounceProject():this.alertAppear=!0},clearProject:function(){},btnStart:function(t){var e=this;console.log(t),Li=setTimeout(function(){e.showExtendBtns=!0},200)},btnEnd:function(t){clearTimeout(Li);var e=document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY);console.log(e),e&&e.classList.contains("bounceBtn")?this.submitProject():e&&(e.classList.contains("playBtn")||e.classList.contains("pauseBtn"))?(this.toggleReplay(),this.showExtendBtns=!1):e&&(e.classList.contains("playBtn")||e.classList.contains("cancelBtn"))&&(this.showExtendBtns=!1)}},beforeRouteLeave:function(t,e,i){M(),i()},created:function(){this.scales=_i,this.setupCanvas(),console.log(Ti),this.$store.state.route.query.id&&(this.keyboardMode=Ti.keyboardMode,this.tempo=Ti.tempo,this.rectArray=Ti.rectArray,this.scheduleCursor());Tone.Transport.cancel();var t=document.documentElement;window.rem=t.getBoundingClientRect().width/10,t.style.fontSize=window.rem+"px",/micromessenger/.test(navigator.userAgent.toLowerCase())&&(xe().then(function(){Me({title:"MUSIXISE",desc:"划拉划拉八音盒",fullPath:""+location.origin+location.pathname+"#/new-music-box-roll",imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),k("code")||at.get("serviceToken")?o(k("code")).then(function(t){t.data.errcode>=2e4&&(at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(location.origin+location.pathname+"#/new-music-box-roll")+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")),console.log("get user info success",t.data.data)}).catch(function(t){at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(location.origin+location.pathname+"#/new-music-box-roll")+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(location.origin+location.pathname+"#/new-music-box-roll")+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"))},mounted:function(){},updated:function(){}},zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("div",{staticClass:"roll",style:{width:t.controlWidth+"px"}},[i("div",{staticStyle:{position:"absolute",height:"20px","background-color":"rgba(0,0,0,.5)",color:"white","z-index":"10",display:"flex","justify-content":"space-around","font-size":"10px"},style:{width:t.configKonva.width+"px"}},t._l(t.NOTE_CATEGORY,function(e){return i("span",{key:e,staticStyle:{width:"10px"}},[t._v(t._s(t._f("toNote")(t.scales[t.keyboardMode].initKey+t.scales[t.keyboardMode].musicScale[e-1])))])}),0),t._v(" "),i("v-stage",{attrs:{config:t.configKonva}},[i("v-layer",[t._l(t.NOTE_CATEGORY,function(e){return t._l(t.ONE_PAGE_NOTE_NUM,function(o){return i("v-rect",{key:"i"+e+"j"+o,attrs:{config:t.setupRect(e-1,o-1,t.sector)},on:{touchstart:function(i){return t.handleTouchRect(e-1,o-1,t.sector)},touchmove:function(i){return t.handleMoveRect(e-1,o-1,t.sector)}}})})})],2)],1)],1),t._v(" "),i("div",{staticClass:"control-panal"},[i("div",[i("div",{staticClass:"rotate",attrs:{id:"scrolltop"},on:{touchstart:t.scrollToBegin}}),t._v(" "),i("div",{staticClass:"rotate",attrs:{id:"scrollup"},on:{touchstart:t.scrollup}}),t._v(" "),i("div",{staticClass:"rotate",attrs:{id:"scrolldown"},on:{touchstart:t.scrolldown}}),t._v(" "),i("div",{staticClass:"rotate",attrs:{id:"clear"},on:{touchstart:t.clearNotes}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}]},[i("div",{staticClass:"rotate",attrs:{id:"minustempo"},on:{touchstart:t.minusTempo}}),t._v(" "),i("div",{attrs:{id:"tempo-indicator"}},[i("div",{style:t.tempoLength,attrs:{id:"tempo-progress"}}),t._v(" "),i("p",{attrs:{id:"tempo-num"}},[t._v(t._s(this.tempo)+" bpm")])]),t._v(" "),i("div",{staticClass:"rotate",attrs:{id:"addtempo"},on:{touchstart:t.addTempo}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticStyle:{position:"relative",display:"flex","align-items":"center","justify-content":"center"}},[i("div",{staticClass:"rotate",attrs:{id:t.fullloop?"fullloop":"partloop"},on:{touchstart:t.updateLoop}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticStyle:{position:"relative",display:"flex","align-items":"center","justify-content":"center"}},[i("div",{staticClass:"rotate",attrs:{id:t.keyboardMode},on:{touchstart:function(e){t.alertAppear2=!0}}})]),t._v(" "),i("div",{staticClass:"btnContainer",on:{touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.btnStart(e)},touchend:function(e){return e.stopPropagation(),e.preventDefault(),t.btnEnd(e)}}},[i("div",{class:[t.playing?"pauseBtn":"playBtn","rotate"],on:{click:t.toggleReplay}}),t._v(" "),i("div",{class:[t.showExtendBtns?"extendBtnsShow":"extendBtnsHide","extendBtns"]},[i("div",{staticClass:"bounceBtn rotate"}),t._v(" "),i("div",{staticClass:"cancelBtn"})])])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.alertAppear,expression:"alertAppear"}],staticClass:"alert-mask"},[i("div",{staticClass:"mb-dialog"},[i("div",{staticClass:"title"},[t._v("减少些音符才能做成音乐盒，是否继续上传")]),t._v(" "),i("div",{staticClass:"btns"},[i("span",{staticClass:"btn cancel",on:{click:function(e){t.alertAppear=!1}}},[t._v("再调整")]),t._v(" "),i("span",{staticClass:"btn confirm",on:{click:t.bounceProject}},[t._v("任性上传")])])])])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.alertAppear2,expression:"alertAppear2"}],staticClass:"alert-mask"},[i("div",{staticClass:"mb-dialog"},[i("div",{staticClass:"title"},[t._v("转换键盘将清空现有作品")]),t._v(" "),i("div",{staticClass:"btns"},[i("span",{staticClass:"btn cancel",on:{click:function(e){t.alertAppear2=!1}}},[t._v("取消")]),t._v(" "),i("span",{staticClass:"btn confirm",on:{click:t.updateKeyboard}},[t._v("转换键盘")])])])])])],1)},Fi=[],Gi={render:zi,staticRenderFns:Fi},Yi=Gi,qi=i("VU/8"),Hi=j,Xi=qi(Ui,Yi,!1,Hi,"data-v-0bd47fc8",null),Zi=Xi.exports,Qi={props:{isMine:{type:Boolean,default:!1},workInfo:{type:Object},playingStatus:{type:Boolean,default:!1},showAuthor:{type:Boolean,default:!0},maskOn:{type:Boolean,default:!1},onPlayWork:Function,onPurchaseWork:Function,onShareWork:Function,onHideWork:Function,onDeleteWork:Function,onToggleLike:Function,onLongPress:{type:Function,default:function(){console.log("longpress")}},onTapMask:Function},computed:{},data:function(){return{info:{id:148,title:"castle",cover:"",content:"default",url:"//img.musixise.com/LIjPhuhF_castle.mid",favStatus:0,createdDate:"2019-01-10 23:38:18",userId:239,collectNum:0,lastModifiedDate:"2019-01-17 11:51:03",fileHash:"f0af50f723c10857ad5348fe52ee8f1c",userVO:{id:108,username:"wechat_oazyg56Zj4X6HViD9h0jB2BTOHJQ",realname:"花子文",tel:"",email:"wechat_oazyg56Zj4X6HViD9h0jB2BTOHJQ@musixise.com",birth:"2000-01-01",gender:"",smallAvatar:"//thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM5OUNntatJGnibRkygaFhMZickUgUMDulSibFI0yQhNqYSZFYqK6BtdDItuC9uDALXwibxcvlibBvR1cknqfYVyf1KND/132",largeAvatar:"//thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM5OUNntatJGnibRkygaFhMZickUgUMDulSibFI0yQhNqYSZFYqK6BtdDItuC9uDALXwibxcvlibBvR1cknqfYVyf1KND/132",nation:"",isMaster:0,brief:null,favStatus:0,followNum:0,fansNum:0,songNum:43,userId:239,createdDate:"2019-01-02 12:41:55"}}}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{gotoWork:function(t){this.$router.push({path:"/new-music-box-viewer",query:{id:t}})},gotoMusixiser:function(t){this.$router.push({path:"/musixiser",query:{id:t}})}}},Vi=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"longpress",rawName:"v-longpress",value:t.onLongPress,expression:"onLongPress"}],staticClass:"work-container"},[o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.maskOn,expression:"maskOn"}],staticClass:"mask",on:{touchstart:function(e){return e.target!==e.currentTarget?null:t.onTapMask(e)}}},[o("div",{staticClass:"circle-btn pink",on:{click:t.onPurchaseWork}},[t._v("购买")])])]),t._v(" "),o("div",{staticClass:"preview-bg"},[o("img",{staticClass:"cover",attrs:{src:t.workInfo.cover||"https://cdn4.buysellads.net/uu/1/3386/1525189887-61450.png",alt:""}}),t._v(" "),t.playingStatus?t._e():o("img",{staticClass:"playBtn",attrs:{src:i("sHdO"),alt:""},on:{touchend:t.onPlayWork}}),t._v(" "),t.playingStatus?o("img",{staticClass:"playBtn",attrs:{src:i("oB2d"),alt:""},on:{touchend:t.onPlayWork}}):t._e()]),t._v(" "),o("div",{staticClass:"detail"},[o("p",{staticClass:"title",on:{click:function(e){return t.gotoWork(t.workInfo.id)}}},[t._v(t._s(t.workInfo.title))]),t._v(" "),o("div",{staticClass:"user",on:{click:function(e){return t.gotoMusixiser(t.workInfo.userId)}}},[o("img",{staticClass:"avatar",attrs:{src:t.workInfo.userVO.smallAvatar,alt:""}}),t._v(" "),o("p",{staticClass:"song-title"},[t._v(t._s(t.workInfo.userVO.realname))])]),t._v(" "),o("div",{staticClass:"detail-other"},[o("div",[t._v(t._s(t._f("getDateDiff")(t.workInfo.lastModifiedDate||t.workInfo.createdDate)))]),t._v(" "),o("div",{staticClass:"likes",on:{click:function(e){return t.onToggleLike(t.workInfo)}}},[t.workInfo.favStatus?t._e():o("img",{attrs:{src:i("/y6Y"),alt:""}}),t._v(" "),t.workInfo.favStatus?o("img",{attrs:{src:i("XZIM"),alt:""}}):t._e(),t._v("\n        "+t._s(t.workInfo.collectNum)+"\n      ")])])])],1)},Ki=[],Ji={render:Vi,staticRenderFns:Ki},$i=Ji,to=i("VU/8"),eo=R,io=to(Qi,$i,!1,eo,"data-v-e21b5e42",null),oo=io.exports,no=i("bqTm"),so=i.n(no),ao={directives:{infiniteScroll:so.a},components:{workCard:oo},data:function(){return{loading:!0,playing:!1,userId:0,isMe:!1,favStatus:!1,newWorkTitle:"",finalNewWorkTitle:"",busy:!0}},computed:{musixiserInfo:function(){return this.$store.state.musixiserInfo},musixiserWorksObj:function(){return this.$store.state.musixiserWorksObj},operatingWorkId:function(){return this.$store.state.operatingWorkId},playingWorkId:function(){return this.$store.state.playingWorkId}},methods:{loadMusixiserById:function(){console.log("my id: ",this.userId);var t=this.userId;this.$store.dispatch("FETCH_MUSIXISER",{id:t}),this.busy=!1},loadMore:function(){var t=this,e=this.userId;this.busy=!0,console.log("1111111",this.musixiserWorksObj.current),this.$store.dispatch("FETCH_WORKS_FROM_MUSIXISER",{id:e,page:this.musixiserWorksObj.current?this.musixiserWorksObj.current+1:1}).then(function(){console.log("2222222",t.musixiserWorksObj),+t.musixiserWorksObj.content.length<+t.musixiserWorksObj.total&&(t.busy=!1)})},playWork:function(t){console.log("work going to play: ",t),t.id!=this.playingWorkId?(this.playing=!0,N(t.url,this.playing),this.$store.commit("PLAY_WORK",{work:t})):this.playing?(this.playing=!1,N(t.url,this.playing),this.$store.commit("PLAY_WORK",{work:{id:-1}})):(this.playing=!0,N(t.url,1),this.$store.commit("PLAY_WORK",{work:t}))},operateWork:function(t){console.log("operate in"),this.$store.commit("OPERATE_WORK",{work:t})},cancelOperate:function(){this.$store.commit("OPERATE_WORK",{work:{id:-1}})},purchaseWork:function(t){console.log("purchase in"),this.$store.commit("SAVE_ORDER_INFO",{work:t}),this.$router.push({path:"/product-list",query:{}})},toggleLike:function(t){var e=this;u({workId:t.id,status:+!t.favStatus}).then(function(){e.$store.commit("LOCAL_UPDATE_LIST_FAV",{type:"musixiserWorksObj",item:{id:t.id,favStatus:+!t.favStatus}})})},shareWork:function(){console.log("share in")},hideWork:function(){console.log("hide in")},deleteWork:function(){}},beforeRouteLeave:function(t,e,i){M(),i()},created:function(){var t=this,e=this,i=document.documentElement;if(window.rem=i.getBoundingClientRect().width/10,i.style.fontSize=window.rem+"px",!/micromessenger/.test(navigator.userAgent.toLowerCase()))return this.userId=this.$store.state.route.query.id||239,void e.loadMusixiserById();var n=""+location.origin+location.pathname+"#/new-music-box-viewer?id="+e.$store.state.route.query.id;xe().then(function(){Me({title:"MUSIXISE",desc:"我的地盘你就dê听我的",fullPath:n,imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),k("code")||at.get("serviceToken")?o(k("code")).then(function(i){i.data.errcode>=2e4&&(at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")),e.userId=t.$store.state.route.query.id||i.data.data.userId,e.isMe=e.userId==i.data.data.userId,e.loadMusixiserById(),console.log("get user info success",i.data.data)}).catch(function(t){at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},mounted:function(){var t=this;setTimeout(function(){t.loading=!1},2e3)},updated:function(){}},ro=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"worklist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},t._l(t.musixiserWorksObj.content,function(e){return i("work-card",{key:e.id,attrs:{workInfo:e,playingStatus:e.id==t.playingWorkId,maskOn:e.id==t.operatingWorkId,onLongPress:function(){return t.operateWork(e)},onPlayWork:function(){return t.playWork(e)},onPurchaseWork:function(){return t.purchaseWork(e)},onShareWork:t.shareWork,onHideWork:t.hideWork,onDeleteWork:t.deleteWork,onTapMask:t.cancelOperate,onToggleLike:t.toggleLike}})}),1)])},co=[],uo={render:ro,staticRenderFns:co},lo=uo,po=i("VU/8"),vo=W,ho=po(ao,lo,!1,vo,"data-v-2a56f334",null),fo=ho.exports,mo={directives:{infiniteScroll:so.a},components:{workCard:oo},data:function(){return{loading:!0,playing:!1,userId:0,isMe:!1,favStatus:!1,newWorkTitle:"",finalNewWorkTitle:"",busy:!0}},computed:{musixiserInfo:function(){return this.$store.state.musixiserInfo},favWorksObj:function(){return this.$store.state.favWorksObj},operatingWorkId:function(){return this.$store.state.operatingWorkId},playingWorkId:function(){return this.$store.state.playingWorkId}},methods:{loadFavById:function(){this.busy=!1},loadMore:function(){var t=this,e=this.userId;this.busy=!0,console.log("1111111",this.favWorksObj.current),this.$store.dispatch("FETCH_FAV_WORKS",{id:e,page:this.favWorksObj.current?this.favWorksObj.current+1:1}).then(function(){console.log("2222222",t.favWorksObj),+t.favWorksObj.content.length<+t.favWorksObj.total&&(t.busy=!1)})},playWork:function(t){console.log("work going to play: ",t),t.id!=this.playingWorkId?(this.playing=!0,N(t.url,this.playing),this.$store.commit("PLAY_WORK",{work:t})):this.playing?(this.playing=!1,N(t.url,this.playing),this.$store.commit("PLAY_WORK",{work:{id:-1}})):(this.playing=!0,N(t.url,1),this.$store.commit("PLAY_WORK",{work:t}))},operateWork:function(t){console.log("operate in"),this.$store.commit("OPERATE_WORK",{work:t})},cancelOperate:function(){this.$store.commit("OPERATE_WORK",{work:{id:-1}})},purchaseWork:function(t){console.log("purchase in"),this.$store.commit("SAVE_ORDER_INFO",{work:t}),this.$router.push({path:"/product-list",query:{}})},shareWork:function(){console.log("share in")},toggleLike:function(t){var e=this;u({workId:t.id,status:+!t.favStatus}).then(function(){e.$store.commit("LOCAL_UPDATE_LIST_FAV",{type:"favWorksObj",item:{id:t.id,favStatus:+!t.favStatus}})})},hideWork:function(){console.log("hide in")},deleteWork:function(){}},beforeRouteLeave:function(t,e,i){M(),i()},created:function(){var t=this,e=this,i=document.documentElement;if(window.rem=i.getBoundingClientRect().width/10,i.style.fontSize=window.rem+"px",!/micromessenger/.test(navigator.userAgent.toLowerCase()))return this.userId=this.$store.state.route.query.id||239,void e.loadFavById();var n=""+location.origin+location.pathname+"#/new-music-box-viewer?id="+e.$store.state.route.query.id;xe().then(function(){Me({title:"MUSIXISE",desc:"我的地盘你就dê听我的",fullPath:n,imgUrl:"http://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),k("code")||at.get("serviceToken")?o(k("code")).then(function(i){i.data.errcode>=2e4&&(at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")),e.userId=t.$store.state.route.query.id||i.data.data.userId,e.isMe=e.userId==i.data.data.userId,e.loadFavById(),console.log("get user info success",i.data.data)}).catch(function(t){at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},mounted:function(){var t=this;setTimeout(function(){t.loading=!1},2e3)},updated:function(){}},go=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"worklist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},t._l(t.favWorksObj.content,function(e){return i("work-card",{key:e.id,attrs:{workInfo:e,playingStatus:e.id==t.playingWorkId,maskOn:e.id==t.operatingWorkId,onLongPress:function(){return t.operateWork(e)},onPlayWork:function(){return t.playWork(e)},onPurchaseWork:function(){return t.purchaseWork(e)},onShareWork:t.shareWork,onHideWork:t.hideWork,onDeleteWork:t.deleteWork,onTapMask:t.cancelOperate,onToggleLike:t.toggleLike}})}),1)])},wo=[],yo={render:go,staticRenderFns:wo},ko=yo,Ao=i("VU/8"),To=L,_o=Ao(mo,ko,!1,To,"data-v-7e235868",null),Co=_o.exports,bo={components:{countButton:pi},data:function(){return{searching:!1,loading:!1,recommendations:{}}},computed:{},methods:{load:function(){l().then(function(t){console.log("index:",t)})},search:function(){}},beforeRouteLeave:function(t,e,i){M(),i()},created:function(){var t=this,e=document.documentElement;if(window.rem=e.getBoundingClientRect().width/10,e.style.fontSize=window.rem+"px",!/micromessenger/.test(navigator.userAgent.toLowerCase()))return void t.loadMusicById();var i=""+location.origin+location.pathname+"#/new-music-box-viewer?id="+t.$store.state.route.query.id;xe().then(function(){Me({title:"MUSIXISE",desc:"分享一个八音盒",fullPath:i,imgUrl:"https://img.musixise.com/Ocrg2srw_icon33@2x.png"})}),k("code")||at.get("serviceToken")?o(k("code")).then(function(e){e.data.errcode>=2e4&&(at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")),t.userId=e.data.data.userId,t.loadMusicById(),console.log("get user info success",e.data.data)}).catch(function(t){at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},mounted:function(){var t=this;setTimeout(function(){t.loading=!1},2e3),setTimeout(function(){t.workIntroAppear=!0},4500),setTimeout(function(){t.controlPanalAppear=!0},5500)},updated:function(){}},Io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["container",t.loading?"loading":""]},[i("div",{attrs:{id:"ground"}}),t._v(" "),t._m(0),t._v(" "),i("div",{attrs:{id:"mb"},on:{click:t.togglePlay}},[i("div",{class:["mb-part",t.playing?"playing":""],attrs:{id:"mb-lid"}}),t._v(" "),i("div",{staticClass:"mb-part",attrs:{id:"mb-body"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],attrs:{id:"play-btn"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],attrs:{id:"pause-btn"}})])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],attrs:{id:"music-aurora"}})]),t._v(" "),i("div",{attrs:{id:"low-leaf1"}}),t._v(" "),i("div",{attrs:{id:"low-leaf2"}}),t._v(" "),i("div",{attrs:{id:"low-leaf3"}}),t._v(" "),i("div",{attrs:{id:"low-leaf4"}}),t._v(" "),i("div",{attrs:{id:"mid-leaf1"}}),t._v(" "),i("div",{attrs:{id:"mid-leaf2"}}),t._v(" "),i("div",{attrs:{id:"mid-leaf3"}}),t._v(" "),i("div",{attrs:{id:"mid-leaf4"}}),t._v(" "),i("div",{attrs:{id:"top-leaf1"}}),t._v(" "),i("div",{attrs:{id:"top-leaf2"}}),t._v(" "),i("div",{attrs:{id:"top-leaf3"}}),t._v(" "),i("div",{attrs:{id:"top-leaf4"}}),t._v(" "),i("div",{attrs:{id:"top-leaf5"}}),t._v(" "),i("div",{attrs:{id:"top-leaf6"}}),t._v(" "),i("transition",{attrs:{name:"bounce"}},[t.workIntroAppear?i("div",{attrs:{id:"work-intro"}},[i("div",{staticClass:"title"},[t._v(t._s(t.finalNewWorkTitle||t.projectInfo.title))]),t._v(" "),i("div",{staticClass:"subtitle"},[i("span",[t._v("by")]),t._v(" "),i("span",[i("img",{attrs:{src:t.projectInfo.owner.smallAvatar,alt:""}})]),t._v(" "),i("span",[t._v(t._s(t.projectInfo.owner.nickName))])]),t._v(" "),t.userId===t.projectInfo.userId?i("div",{attrs:{id:"edit-work"},on:{click:function(e){t.titleUpdateAppear=!0}}}):t._e()]):t._e()]),t._v(" "),i("transition",{attrs:{name:"bounce"}},[t.controlPanalAppear?i("div",{attrs:{id:"control-panal"}},[i("count-button",{attrs:{initCount:t.projectInfo.collectNum?t.projectInfo.collectNum:0,initActive:!!t.projectInfo.favStatus,iconImg:"",onClickCall:t.toggleFav}}),t._v(" "),i("div",{staticClass:"purchaseBtn",on:{click:t.purchaseItem}},[t._v("购买")]),t._v(" "),i("div",{staticClass:"makeBtn",on:{click:t.redirectToMaker}},[t._v("编曲")])],1):t._e()]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.titleUpdateAppear,expression:"titleUpdateAppear"}],attrs:{id:"title-update-mask"}},[i("div",{staticClass:"mb-dialog"},[i("div",{staticClass:"title"},[t._v("作品名称")]),t._v(" "),i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkTitle,expression:"newWorkTitle"}],attrs:{type:"text",placeholder:"作品新名称"},domProps:{value:t.newWorkTitle},on:{input:function(e){e.target.composing||(t.newWorkTitle=e.target.value)}}}),t._v(" "),i("div",{staticClass:"splitter"})]),t._v(" "),i("div",{staticClass:"btns"},[i("span",{staticClass:"btn cancel",on:{click:function(e){t.titleUpdateAppear=!1}}},[t._v("取消")]),t._v(" "),i("span",{staticClass:"btn confirm",on:{click:t.updateWorkTitle}},[t._v("确认")])])])])])],1)},xo=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"spirit"}},[i("div",{staticClass:"spirit-part",attrs:{id:"spirit-body"}}),t._v(" "),i("div",{staticClass:"spirit-part",attrs:{id:"spirit-front-leaf"}}),t._v(" "),i("div",{staticClass:"spirit-part",attrs:{id:"spirit-back-leaf"}}),t._v(" "),i("div",{staticClass:"spirit-part",attrs:{id:"spirit-back1"}}),t._v(" "),i("div",{staticClass:"spirit-part",attrs:{id:"spirit-back2"}})])}],Mo={render:Io,staticRenderFns:xo},Eo=Mo,No=i("VU/8"),Oo=B,So=No(bo,Eo,!1,Oo,"data-v-ff4bf22c",null),Do=So.exports,Po={props:{initCount:Number,initActive:Boolean,iconImg:String,onClickCall:{type:Function,default:function(){return function(){console.log("tap tap in count Button")}}}},components:{swiper:je.swiper,swiperSlide:je.swiperSlide},computed:{style:function(){},swiper:function(){return this.$refs.productList.swiper},bigSwiper:function(){return this.$refs.bigProductList.swiper},productList:function(){return this.$store.state.productList}},data:function(){return{activeIndex:0}},watch:{},created:function(){var t=this;this.bigProductListOption={loop:!1,centeredSlides:!0,slidesPerView:1,watchSlidesProgress:!0,effect:"fade",on:{transitionEnd:function(e){console.log(this.realIndex),t.targetProduct=t.productList[this.realIndex],t.activeIndex=this.realIndex,t.swiper.slideTo(t.activeIndex)},progress:function(t){}}},this.productListOption={loop:!1,centeredSlides:!0,slidesPerView:8,watchSlidesProgress:!0,slideToClickedSlide:!0,on:{transitionEnd:function(e){console.log(this.realIndex),t.targetProduct=t.productList[this.realIndex],t.activeIndex=this.realIndex,t.bigSwiper.slideTo(t.activeIndex)},progress:function(t){}}}},mounted:function(){},updated:function(){},methods:{viewProductDetail:function(){},toConfirmOrder:function(){console.log(123321),this.$store.commit("SAVE_ORDER_INFO",{product:this.targetProduct}),this.$router.push({path:"/order-confirm",query:{}})},to:function(t){if("number"!=typeof t)return!1;this.swiper.slideTo(t,300,!1),console.log("跳转到第",t,"页面")}}},jo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("swiper",{ref:"bigProductList",attrs:{options:t.bigProductListOption}},t._l(t.productList,function(e){return i("swiper-slide",{key:e.id},[i("div",{key:t.activeIndex,staticClass:"productPage",on:{click:t.viewProductDetail}},[i("div",{staticClass:"preview",style:{background:"url()"}},[i("img",{staticStyle:{width:"100%",height:"100%",position:"relative",display:"block","border-radius":"20px 20px 0 0",background:"black"},attrs:{src:e.previewPic||"https://cdn4.buysellads.net/uu/1/3386/1525189887-61450.png",alt:""}})]),t._v(" "),i("div",{staticClass:"desc"},[i("div",{staticClass:"desc-title"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{flex:"1",color:"#6d6e75","font-size":"12px"}},[i("p",[t._v("大小:20*30*40 (cm)")]),t._v(" "),i("p",[t._v(t._s(e.intro))])]),t._v(" "),i("div",{staticClass:"price"},[t._v("¥"+t._s(e.price))])])])])])}),1),t._v(" "),i("swiper",{ref:"productList",attrs:{options:t.productListOption}},t._l(t.productList,function(e,o){return i("swiper-slide",{key:e.id},[i("img",{class:{invalid:o!==t.activeIndex},staticStyle:{width:"1rem",height:"1rem",background:"black"},attrs:{src:e.previewPic||"https://cdn4.buysellads.net/uu/1/3386/1525189887-61450.png",alt:""}})])}),1),t._v(" "),i("div",{staticStyle:{position:"absolute",bottom:"40px",width:"100%",display:"flex","align-items":"center","justify-content":"center"}},[i("div",{staticClass:"purchaseBtn",on:{click:t.toConfirmOrder}},[t._v("购买")])])],1)},Ro=[],Wo={render:jo,staticRenderFns:Ro},Lo=Wo,Bo=i("VU/8"),Uo=U,zo=Bo(Po,Lo,!1,Uo,"data-v-544f34b5",null),Fo=zo.exports,Go={props:{initCount:Number,initActive:Boolean,iconImg:String},computed:{style:function(){},orderToCreate:function(){return this.$store.state.orderToCreate},targetProduct:function(){return this.$store.state.targetProduct},targetWork:function(){return this.$store.state.targetWork}},data:function(){return{amount:1,giftMsg:"",currentActiveCount:0,currentActive:!1,userName:"",telNum:"",address:""}},watch:{},created:function(){this.currentActive=this.initActive,this.currentActiveCount=this.currentActive?this.initCount:this.initCount+1},mounted:function(){},updated:function(){},beforeRouteEnter:function(t,e,i){i()},methods:{toConfirmOrder:function(){var t=this;this.address?(console.log(this.orderToCreate),Ee(st()({},this.orderToCreate,{amount:this.amount,message:this.giftMsg}),function(){t.$toast("下单成功"),t.$router.push({path:"/my-orders"})},function(){t.$toast("未下单"),t.$router.push({path:"/my-orders"})})):alert("请先填入地址")},positionWindow:function(){window.scroll(0,0)},editAddress:function(){var t=this;Oe(function(e){t.address=e.detailInfo,t.userName=e.userName,t.telNum=e.telNumber,t.$store.commit("SAVE_ORDER_INFO",{address:e})},function(){})},addAmount:function(){this.amount<9&&(this.amount+=1)},reduceAmount:function(){this.amount>1&&(this.amount-=1)}}},Yo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"order-confirm"},[i("div",{staticClass:"address",on:{click:t.editAddress}},[i("div",{attrs:{id:"basic-info"}},[t._v("\n        收件人：\n        "),i("span",[t._v(t._s(t.userName))]),t._v(" "),i("span",{staticStyle:{flex:"1"}},[t._v(t._s(t.telNum))])]),t._v(" "),i("div",{attrs:{id:"address-info"}},[t._v("\n        收件地址：\n        "),i("span",[t._v(t._s(t.address))]),t._v(" "),i("div",{staticClass:"address-underline",attrs:{id:"underline1"}}),t._v(" "),i("div",{staticClass:"address-underline",attrs:{id:"underline2"}})])])]),t._v(" "),i("div",{staticClass:"item"},[i("img",{staticClass:"product-img",attrs:{src:t.targetProduct.previewPic||"https://cdn4.buysellads.net/uu/1/3386/1525189887-61450.png",alt:""}}),t._v(" "),i("div",{staticClass:"goods"},[i("p",{staticClass:"sub-title"},[t._v(t._s(t.targetProduct.name))]),t._v(" "),i("p",{staticClass:"work-title"},[t._v(t._s(t.targetWork.title))])]),t._v(" "),i("div",{staticClass:"amount"},[i("span",{on:{click:t.reduceAmount}},[t._v("-")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.amount},on:{blur:[t.positionWindow,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.amount=t._n(e.target.value))}}}),t._v(" "),i("span",{on:{click:t.addAmount}},[t._v("+")])])]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"msg"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.giftMsg,expression:"giftMsg"}],attrs:{type:"text",placeholder:"默认祝福语：「在乐音相伴的梦里，世界一片白银」"},domProps:{value:t.giftMsg},on:{blur:t.positionWindow,input:function(e){e.target.composing||(t.giftMsg=e.target.value)}}})]),t._v(" "),t._m(2),t._v(" "),i("div",{staticStyle:{position:"absolute",bottom:"40px",width:"100%",display:"flex","align-items":"center","justify-content":"center"}},[i("div",{staticClass:"purchaseBtn",on:{click:t.toConfirmOrder}},[t._v("付款 ¥"+t._s(t.amount*t.targetProduct.price))])])])},qo=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"0 0.64rem"}},[i("div",{staticClass:"thinline"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-list"},[i("p",{staticClass:"sub-title"},[t._v("商品清单")]),t._v(" "),i("div",{staticClass:"sub-detail"},[i("p",[t._v("八音盒 x 1")]),t._v(" "),i("p",[t._v("包装盒 x 1")]),t._v(" "),i("p",[t._v("礼品卡 x 1")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"readme"},[t._v("购买说明\n    "),i("ul",[i("li",[t._v("· 此商品的制作周期约为7天，您可以在【我的-八音盒】页面查看进度")]),t._v(" "),i("li",[t._v("· 定制商品非质量问题不得退换货，如需退货请在公众号页面提交申请")]),t._v(" "),i("li",[t._v("· 如有其他疑问可在公众号的【留言】版块留言，我们将尽快为您解答")])])])}],Ho={render:Yo,staticRenderFns:qo},Xo=Ho,Zo=i("VU/8"),Qo=z,Vo=Zo(Go,Xo,!1,Qo,"data-v-7dd29267",null),Ko=Vo.exports,Jo={props:{info:Object,playingStatus:{type:Boolean,default:!1},onPlayWork:Function,onPayOrder:Function},computed:{},data:function(){return{}},watch:{},created:function(){},mounted:function(){},updated:function(){},methods:{updateButton:function(){}}},$o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"order-container"},[o("div",{staticClass:"preview-bg"},[o("img",{staticClass:"cover",attrs:{src:t.info.content.product.previewPic,alt:""}}),t._v(" "),o("div",{staticClass:"shipment"},[1===t.info.status?o("img",{staticClass:"statusProcess",attrs:{src:i("M+BT"),alt:""}}):t._e(),t._v(" "),1===t.info.status?o("p",{staticClass:"statusText",on:{click:t.onPayOrder}},[t._v("去支付")]):t._e(),t._v(" "),2===t.info.status?o("img",{staticClass:"statusProcess",attrs:{src:i("vmYS"),alt:""}}):t._e(),t._v(" "),2===t.info.status?o("p",{staticClass:"statusText"},[t._v("制作中👷")]):t._e(),t._v(" "),3===t.info.status?o("img",{staticClass:"statusProcess",attrs:{src:i("SaBO"),alt:""}}):t._e(),t._v(" "),3===t.info.status?o("p",{staticClass:"statusText"},[t._v("派送中🏍️")]):t._e(),t._v(" "),4===t.info.status?o("img",{staticClass:"statusProcess",attrs:{src:i("t0gW"),alt:""}}):t._e(),t._v(" "),4===t.info.status?o("p",{staticClass:"statusText"},[t._v("已收件🎁")]):t._e()])]),t._v(" "),o("div",{staticClass:"detail"},[o("div",{staticClass:"detail-basic"},[o("div",{staticClass:"title"},[o("p",{staticClass:"product-name"},[t._v(t._s(t.info.content.product.name))]),t._v(" "),o("p",{staticClass:"song-title"},[t._v(t._s(t.info.content.title))])]),t._v(" "),o("div",{class:t.playingStatus?"stopBtn":"playBtn",on:{touchend:t.onPlayWork}})]),t._v(" "),o("div",{staticClass:"detail-other"},[o("p",[t._v(t._s(t._f("getDateDiff")(t.info.orderTime))+"下单")]),t._v(" "),o("p",[t._v("¥"+t._s(t.info.price))])])])])},tn=[],en={render:$o,staticRenderFns:tn},on=en,nn=i("VU/8"),sn=F,an=nn(Jo,on,!1,sn,"data-v-c56ec848",null),rn=an.exports,cn={name:"myorders",directives:{infiniteScroll:so.a},components:{order:rn},data:function(){return{busy:!1}},computed:{orders:function(){return this.$store.state.orders},playingWorkId:function(){return this.$store.state.playingWorkId}},methods:{redirectTo:function(t){this.$router.push(t)},loadMore:function(){var t=this;this.busy=!0,console.log("1111111"),this.$store.dispatch("FETCH_ORDERS",{page:this.orders.current?this.orders.current+1:1}).then(function(){console.log("2222222",t.orders),+t.orders.content.length<+t.orders.total&&(t.busy=!1)})},payOrder:function(t){var e=this;Ne({orderId:t},function(){e.$toast("下单成功"),e.$store.commit("LOCAL_UPDATE_ORDER_STATUS",{orderId:t,status:2})},function(){})},playWork:function(t){console.log("work going to play: ",t),t.id=t.wid,t.id!=this.playingWorkId?(this.playing=!0,N(t.url,this.playing),this.$store.commit("PLAY_WORK",{work:t})):this.playing?(this.playing=!1,N(t.url,this.playing),this.$store.commit("PLAY_WORK",{work:{id:-1}})):(this.playing=!0,N(t.url,1),this.$store.commit("PLAY_WORK",{work:t}))}},created:function(){var t=this,e=document.documentElement;if(window.rem=e.getBoundingClientRect().width/10,e.style.fontSize=window.rem+"px",this.busy=!0,!/micromessenger/.test(navigator.userAgent.toLowerCase()))return void(this.busy=!1);k("code")||at.get("serviceToken")?o(k("code")).then(function(e){e.data.errcode>=2e4&&(at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect")),t.loadMore(),console.log("get user info success",e.data.data)}).catch(function(t){at.remove("serviceToken"),location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect")}):location.replace("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx353a60a8b049d366&redirect_uri=http://m.musixise.com/music-box&response_type=code&scope=snsapi_userinfo&state=type&quan,url=http://m.musixise.com/music-box&connect_redirect=1#wechat_redirect")}},un=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"orderlist",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},t._l(t.orders.content,function(e,o){return i("order",{key:e.id,attrs:{info:e,playingStatus:e.content.wid==t.playingWorkId,onPlayWork:function(){return t.playWork(e.content)},onPayOrder:function(){return t.payOrder(e.orderId)}}})}),1)])},dn=[],ln={render:un,staticRenderFns:dn},pn=ln,vn=i("VU/8"),hn=G,fn=vn(cn,pn,!1,hn,"data-v-52730cf8",null),mn=fn.exports;q.a.use(Tt.a);var gn=new Tt.a({routes:[{path:"/",name:"HelloWorld",component:Ot},{path:"/square",name:"Square",component:ue},{path:"/new-music-box-maker",name:"NMBMaker",component:oi},{path:"/new-music-box-roll",name:"MBRoll",component:Zi},{path:"/new-music-box-viewer",name:"NMBViewer",component:Ai},{path:"/product-list",name:"productList",component:Fo},{path:"/order-confirm",name:"OrderConfirm",component:Ko},{path:"/musixiser",name:"MusixiserDetail",component:fo},{path:"/my-fav",name:"MyFav",component:Co},{path:"/recommend",name:"Recommend",component:Do},{path:"/my-orders",name:"MyOrders",component:mn}]}),wn={bind:function(t,e,i){if("function"!=typeof e.value){var o=i.context.name,n="[longpress:] provided expression '"+e.expression+"' is not a function, but has to be";o&&(n+="Found in component '"+o+"' "),console.warn(n)}var s=null,a=function(t){"click"===t.type&&0!==t.button||null===s&&(s=setTimeout(function(){c()},600))},r=function(t){null!==s&&(clearTimeout(s),s=null)},c=function(t){e.value(t)};t.addEventListener("mousedown",a),t.addEventListener("touchstart",a),t.addEventListener("click",r),t.addEventListener("mouseout",r),t.addEventListener("touchend",r),t.addEventListener("touchcancel",r)}};q.a.use(Z.a,{defaultType:"center",duration:2500,wordWrap:!1,width:"auto"}),q.a.config.productionTip=!1,q.a.filter("getDateDiff",Y),q.a.directive("longpress",wn);var yn=function(){return new Q.a.Store({state:{myInfo:{},recordParts:[],recordProject:[],recordProjectInfo:{},musixiserInfo:{},musixiserWorksObj:{content:[]},favWorksObj:{content:[]},targetProduct:{},targetWork:{},orders:{content:[]},productList:[],orderToCreate:{wid:"",pid:"",address:{}},operatingWorkId:-1,playingWorkId:-1},actions:dt,mutations:lt,getters:pt})}();Object(H.sync)(yn,gn),new q.a({el:"#app",router:gn,store:yn,template:"<App/>",components:{App:At}})},"PV+0":function(t,e){},PcRd:function(t,e){},"Qp/N":function(t,e){},RiuW:function(t,e){},SaBO:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAAAcCAYAAAAtHFDdAAAABGdBTUEAALGPC/xhBQAACT1JREFUeAHtnGuMHlUZx3cLpQUpl+XSq/QSKnJtiy1EgwXRQqySFiIICYEvEAkJl4QQAomCJn4gBq0GTTRoolWbyDXwycSQVIUQwAJeEWsXSrcr0AKFtrSldP393p3z9sy8M/O+u/s2up15kv+ec57nOWdm/nOeOZeZd3t7OpChoaHDcFuaYDrp1KTaG6SDYC34fW9v74eJvk5GwEDN7wjIGoUr/E6g2nEJJpEKZXeCraRb6b/7VJZJb5mRA83Cfjf4KpgC/gZeAwaKMg3MBqeB98Aa8C0OvJm0ljYM1Py2IWiMZvg9nCY+AWaCQ8B2sBMYKIqBcwQ4EuwFA+AV+u8u0s7FiAT3gJ1gPbgBeNBcwXYSuBlsBDvAN4BRXUsOA3IDan5zuOmGCm57wSngS+DzYA4weHIF2xFgHlgGlgPrlg4mzYZwnAKeAHb8m8DEprFNBt/J4C6wBzwOjNxaIgbgpOY34qPbWfg9FJwL7PhzQccPbnwPAfPBl8E54NDs+aWiCAc7+FpwIljB0LQuW8EyfueTfDKxrcbPYa4p2D9H4WHQD5Zi39E0VjjTjl/sC6DnArAQuFZcD5wGy7HTiYbU/AYm0im82ME/A5xqPQdn78Ye2I+n7FrG5YW+9lv75iZ8wzTN/q3f4sT+NDana2nByWnCY2AAuHbJFWx3gI9AEG9si2A8A2wDj4JUYLY4V0ABB4X8YvPJ5hRtL8gT78kVMU2Ua34jQuDDaZijwkUgNf2i7JRL2yUFcDRyrdMUykeBL4IloLX/orwTuGYxsloE/QLwIMhKbsDYAI7OIQ2uO1oarJgCDgr5xfYQaCf7cFgW00a55jchBC6cSsnHMRmOnKJdCIqCJdbPy9SdmtQ7OdbbsU8E74PbUwYK6FwAPQOKpDBgbItKq4AjjcNcJYVrL+N3JfYgBsXXgZsohwEfUr8FQQbJpNaFlL8Hqs7vJDhwlEh3bHoburNBCApHn+nAILKOPC8Fwe7aJWw5N/oqZUdyR5r9egp26o1gcrZHo/NEYnk5LpBvFzDH4+MNvS/bdlXKXHsZv/3Yg3w7ywmGKWBLcCC9IPahXPM73KmXwYVbx02hPBGEYDB1/ZISdCHYgl94x9jwS+wGzOkqnFc7P7sS3M/ipmz/2cXRbWAl6FhocwvOD4CrkmN1XPdgcCzjF9vHucY5yXUOkf4gyTcT+HufwgtNRU/PoijfU/Pb6L++8uiHi49ibsj3ReWd2LdG5UYW3W4ychwkNYIn9o0YZ3ov3XJbAoyqJ0CevInyFjCTyt8lzZ5UXp2s7nEUjkSfyhoqUC7j1xe+QQbgN7wQDrqQxvPyD4IySqvMr9z4JUoedz7k/5TgRdIisX6QPH5t2ynZ0WEbzpv1j1AjTtE/T1mMRZ6isid/HhhrW2M5j/9FXbc5i/gdxHZ7clLmW4Snmk/PsyKDHSArVeb3WMjYRT+NR4kGP+i2kxG5ArcOGH6p4tt+xWDJC7y30TtQ9BkwPvk3gQMmnLjbpQMcwE9pqiaF/MLLnyFD5IpTAAw/BOEJuJ78S1nnivPrurtsKZGiC04dkU4Ch4PjQFj3vEN+HVy2zKDQuRnjMSYbMFNBXlSh7qr8h9Y8Vko4kbtTinFegNxvZi5hVPzCi0HyE7Aiac81znW0vycpZ5Mifk/JOo7nMtf/z8z5O1XandGVFT+G0VElFl9gPkPbe2NlJu8xJjkk6RSiLOPT1aI3vCV6u3qE/8/GRswvwTKXS/kjuDa6pHu4oWujcjZbVX69bkfiTuVDHN8D8ajklMztZad3ReJxGp8SOLosLPLqot4nrZ0gJXSC7BM5ZT8ICiPil5v2Fa75AXB0cu2OKDfBk6NNmRTxm30il7UxHm0++Y/q9MTh0U0s4TsaR3FH4DnAkec8dP5MZRv5rDiSve0I49piDo4jidJsY6Vl2nYEmwU8VtWkI369ecD1yoMgBMvfyZ/bLlgqzq8jhZ++jLj/wuse8BfqbwFB5oVMSJO2XfPsMmCeBC5+loADJZ+m4SOBx6qatOWXG+KUwK3hGyNyHFEWc0PLtkODe5X5tbNPBC7mUwKvpwG/IRMt6+fIOV7DT4n0IdtHxof+lgnckJfJ/BusBAdKXLj+i2Md7NODFv465NdR5eKksgvQa6n3NfBBS4P5iirz63aynE3LoSZsahksZQHjwBHENU5WrLuD+7E9OP4MxY1EoSNNVyVp83oa/WlXGx5fjRXyCz9XcCnLk8vZR3opN+YXnV5ezW+DqY38dVkRtt8Dfe+EDKnfkGXtrmPCciG4vhsypkmd2WQ9xvDuAkqnBOvBb7hZt2ooEnznY3slss+gzmBUTmXxX4XChex8/Dp9YqbaGO+FIn7RO5XoB76cVJxP/7qRK/7zLDw6zWtIzW+jUzuSXAg2w81fh5lpdvbzKYdvJA0G14VhUe9a8VQQdsd8YP2BNtxFawj8nkFmOngS/f5dXgxXA1/QXDrsmv8Xu59Rx2JjuYKTH7T5ef9VuQ4VUsJBC7/oFoGRyn2BNirW/CZkwMWshI9Uf0TXB/wKOXxcWZbODdyaUmdaUi880HomBAei55fkHQ1W47Q46Eeb0sYC6v4KrKLtNaNt52CpV8DvotFeX81vmjn43YRmA/AhdEywovezlmfB9qDLSXejexFfR/uG0Iajz9lgA/qBYW3mhQ9OzudcgF4ErsHxkeAYUnzc83aKFWQNfqmpFj4rMK4GvwOXY98/lIVaFUyz/ELBq2DhCKlwyuFTtOY3Qxz8urXsw/4E8AL9rrlUwObg4MaA/dcdW30NIjGI717ShuCrn8HyFnge21DDkPfHhsF3gNOzH4Gy3YVUE/j6Q6n7gdOwe0FzBEs5VrggJ6Dm9wD1Abj1p8puJzv1OgtM6vRQ+oIzgXVto/N3OzhfDvqBv8T8PvDf1bhITYm6xKaPvhvAZSmnutDCABzV/Law0j0F/M4AXwDLgb+aPAG0PMDVJTZ99LVOah0Un1VpBFHR6LwBXAOcbzvXc5gLL3ocfWxcv3Xg5+DHDGF+zlFLGwZqftsQNEYz/LrEmA38ysQ1ibtg9mGh2G+FgbQNvA5eo//qlyulARPX4ODuFHwWzABhmuYXsgaQ399sJq1llAzU/I6SuA6rwa+ftvQBt5gNEsXA2QX8N7GmbeW/mfdb0Cd48GAAAAAASUVORK5CYII="},XZIM:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjFweCIgaGVpZ2h0PSIxN3B4IiB2aWV3Qm94PSIwIDAgMjEgMTciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUxLjMgKDU3NTQ0KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Db21iaW5lZCBTaGFwZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJtYWluMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkFydGJvYXJkLTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04MzQuMDAwMDAwLCAtMTA0LjAwMDAwMCkiIGZpbGw9IiNGRkZGRkYiPgogICAgICAgICAgICA8cGF0aCBkPSJNODM3LjM1NjA4NCwxMTYuMzU2ODg0IEM4MzQuMDM2NjI4LDExMy4wMzc0MjcgODMzLjEzNjk2MiwxMDkuMjg1ODE2IDgzNC44ODEyMTEsMTA2LjgxMDk0MiBDODM2LjYxMDc3MywxMDQuMzU2OTA3IDg0MS44NjA0NjQsMTAzLjIxMzAyNyA4NDQuMzYzOTc0LDEwOC4xNTg3MjQgQzg0Ni44Njc0ODUsMTAzLjIxMzAyNyA4NTIuMTE3MTc2LDEwNC4zNTY5MDcgODUzLjg0NjczOCwxMDYuODEwOTQyIEM4NTUuNTkwOTg3LDEwOS4yODU4MTYgODU0LjY5MTMyMSwxMTMuMDM3NDI3IDg1MS4zNzE4NjQsMTE2LjM1Njg4NCBDODQ5Ljg3MjE4NiwxMTcuODU2NTYzIDg0Ny40OTQxMDQsMTE5LjI1MDI2NiA4NDQuMzYzOTc0LDEyMC41Mzc5OTMgQzg0MS4yMzM4NDUsMTE5LjI1MDI2NiA4MzguODU1NzYzLDExNy44NTY1NjMgODM3LjM1NjA4NCwxMTYuMzU2ODg0IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},YKqf:function(t,e){},"Z++l":function(t,e){},"Z/is":function(t,e){},dPGL:function(t,e){},e195:function(t,e){},eTTF:function(t,e){},gZ7m:function(t,e){},oB2d:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTExNTM2MTc3OTIyIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE4OTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNzQyLjc1OSAxNTEuMDE5aC00NjIuNTE2Yy03MC40OTQgMC0xMjguMjM3IDU3Ljc0Mi0xMjguMjM3IDEyOC4yMzh2NDYyLjM3MmMwIDcwLjYzNiA1Ny43NDIgMTI4LjM3OSAxMjguMzgxIDEyOC4zNzloNDYyLjM3YzcwLjY0IDAgMTI4LjM3OS01Ny43NDQgMTI4LjM3OS0xMjguMzc5di00NjIuMzcyYy0wLjE0Mi03MC40OTUtNTcuODgyLTEyOC4yMzgtMTI4LjM3OC0xMjguMjM4eiIgcC1pZD0iMTg5NyIgZmlsbD0iI2ZmZmZmZiI+PC9wYXRoPjwvc3ZnPg=="},sHdO:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAqCAYAAACk2+sZAAAABGdBTUEAALGPC/xhBQAAAb1JREFUWAnd2D1KA0EYxvGsH6hg5UehncHGAyjaeAHBC2gjegQt9QYewVY7G0lpr95BWwu1Vgi4/h9hYMImu5OZd1bwhTeZDMP8ZpeHZbXTocqynKYnNW6rCsAdsEO6T9/TvaIovvnOWoIvEeY95YXxFfi7N2c+nGBHHxXQpc850LZ+5CrBw2qWySPwY3pu2ILUuVGw23eLga5+3U1YfTfBchbpU/B9OmR90NlCNyrYbY8+A18K2rlhUSjstukyuABPDt64sA4wQyt4J3R08GJg4apNWlcfFbwUWPgC7YI31iM3FRbugqcDLGsipCxg53QZBD/xLGEdIDh41rC7+sbg5YJ1gNrg5YSFu+DpiTcQvNywcNUaPRC8tmDhLngH+tEmLE+1y21f/QtYeH9Kny1WiXXL+9xbm/AHqF4in3WhbcFPWNegn0JVueEvjBvAh1/N+8gJ176f54AVoJ6aKx35F4k1PBAg785WhpZwJUAVzZuwgBUgJfbR27dxmArXBqhOj4WDAmQNBwfIEh4rQBZwVIBS4egAxcLJAYqBTQLUBL+yYMVbZBYgb8/KUP/12WBWL2C6tXc8gQT/3/oBHj+gWM3YV28AAAAASUVORK5CYII="},t0gW:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAAAcCAYAAAAtHFDdAAAABGdBTUEAALGPC/xhBQAAB2BJREFUeAHtnFmMFEUYx1luATEqwQMUjQeaGDyCqAmyilFQPECBxGAkESOYiIAXHlExERM1KCZ44YMPmhgDUdEXDbxgvBLZB9EoCohykyAeKyCX6+8/Vq3VNdU9PcPOItv1Jf+trvq+qt76ddd0VU/tNnTKYS0tLd0JG2F0Aulxpto20i1oOfq4oaFhnymPSRUEIt8qYNUQ2pZ8O2ednxMNRK8Rsx0tRTeiE01eZQPQTWiZyoh9BckfLQeByDcHpIMIaTe+nKgzmoN2oTVoGtLgCBq+k9HdaD3aiR5DmYMx2FBBCsUGRb51ut7typeTHYk+QLrxp6NueftFbE/0MNqL3kd98tYtShxMIt86Xux25asbHDWhDeiCtH7ha0RTjXr5cZRfjnYgtdXb9xc1D4tMvvjPRTPQ6+hDtADdiRIfPOQj38BNJE4o9f7FNxLpyf42Et+X0SzUz22OfGW+BGma8B7ahAa6DbjH+GajA8iaXgKUGc5z0O/oXdRQFlCwAhik8sXXBelC7kch0zWZ6CIjH/k6QOCRxXcQ/iUozf7A8YjTXCfy2XwJeAhpzTLUrWiPKden3yLkW3DAqB6BY5AG12zbTlFTGKTyxbcYVbK/CbjS5Uc+8jVAYBHkS7mmwD8g39wPfeubmYsv0f1RM7rfraBjygajL1CapQ4YU38+FfWkSTz2/PN05Dx9z+I71gGrQfEo0kuU7kgfUh8ha1s48Kdnz1MW+abfv29aeKR6Uo9DfVA/NAWtQNb2cWC/MindkuTL+VKom3o96unfuJRdg1xb5WY4rjRg9Ivpgs7z2y5Knr5n8V2H39pcnwkOfUJutwGkl7kx5CPfFL6w6Yvcaa6+S0yY4aeHhbVr3QAKk3wpaEBb0QNuoD2m3A6YPzm+B52FXMscMGqH4HloMyrcWkZ9RkG+lJ+ErOnpkvh0c67BUhtEOsuW25SyyDdw/8LlaofbasvLT4n53Im7N+D/jy+Bw0zw2X6g8viGIn3HcpTJn2HibZJnwDSa4OD6KHTejlJGv1P54htluCjZkNZnfF86cdP8OHyNxh/5OnBgouXERKPhjitxiH8tsqYv4hOGo9E4h2pAzEQbExEZGWJrGTBdqacnVGJRlXGaDuNSn1GQL+VD0H1Gk0KdxjcA7UHWLvTjcES+PpQcebhpnTjdgiX9GfXwq1LWyrcrTj0hghfUr1hrnj1mmkduov7xtbZxGNdL5QuXlfRLChrMNIV9EWkvn2wN+qp05PyIfPPfvzDVU3gKGoQakf0e8TOOJ8FyD2nCXL4aMJo3axNlvW0rJyibo9OBx+t94vZsH7hPeOeriS9cNEgWohtMey2kt9P+XpP3k8jXJxLOn06xP61dS9lo2DaHq5RKS3y132s/6pIR2FYuXfADbdXYYdRO1XwZLKfSv0/QZKefc7igy528fxj5+kTC+V8p1lNasyoxk52G9Hr54lIu/ONfvgTNRSvCMeWlxFa9hlEr1PsOPVneYscuoc/V8h1Pnd+QNa1f7qhEiZjItxIkzw+zY9ACZE1Lh/O8sFKW8hJfPWG0tjiFAs2X62K0rSfYQKRzFc1y8YWRFqBaryxCpTeSpN+ii3iyaGqWapFvbfcvXHeguwC71MDVfVr2YirBl4z9XmVY6hVxHMRX/YShznAkG+w0VYhD+lyRLzG9kDYDuvYqmSPyQCIu8uX1vc8KLs+gJUZjfL/N49ebTGtNttymOFr5dmaErcKhRc9YG1CHVAvX1Zzr+zq0/b9uMidfPVVGmY7sIp1Mvalod87ORb7h+7cv/K43SnyD73F1XyX/4vmUTfJlBOlvWDRvPjYQnCgipqonjNo0bc9ONFSgDP1P5YtPX6xZ04bAq6pBQ3zkm8IXNpORtW0clN3flPVAX9sg0qdc/uTL+VKoKYG2rsx3g0PHxFQ7YOZTZyPKNb0InfNwL6PvQb6UdzNsSEq2kp8PVtBIlwexkW8636Phoz2S1rQFRtOr3kgbMEegT5G1vzgYkosvgbcg7Wca51bwj/HnHjDEXof0qXmz307R8jAo40vZ+ahaa93ESsXI19xIsCjjKxfllyDtQs5jegHQalTI5kvAc0hbWFL3JOHLNWCI09Z0/WFO6wVu/U0KegCLBF/yt6FqrcSTSpGvdx/BJMHXuikfjfRaOM00u3K/89JAC/JNvEomSK/VtADVPPpWFp3v2JPalBgtpMbbPOlb/uKUGC2S3kDL0AT8RfzCkq4nzeeL9ycUfO+frJnIfUNO220i3wSW0tMk9f6FfVfC9V+PNOU6Eymvl1B66bWYe3Qnacmqun8J1p96Pos0PXsJlW1nsQ37KbH9kb4I0jTsaRT/c4wHSUxQ5OtxaavsIePLiSegdagZvYCuQN38jqnM+BSj2B+RRnK0DAIwinwz+Bys65Dw5aR65TYDNSE9cXYjDQi9bZB0rDL5tBdnOup+sJ0tSn1YRb51vNj14JtYw2T97px8AP5Lkf6zpZ2maQfnFqR/E7uZNFqNBCLfGsHlrNZWfP8BXhkTFp5I1t4AAAAASUVORK5CYII="},v2ns:function(t,e){},vmYS:function(t,e){t.exports="data:image/png;base64,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"},xyZm:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.abcc376a4271b5ad1a62.js.map